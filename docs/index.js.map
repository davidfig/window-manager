{"version":3,"file":"index.js","sources":["../node_modules/tinycolor2/tinycolor.js","../node_modules/yy-fps/index.js","../node_modules/yy-counter/counter.js","../src/html.js","../node_modules/eventemitter3/index.js","../node_modules/clicked/clicked.js","../src/Window.js","../src/images.js","../src/windowOptions.js","../src/Snap.js","../src/WindowManager.js","src/code.js"],"sourcesContent":["// TinyColor v1.4.1\n// https://github.com/bgrins/TinyColor\n// Brian Grinstead, MIT License\n\n(function(Math) {\n\nvar trimLeft = /^\\s+/,\n    trimRight = /\\s+$/,\n    tinyCounter = 0,\n    mathRound = Math.round,\n    mathMin = Math.min,\n    mathMax = Math.max,\n    mathRandom = Math.random;\n\nfunction tinycolor (color, opts) {\n\n    color = (color) ? color : '';\n    opts = opts || { };\n\n    // If input is already a tinycolor, return itself\n    if (color instanceof tinycolor) {\n       return color;\n    }\n    // If we are called as a function, call using new instead\n    if (!(this instanceof tinycolor)) {\n        return new tinycolor(color, opts);\n    }\n\n    var rgb = inputToRGB(color);\n    this._originalInput = color,\n    this._r = rgb.r,\n    this._g = rgb.g,\n    this._b = rgb.b,\n    this._a = rgb.a,\n    this._roundA = mathRound(100*this._a) / 100,\n    this._format = opts.format || rgb.format;\n    this._gradientType = opts.gradientType;\n\n    // Don't let the range of [0,255] come back in [0,1].\n    // Potentially lose a little bit of precision here, but will fix issues where\n    // .5 gets interpreted as half of the total, instead of half of 1\n    // If it was supposed to be 128, this was already taken care of by `inputToRgb`\n    if (this._r < 1) { this._r = mathRound(this._r); }\n    if (this._g < 1) { this._g = mathRound(this._g); }\n    if (this._b < 1) { this._b = mathRound(this._b); }\n\n    this._ok = rgb.ok;\n    this._tc_id = tinyCounter++;\n}\n\ntinycolor.prototype = {\n    isDark: function() {\n        return this.getBrightness() < 128;\n    },\n    isLight: function() {\n        return !this.isDark();\n    },\n    isValid: function() {\n        return this._ok;\n    },\n    getOriginalInput: function() {\n      return this._originalInput;\n    },\n    getFormat: function() {\n        return this._format;\n    },\n    getAlpha: function() {\n        return this._a;\n    },\n    getBrightness: function() {\n        //http://www.w3.org/TR/AERT#color-contrast\n        var rgb = this.toRgb();\n        return (rgb.r * 299 + rgb.g * 587 + rgb.b * 114) / 1000;\n    },\n    getLuminance: function() {\n        //http://www.w3.org/TR/2008/REC-WCAG20-20081211/#relativeluminancedef\n        var rgb = this.toRgb();\n        var RsRGB, GsRGB, BsRGB, R, G, B;\n        RsRGB = rgb.r/255;\n        GsRGB = rgb.g/255;\n        BsRGB = rgb.b/255;\n\n        if (RsRGB <= 0.03928) {R = RsRGB / 12.92;} else {R = Math.pow(((RsRGB + 0.055) / 1.055), 2.4);}\n        if (GsRGB <= 0.03928) {G = GsRGB / 12.92;} else {G = Math.pow(((GsRGB + 0.055) / 1.055), 2.4);}\n        if (BsRGB <= 0.03928) {B = BsRGB / 12.92;} else {B = Math.pow(((BsRGB + 0.055) / 1.055), 2.4);}\n        return (0.2126 * R) + (0.7152 * G) + (0.0722 * B);\n    },\n    setAlpha: function(value) {\n        this._a = boundAlpha(value);\n        this._roundA = mathRound(100*this._a) / 100;\n        return this;\n    },\n    toHsv: function() {\n        var hsv = rgbToHsv(this._r, this._g, this._b);\n        return { h: hsv.h * 360, s: hsv.s, v: hsv.v, a: this._a };\n    },\n    toHsvString: function() {\n        var hsv = rgbToHsv(this._r, this._g, this._b);\n        var h = mathRound(hsv.h * 360), s = mathRound(hsv.s * 100), v = mathRound(hsv.v * 100);\n        return (this._a == 1) ?\n          \"hsv(\"  + h + \", \" + s + \"%, \" + v + \"%)\" :\n          \"hsva(\" + h + \", \" + s + \"%, \" + v + \"%, \"+ this._roundA + \")\";\n    },\n    toHsl: function() {\n        var hsl = rgbToHsl(this._r, this._g, this._b);\n        return { h: hsl.h * 360, s: hsl.s, l: hsl.l, a: this._a };\n    },\n    toHslString: function() {\n        var hsl = rgbToHsl(this._r, this._g, this._b);\n        var h = mathRound(hsl.h * 360), s = mathRound(hsl.s * 100), l = mathRound(hsl.l * 100);\n        return (this._a == 1) ?\n          \"hsl(\"  + h + \", \" + s + \"%, \" + l + \"%)\" :\n          \"hsla(\" + h + \", \" + s + \"%, \" + l + \"%, \"+ this._roundA + \")\";\n    },\n    toHex: function(allow3Char) {\n        return rgbToHex(this._r, this._g, this._b, allow3Char);\n    },\n    toHexString: function(allow3Char) {\n        return '#' + this.toHex(allow3Char);\n    },\n    toHex8: function(allow4Char) {\n        return rgbaToHex(this._r, this._g, this._b, this._a, allow4Char);\n    },\n    toHex8String: function(allow4Char) {\n        return '#' + this.toHex8(allow4Char);\n    },\n    toRgb: function() {\n        return { r: mathRound(this._r), g: mathRound(this._g), b: mathRound(this._b), a: this._a };\n    },\n    toRgbString: function() {\n        return (this._a == 1) ?\n          \"rgb(\"  + mathRound(this._r) + \", \" + mathRound(this._g) + \", \" + mathRound(this._b) + \")\" :\n          \"rgba(\" + mathRound(this._r) + \", \" + mathRound(this._g) + \", \" + mathRound(this._b) + \", \" + this._roundA + \")\";\n    },\n    toPercentageRgb: function() {\n        return { r: mathRound(bound01(this._r, 255) * 100) + \"%\", g: mathRound(bound01(this._g, 255) * 100) + \"%\", b: mathRound(bound01(this._b, 255) * 100) + \"%\", a: this._a };\n    },\n    toPercentageRgbString: function() {\n        return (this._a == 1) ?\n          \"rgb(\"  + mathRound(bound01(this._r, 255) * 100) + \"%, \" + mathRound(bound01(this._g, 255) * 100) + \"%, \" + mathRound(bound01(this._b, 255) * 100) + \"%)\" :\n          \"rgba(\" + mathRound(bound01(this._r, 255) * 100) + \"%, \" + mathRound(bound01(this._g, 255) * 100) + \"%, \" + mathRound(bound01(this._b, 255) * 100) + \"%, \" + this._roundA + \")\";\n    },\n    toName: function() {\n        if (this._a === 0) {\n            return \"transparent\";\n        }\n\n        if (this._a < 1) {\n            return false;\n        }\n\n        return hexNames[rgbToHex(this._r, this._g, this._b, true)] || false;\n    },\n    toFilter: function(secondColor) {\n        var hex8String = '#' + rgbaToArgbHex(this._r, this._g, this._b, this._a);\n        var secondHex8String = hex8String;\n        var gradientType = this._gradientType ? \"GradientType = 1, \" : \"\";\n\n        if (secondColor) {\n            var s = tinycolor(secondColor);\n            secondHex8String = '#' + rgbaToArgbHex(s._r, s._g, s._b, s._a);\n        }\n\n        return \"progid:DXImageTransform.Microsoft.gradient(\"+gradientType+\"startColorstr=\"+hex8String+\",endColorstr=\"+secondHex8String+\")\";\n    },\n    toString: function(format) {\n        var formatSet = !!format;\n        format = format || this._format;\n\n        var formattedString = false;\n        var hasAlpha = this._a < 1 && this._a >= 0;\n        var needsAlphaFormat = !formatSet && hasAlpha && (format === \"hex\" || format === \"hex6\" || format === \"hex3\" || format === \"hex4\" || format === \"hex8\" || format === \"name\");\n\n        if (needsAlphaFormat) {\n            // Special case for \"transparent\", all other non-alpha formats\n            // will return rgba when there is transparency.\n            if (format === \"name\" && this._a === 0) {\n                return this.toName();\n            }\n            return this.toRgbString();\n        }\n        if (format === \"rgb\") {\n            formattedString = this.toRgbString();\n        }\n        if (format === \"prgb\") {\n            formattedString = this.toPercentageRgbString();\n        }\n        if (format === \"hex\" || format === \"hex6\") {\n            formattedString = this.toHexString();\n        }\n        if (format === \"hex3\") {\n            formattedString = this.toHexString(true);\n        }\n        if (format === \"hex4\") {\n            formattedString = this.toHex8String(true);\n        }\n        if (format === \"hex8\") {\n            formattedString = this.toHex8String();\n        }\n        if (format === \"name\") {\n            formattedString = this.toName();\n        }\n        if (format === \"hsl\") {\n            formattedString = this.toHslString();\n        }\n        if (format === \"hsv\") {\n            formattedString = this.toHsvString();\n        }\n\n        return formattedString || this.toHexString();\n    },\n    clone: function() {\n        return tinycolor(this.toString());\n    },\n\n    _applyModification: function(fn, args) {\n        var color = fn.apply(null, [this].concat([].slice.call(args)));\n        this._r = color._r;\n        this._g = color._g;\n        this._b = color._b;\n        this.setAlpha(color._a);\n        return this;\n    },\n    lighten: function() {\n        return this._applyModification(lighten, arguments);\n    },\n    brighten: function() {\n        return this._applyModification(brighten, arguments);\n    },\n    darken: function() {\n        return this._applyModification(darken, arguments);\n    },\n    desaturate: function() {\n        return this._applyModification(desaturate, arguments);\n    },\n    saturate: function() {\n        return this._applyModification(saturate, arguments);\n    },\n    greyscale: function() {\n        return this._applyModification(greyscale, arguments);\n    },\n    spin: function() {\n        return this._applyModification(spin, arguments);\n    },\n\n    _applyCombination: function(fn, args) {\n        return fn.apply(null, [this].concat([].slice.call(args)));\n    },\n    analogous: function() {\n        return this._applyCombination(analogous, arguments);\n    },\n    complement: function() {\n        return this._applyCombination(complement, arguments);\n    },\n    monochromatic: function() {\n        return this._applyCombination(monochromatic, arguments);\n    },\n    splitcomplement: function() {\n        return this._applyCombination(splitcomplement, arguments);\n    },\n    triad: function() {\n        return this._applyCombination(triad, arguments);\n    },\n    tetrad: function() {\n        return this._applyCombination(tetrad, arguments);\n    }\n};\n\n// If input is an object, force 1 into \"1.0\" to handle ratios properly\n// String input requires \"1.0\" as input, so 1 will be treated as 1\ntinycolor.fromRatio = function(color, opts) {\n    if (typeof color == \"object\") {\n        var newColor = {};\n        for (var i in color) {\n            if (color.hasOwnProperty(i)) {\n                if (i === \"a\") {\n                    newColor[i] = color[i];\n                }\n                else {\n                    newColor[i] = convertToPercentage(color[i]);\n                }\n            }\n        }\n        color = newColor;\n    }\n\n    return tinycolor(color, opts);\n};\n\n// Given a string or object, convert that input to RGB\n// Possible string inputs:\n//\n//     \"red\"\n//     \"#f00\" or \"f00\"\n//     \"#ff0000\" or \"ff0000\"\n//     \"#ff000000\" or \"ff000000\"\n//     \"rgb 255 0 0\" or \"rgb (255, 0, 0)\"\n//     \"rgb 1.0 0 0\" or \"rgb (1, 0, 0)\"\n//     \"rgba (255, 0, 0, 1)\" or \"rgba 255, 0, 0, 1\"\n//     \"rgba (1.0, 0, 0, 1)\" or \"rgba 1.0, 0, 0, 1\"\n//     \"hsl(0, 100%, 50%)\" or \"hsl 0 100% 50%\"\n//     \"hsla(0, 100%, 50%, 1)\" or \"hsla 0 100% 50%, 1\"\n//     \"hsv(0, 100%, 100%)\" or \"hsv 0 100% 100%\"\n//\nfunction inputToRGB(color) {\n\n    var rgb = { r: 0, g: 0, b: 0 };\n    var a = 1;\n    var s = null;\n    var v = null;\n    var l = null;\n    var ok = false;\n    var format = false;\n\n    if (typeof color == \"string\") {\n        color = stringInputToObject(color);\n    }\n\n    if (typeof color == \"object\") {\n        if (isValidCSSUnit(color.r) && isValidCSSUnit(color.g) && isValidCSSUnit(color.b)) {\n            rgb = rgbToRgb(color.r, color.g, color.b);\n            ok = true;\n            format = String(color.r).substr(-1) === \"%\" ? \"prgb\" : \"rgb\";\n        }\n        else if (isValidCSSUnit(color.h) && isValidCSSUnit(color.s) && isValidCSSUnit(color.v)) {\n            s = convertToPercentage(color.s);\n            v = convertToPercentage(color.v);\n            rgb = hsvToRgb(color.h, s, v);\n            ok = true;\n            format = \"hsv\";\n        }\n        else if (isValidCSSUnit(color.h) && isValidCSSUnit(color.s) && isValidCSSUnit(color.l)) {\n            s = convertToPercentage(color.s);\n            l = convertToPercentage(color.l);\n            rgb = hslToRgb(color.h, s, l);\n            ok = true;\n            format = \"hsl\";\n        }\n\n        if (color.hasOwnProperty(\"a\")) {\n            a = color.a;\n        }\n    }\n\n    a = boundAlpha(a);\n\n    return {\n        ok: ok,\n        format: color.format || format,\n        r: mathMin(255, mathMax(rgb.r, 0)),\n        g: mathMin(255, mathMax(rgb.g, 0)),\n        b: mathMin(255, mathMax(rgb.b, 0)),\n        a: a\n    };\n}\n\n\n// Conversion Functions\n// --------------------\n\n// `rgbToHsl`, `rgbToHsv`, `hslToRgb`, `hsvToRgb` modified from:\n// <http://mjijackson.com/2008/02/rgb-to-hsl-and-rgb-to-hsv-color-model-conversion-algorithms-in-javascript>\n\n// `rgbToRgb`\n// Handle bounds / percentage checking to conform to CSS color spec\n// <http://www.w3.org/TR/css3-color/>\n// *Assumes:* r, g, b in [0, 255] or [0, 1]\n// *Returns:* { r, g, b } in [0, 255]\nfunction rgbToRgb(r, g, b){\n    return {\n        r: bound01(r, 255) * 255,\n        g: bound01(g, 255) * 255,\n        b: bound01(b, 255) * 255\n    };\n}\n\n// `rgbToHsl`\n// Converts an RGB color value to HSL.\n// *Assumes:* r, g, and b are contained in [0, 255] or [0, 1]\n// *Returns:* { h, s, l } in [0,1]\nfunction rgbToHsl(r, g, b) {\n\n    r = bound01(r, 255);\n    g = bound01(g, 255);\n    b = bound01(b, 255);\n\n    var max = mathMax(r, g, b), min = mathMin(r, g, b);\n    var h, s, l = (max + min) / 2;\n\n    if(max == min) {\n        h = s = 0; // achromatic\n    }\n    else {\n        var d = max - min;\n        s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n        switch(max) {\n            case r: h = (g - b) / d + (g < b ? 6 : 0); break;\n            case g: h = (b - r) / d + 2; break;\n            case b: h = (r - g) / d + 4; break;\n        }\n\n        h /= 6;\n    }\n\n    return { h: h, s: s, l: l };\n}\n\n// `hslToRgb`\n// Converts an HSL color value to RGB.\n// *Assumes:* h is contained in [0, 1] or [0, 360] and s and l are contained [0, 1] or [0, 100]\n// *Returns:* { r, g, b } in the set [0, 255]\nfunction hslToRgb(h, s, l) {\n    var r, g, b;\n\n    h = bound01(h, 360);\n    s = bound01(s, 100);\n    l = bound01(l, 100);\n\n    function hue2rgb(p, q, t) {\n        if(t < 0) t += 1;\n        if(t > 1) t -= 1;\n        if(t < 1/6) return p + (q - p) * 6 * t;\n        if(t < 1/2) return q;\n        if(t < 2/3) return p + (q - p) * (2/3 - t) * 6;\n        return p;\n    }\n\n    if(s === 0) {\n        r = g = b = l; // achromatic\n    }\n    else {\n        var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n        var p = 2 * l - q;\n        r = hue2rgb(p, q, h + 1/3);\n        g = hue2rgb(p, q, h);\n        b = hue2rgb(p, q, h - 1/3);\n    }\n\n    return { r: r * 255, g: g * 255, b: b * 255 };\n}\n\n// `rgbToHsv`\n// Converts an RGB color value to HSV\n// *Assumes:* r, g, and b are contained in the set [0, 255] or [0, 1]\n// *Returns:* { h, s, v } in [0,1]\nfunction rgbToHsv(r, g, b) {\n\n    r = bound01(r, 255);\n    g = bound01(g, 255);\n    b = bound01(b, 255);\n\n    var max = mathMax(r, g, b), min = mathMin(r, g, b);\n    var h, s, v = max;\n\n    var d = max - min;\n    s = max === 0 ? 0 : d / max;\n\n    if(max == min) {\n        h = 0; // achromatic\n    }\n    else {\n        switch(max) {\n            case r: h = (g - b) / d + (g < b ? 6 : 0); break;\n            case g: h = (b - r) / d + 2; break;\n            case b: h = (r - g) / d + 4; break;\n        }\n        h /= 6;\n    }\n    return { h: h, s: s, v: v };\n}\n\n// `hsvToRgb`\n// Converts an HSV color value to RGB.\n// *Assumes:* h is contained in [0, 1] or [0, 360] and s and v are contained in [0, 1] or [0, 100]\n// *Returns:* { r, g, b } in the set [0, 255]\n function hsvToRgb(h, s, v) {\n\n    h = bound01(h, 360) * 6;\n    s = bound01(s, 100);\n    v = bound01(v, 100);\n\n    var i = Math.floor(h),\n        f = h - i,\n        p = v * (1 - s),\n        q = v * (1 - f * s),\n        t = v * (1 - (1 - f) * s),\n        mod = i % 6,\n        r = [v, q, p, p, t, v][mod],\n        g = [t, v, v, q, p, p][mod],\n        b = [p, p, t, v, v, q][mod];\n\n    return { r: r * 255, g: g * 255, b: b * 255 };\n}\n\n// `rgbToHex`\n// Converts an RGB color to hex\n// Assumes r, g, and b are contained in the set [0, 255]\n// Returns a 3 or 6 character hex\nfunction rgbToHex(r, g, b, allow3Char) {\n\n    var hex = [\n        pad2(mathRound(r).toString(16)),\n        pad2(mathRound(g).toString(16)),\n        pad2(mathRound(b).toString(16))\n    ];\n\n    // Return a 3 character hex if possible\n    if (allow3Char && hex[0].charAt(0) == hex[0].charAt(1) && hex[1].charAt(0) == hex[1].charAt(1) && hex[2].charAt(0) == hex[2].charAt(1)) {\n        return hex[0].charAt(0) + hex[1].charAt(0) + hex[2].charAt(0);\n    }\n\n    return hex.join(\"\");\n}\n\n// `rgbaToHex`\n// Converts an RGBA color plus alpha transparency to hex\n// Assumes r, g, b are contained in the set [0, 255] and\n// a in [0, 1]. Returns a 4 or 8 character rgba hex\nfunction rgbaToHex(r, g, b, a, allow4Char) {\n\n    var hex = [\n        pad2(mathRound(r).toString(16)),\n        pad2(mathRound(g).toString(16)),\n        pad2(mathRound(b).toString(16)),\n        pad2(convertDecimalToHex(a))\n    ];\n\n    // Return a 4 character hex if possible\n    if (allow4Char && hex[0].charAt(0) == hex[0].charAt(1) && hex[1].charAt(0) == hex[1].charAt(1) && hex[2].charAt(0) == hex[2].charAt(1) && hex[3].charAt(0) == hex[3].charAt(1)) {\n        return hex[0].charAt(0) + hex[1].charAt(0) + hex[2].charAt(0) + hex[3].charAt(0);\n    }\n\n    return hex.join(\"\");\n}\n\n// `rgbaToArgbHex`\n// Converts an RGBA color to an ARGB Hex8 string\n// Rarely used, but required for \"toFilter()\"\nfunction rgbaToArgbHex(r, g, b, a) {\n\n    var hex = [\n        pad2(convertDecimalToHex(a)),\n        pad2(mathRound(r).toString(16)),\n        pad2(mathRound(g).toString(16)),\n        pad2(mathRound(b).toString(16))\n    ];\n\n    return hex.join(\"\");\n}\n\n// `equals`\n// Can be called with any tinycolor input\ntinycolor.equals = function (color1, color2) {\n    if (!color1 || !color2) { return false; }\n    return tinycolor(color1).toRgbString() == tinycolor(color2).toRgbString();\n};\n\ntinycolor.random = function() {\n    return tinycolor.fromRatio({\n        r: mathRandom(),\n        g: mathRandom(),\n        b: mathRandom()\n    });\n};\n\n\n// Modification Functions\n// ----------------------\n// Thanks to less.js for some of the basics here\n// <https://github.com/cloudhead/less.js/blob/master/lib/less/functions.js>\n\nfunction desaturate(color, amount) {\n    amount = (amount === 0) ? 0 : (amount || 10);\n    var hsl = tinycolor(color).toHsl();\n    hsl.s -= amount / 100;\n    hsl.s = clamp01(hsl.s);\n    return tinycolor(hsl);\n}\n\nfunction saturate(color, amount) {\n    amount = (amount === 0) ? 0 : (amount || 10);\n    var hsl = tinycolor(color).toHsl();\n    hsl.s += amount / 100;\n    hsl.s = clamp01(hsl.s);\n    return tinycolor(hsl);\n}\n\nfunction greyscale(color) {\n    return tinycolor(color).desaturate(100);\n}\n\nfunction lighten (color, amount) {\n    amount = (amount === 0) ? 0 : (amount || 10);\n    var hsl = tinycolor(color).toHsl();\n    hsl.l += amount / 100;\n    hsl.l = clamp01(hsl.l);\n    return tinycolor(hsl);\n}\n\nfunction brighten(color, amount) {\n    amount = (amount === 0) ? 0 : (amount || 10);\n    var rgb = tinycolor(color).toRgb();\n    rgb.r = mathMax(0, mathMin(255, rgb.r - mathRound(255 * - (amount / 100))));\n    rgb.g = mathMax(0, mathMin(255, rgb.g - mathRound(255 * - (amount / 100))));\n    rgb.b = mathMax(0, mathMin(255, rgb.b - mathRound(255 * - (amount / 100))));\n    return tinycolor(rgb);\n}\n\nfunction darken (color, amount) {\n    amount = (amount === 0) ? 0 : (amount || 10);\n    var hsl = tinycolor(color).toHsl();\n    hsl.l -= amount / 100;\n    hsl.l = clamp01(hsl.l);\n    return tinycolor(hsl);\n}\n\n// Spin takes a positive or negative amount within [-360, 360] indicating the change of hue.\n// Values outside of this range will be wrapped into this range.\nfunction spin(color, amount) {\n    var hsl = tinycolor(color).toHsl();\n    var hue = (hsl.h + amount) % 360;\n    hsl.h = hue < 0 ? 360 + hue : hue;\n    return tinycolor(hsl);\n}\n\n// Combination Functions\n// ---------------------\n// Thanks to jQuery xColor for some of the ideas behind these\n// <https://github.com/infusion/jQuery-xcolor/blob/master/jquery.xcolor.js>\n\nfunction complement(color) {\n    var hsl = tinycolor(color).toHsl();\n    hsl.h = (hsl.h + 180) % 360;\n    return tinycolor(hsl);\n}\n\nfunction triad(color) {\n    var hsl = tinycolor(color).toHsl();\n    var h = hsl.h;\n    return [\n        tinycolor(color),\n        tinycolor({ h: (h + 120) % 360, s: hsl.s, l: hsl.l }),\n        tinycolor({ h: (h + 240) % 360, s: hsl.s, l: hsl.l })\n    ];\n}\n\nfunction tetrad(color) {\n    var hsl = tinycolor(color).toHsl();\n    var h = hsl.h;\n    return [\n        tinycolor(color),\n        tinycolor({ h: (h + 90) % 360, s: hsl.s, l: hsl.l }),\n        tinycolor({ h: (h + 180) % 360, s: hsl.s, l: hsl.l }),\n        tinycolor({ h: (h + 270) % 360, s: hsl.s, l: hsl.l })\n    ];\n}\n\nfunction splitcomplement(color) {\n    var hsl = tinycolor(color).toHsl();\n    var h = hsl.h;\n    return [\n        tinycolor(color),\n        tinycolor({ h: (h + 72) % 360, s: hsl.s, l: hsl.l}),\n        tinycolor({ h: (h + 216) % 360, s: hsl.s, l: hsl.l})\n    ];\n}\n\nfunction analogous(color, results, slices) {\n    results = results || 6;\n    slices = slices || 30;\n\n    var hsl = tinycolor(color).toHsl();\n    var part = 360 / slices;\n    var ret = [tinycolor(color)];\n\n    for (hsl.h = ((hsl.h - (part * results >> 1)) + 720) % 360; --results; ) {\n        hsl.h = (hsl.h + part) % 360;\n        ret.push(tinycolor(hsl));\n    }\n    return ret;\n}\n\nfunction monochromatic(color, results) {\n    results = results || 6;\n    var hsv = tinycolor(color).toHsv();\n    var h = hsv.h, s = hsv.s, v = hsv.v;\n    var ret = [];\n    var modification = 1 / results;\n\n    while (results--) {\n        ret.push(tinycolor({ h: h, s: s, v: v}));\n        v = (v + modification) % 1;\n    }\n\n    return ret;\n}\n\n// Utility Functions\n// ---------------------\n\ntinycolor.mix = function(color1, color2, amount) {\n    amount = (amount === 0) ? 0 : (amount || 50);\n\n    var rgb1 = tinycolor(color1).toRgb();\n    var rgb2 = tinycolor(color2).toRgb();\n\n    var p = amount / 100;\n\n    var rgba = {\n        r: ((rgb2.r - rgb1.r) * p) + rgb1.r,\n        g: ((rgb2.g - rgb1.g) * p) + rgb1.g,\n        b: ((rgb2.b - rgb1.b) * p) + rgb1.b,\n        a: ((rgb2.a - rgb1.a) * p) + rgb1.a\n    };\n\n    return tinycolor(rgba);\n};\n\n\n// Readability Functions\n// ---------------------\n// <http://www.w3.org/TR/2008/REC-WCAG20-20081211/#contrast-ratiodef (WCAG Version 2)\n\n// `contrast`\n// Analyze the 2 colors and returns the color contrast defined by (WCAG Version 2)\ntinycolor.readability = function(color1, color2) {\n    var c1 = tinycolor(color1);\n    var c2 = tinycolor(color2);\n    return (Math.max(c1.getLuminance(),c2.getLuminance())+0.05) / (Math.min(c1.getLuminance(),c2.getLuminance())+0.05);\n};\n\n// `isReadable`\n// Ensure that foreground and background color combinations meet WCAG2 guidelines.\n// The third argument is an optional Object.\n//      the 'level' property states 'AA' or 'AAA' - if missing or invalid, it defaults to 'AA';\n//      the 'size' property states 'large' or 'small' - if missing or invalid, it defaults to 'small'.\n// If the entire object is absent, isReadable defaults to {level:\"AA\",size:\"small\"}.\n\n// *Example*\n//    tinycolor.isReadable(\"#000\", \"#111\") => false\n//    tinycolor.isReadable(\"#000\", \"#111\",{level:\"AA\",size:\"large\"}) => false\ntinycolor.isReadable = function(color1, color2, wcag2) {\n    var readability = tinycolor.readability(color1, color2);\n    var wcag2Parms, out;\n\n    out = false;\n\n    wcag2Parms = validateWCAG2Parms(wcag2);\n    switch (wcag2Parms.level + wcag2Parms.size) {\n        case \"AAsmall\":\n        case \"AAAlarge\":\n            out = readability >= 4.5;\n            break;\n        case \"AAlarge\":\n            out = readability >= 3;\n            break;\n        case \"AAAsmall\":\n            out = readability >= 7;\n            break;\n    }\n    return out;\n\n};\n\n// `mostReadable`\n// Given a base color and a list of possible foreground or background\n// colors for that base, returns the most readable color.\n// Optionally returns Black or White if the most readable color is unreadable.\n// *Example*\n//    tinycolor.mostReadable(tinycolor.mostReadable(\"#123\", [\"#124\", \"#125\"],{includeFallbackColors:false}).toHexString(); // \"#112255\"\n//    tinycolor.mostReadable(tinycolor.mostReadable(\"#123\", [\"#124\", \"#125\"],{includeFallbackColors:true}).toHexString();  // \"#ffffff\"\n//    tinycolor.mostReadable(\"#a8015a\", [\"#faf3f3\"],{includeFallbackColors:true,level:\"AAA\",size:\"large\"}).toHexString(); // \"#faf3f3\"\n//    tinycolor.mostReadable(\"#a8015a\", [\"#faf3f3\"],{includeFallbackColors:true,level:\"AAA\",size:\"small\"}).toHexString(); // \"#ffffff\"\ntinycolor.mostReadable = function(baseColor, colorList, args) {\n    var bestColor = null;\n    var bestScore = 0;\n    var readability;\n    var includeFallbackColors, level, size ;\n    args = args || {};\n    includeFallbackColors = args.includeFallbackColors ;\n    level = args.level;\n    size = args.size;\n\n    for (var i= 0; i < colorList.length ; i++) {\n        readability = tinycolor.readability(baseColor, colorList[i]);\n        if (readability > bestScore) {\n            bestScore = readability;\n            bestColor = tinycolor(colorList[i]);\n        }\n    }\n\n    if (tinycolor.isReadable(baseColor, bestColor, {\"level\":level,\"size\":size}) || !includeFallbackColors) {\n        return bestColor;\n    }\n    else {\n        args.includeFallbackColors=false;\n        return tinycolor.mostReadable(baseColor,[\"#fff\", \"#000\"],args);\n    }\n};\n\n\n// Big List of Colors\n// ------------------\n// <http://www.w3.org/TR/css3-color/#svg-color>\nvar names = tinycolor.names = {\n    aliceblue: \"f0f8ff\",\n    antiquewhite: \"faebd7\",\n    aqua: \"0ff\",\n    aquamarine: \"7fffd4\",\n    azure: \"f0ffff\",\n    beige: \"f5f5dc\",\n    bisque: \"ffe4c4\",\n    black: \"000\",\n    blanchedalmond: \"ffebcd\",\n    blue: \"00f\",\n    blueviolet: \"8a2be2\",\n    brown: \"a52a2a\",\n    burlywood: \"deb887\",\n    burntsienna: \"ea7e5d\",\n    cadetblue: \"5f9ea0\",\n    chartreuse: \"7fff00\",\n    chocolate: \"d2691e\",\n    coral: \"ff7f50\",\n    cornflowerblue: \"6495ed\",\n    cornsilk: \"fff8dc\",\n    crimson: \"dc143c\",\n    cyan: \"0ff\",\n    darkblue: \"00008b\",\n    darkcyan: \"008b8b\",\n    darkgoldenrod: \"b8860b\",\n    darkgray: \"a9a9a9\",\n    darkgreen: \"006400\",\n    darkgrey: \"a9a9a9\",\n    darkkhaki: \"bdb76b\",\n    darkmagenta: \"8b008b\",\n    darkolivegreen: \"556b2f\",\n    darkorange: \"ff8c00\",\n    darkorchid: \"9932cc\",\n    darkred: \"8b0000\",\n    darksalmon: \"e9967a\",\n    darkseagreen: \"8fbc8f\",\n    darkslateblue: \"483d8b\",\n    darkslategray: \"2f4f4f\",\n    darkslategrey: \"2f4f4f\",\n    darkturquoise: \"00ced1\",\n    darkviolet: \"9400d3\",\n    deeppink: \"ff1493\",\n    deepskyblue: \"00bfff\",\n    dimgray: \"696969\",\n    dimgrey: \"696969\",\n    dodgerblue: \"1e90ff\",\n    firebrick: \"b22222\",\n    floralwhite: \"fffaf0\",\n    forestgreen: \"228b22\",\n    fuchsia: \"f0f\",\n    gainsboro: \"dcdcdc\",\n    ghostwhite: \"f8f8ff\",\n    gold: \"ffd700\",\n    goldenrod: \"daa520\",\n    gray: \"808080\",\n    green: \"008000\",\n    greenyellow: \"adff2f\",\n    grey: \"808080\",\n    honeydew: \"f0fff0\",\n    hotpink: \"ff69b4\",\n    indianred: \"cd5c5c\",\n    indigo: \"4b0082\",\n    ivory: \"fffff0\",\n    khaki: \"f0e68c\",\n    lavender: \"e6e6fa\",\n    lavenderblush: \"fff0f5\",\n    lawngreen: \"7cfc00\",\n    lemonchiffon: \"fffacd\",\n    lightblue: \"add8e6\",\n    lightcoral: \"f08080\",\n    lightcyan: \"e0ffff\",\n    lightgoldenrodyellow: \"fafad2\",\n    lightgray: \"d3d3d3\",\n    lightgreen: \"90ee90\",\n    lightgrey: \"d3d3d3\",\n    lightpink: \"ffb6c1\",\n    lightsalmon: \"ffa07a\",\n    lightseagreen: \"20b2aa\",\n    lightskyblue: \"87cefa\",\n    lightslategray: \"789\",\n    lightslategrey: \"789\",\n    lightsteelblue: \"b0c4de\",\n    lightyellow: \"ffffe0\",\n    lime: \"0f0\",\n    limegreen: \"32cd32\",\n    linen: \"faf0e6\",\n    magenta: \"f0f\",\n    maroon: \"800000\",\n    mediumaquamarine: \"66cdaa\",\n    mediumblue: \"0000cd\",\n    mediumorchid: \"ba55d3\",\n    mediumpurple: \"9370db\",\n    mediumseagreen: \"3cb371\",\n    mediumslateblue: \"7b68ee\",\n    mediumspringgreen: \"00fa9a\",\n    mediumturquoise: \"48d1cc\",\n    mediumvioletred: \"c71585\",\n    midnightblue: \"191970\",\n    mintcream: \"f5fffa\",\n    mistyrose: \"ffe4e1\",\n    moccasin: \"ffe4b5\",\n    navajowhite: \"ffdead\",\n    navy: \"000080\",\n    oldlace: \"fdf5e6\",\n    olive: \"808000\",\n    olivedrab: \"6b8e23\",\n    orange: \"ffa500\",\n    orangered: \"ff4500\",\n    orchid: \"da70d6\",\n    palegoldenrod: \"eee8aa\",\n    palegreen: \"98fb98\",\n    paleturquoise: \"afeeee\",\n    palevioletred: \"db7093\",\n    papayawhip: \"ffefd5\",\n    peachpuff: \"ffdab9\",\n    peru: \"cd853f\",\n    pink: \"ffc0cb\",\n    plum: \"dda0dd\",\n    powderblue: \"b0e0e6\",\n    purple: \"800080\",\n    rebeccapurple: \"663399\",\n    red: \"f00\",\n    rosybrown: \"bc8f8f\",\n    royalblue: \"4169e1\",\n    saddlebrown: \"8b4513\",\n    salmon: \"fa8072\",\n    sandybrown: \"f4a460\",\n    seagreen: \"2e8b57\",\n    seashell: \"fff5ee\",\n    sienna: \"a0522d\",\n    silver: \"c0c0c0\",\n    skyblue: \"87ceeb\",\n    slateblue: \"6a5acd\",\n    slategray: \"708090\",\n    slategrey: \"708090\",\n    snow: \"fffafa\",\n    springgreen: \"00ff7f\",\n    steelblue: \"4682b4\",\n    tan: \"d2b48c\",\n    teal: \"008080\",\n    thistle: \"d8bfd8\",\n    tomato: \"ff6347\",\n    turquoise: \"40e0d0\",\n    violet: \"ee82ee\",\n    wheat: \"f5deb3\",\n    white: \"fff\",\n    whitesmoke: \"f5f5f5\",\n    yellow: \"ff0\",\n    yellowgreen: \"9acd32\"\n};\n\n// Make it easy to access colors via `hexNames[hex]`\nvar hexNames = tinycolor.hexNames = flip(names);\n\n\n// Utilities\n// ---------\n\n// `{ 'name1': 'val1' }` becomes `{ 'val1': 'name1' }`\nfunction flip(o) {\n    var flipped = { };\n    for (var i in o) {\n        if (o.hasOwnProperty(i)) {\n            flipped[o[i]] = i;\n        }\n    }\n    return flipped;\n}\n\n// Return a valid alpha value [0,1] with all invalid values being set to 1\nfunction boundAlpha(a) {\n    a = parseFloat(a);\n\n    if (isNaN(a) || a < 0 || a > 1) {\n        a = 1;\n    }\n\n    return a;\n}\n\n// Take input from [0, n] and return it as [0, 1]\nfunction bound01(n, max) {\n    if (isOnePointZero(n)) { n = \"100%\"; }\n\n    var processPercent = isPercentage(n);\n    n = mathMin(max, mathMax(0, parseFloat(n)));\n\n    // Automatically convert percentage into number\n    if (processPercent) {\n        n = parseInt(n * max, 10) / 100;\n    }\n\n    // Handle floating point rounding errors\n    if ((Math.abs(n - max) < 0.000001)) {\n        return 1;\n    }\n\n    // Convert into [0, 1] range if it isn't already\n    return (n % max) / parseFloat(max);\n}\n\n// Force a number between 0 and 1\nfunction clamp01(val) {\n    return mathMin(1, mathMax(0, val));\n}\n\n// Parse a base-16 hex value into a base-10 integer\nfunction parseIntFromHex(val) {\n    return parseInt(val, 16);\n}\n\n// Need to handle 1.0 as 100%, since once it is a number, there is no difference between it and 1\n// <http://stackoverflow.com/questions/7422072/javascript-how-to-detect-number-as-a-decimal-including-1-0>\nfunction isOnePointZero(n) {\n    return typeof n == \"string\" && n.indexOf('.') != -1 && parseFloat(n) === 1;\n}\n\n// Check to see if string passed in is a percentage\nfunction isPercentage(n) {\n    return typeof n === \"string\" && n.indexOf('%') != -1;\n}\n\n// Force a hex value to have 2 characters\nfunction pad2(c) {\n    return c.length == 1 ? '0' + c : '' + c;\n}\n\n// Replace a decimal with it's percentage value\nfunction convertToPercentage(n) {\n    if (n <= 1) {\n        n = (n * 100) + \"%\";\n    }\n\n    return n;\n}\n\n// Converts a decimal to a hex value\nfunction convertDecimalToHex(d) {\n    return Math.round(parseFloat(d) * 255).toString(16);\n}\n// Converts a hex value to a decimal\nfunction convertHexToDecimal(h) {\n    return (parseIntFromHex(h) / 255);\n}\n\nvar matchers = (function() {\n\n    // <http://www.w3.org/TR/css3-values/#integers>\n    var CSS_INTEGER = \"[-\\\\+]?\\\\d+%?\";\n\n    // <http://www.w3.org/TR/css3-values/#number-value>\n    var CSS_NUMBER = \"[-\\\\+]?\\\\d*\\\\.\\\\d+%?\";\n\n    // Allow positive/negative integer/number.  Don't capture the either/or, just the entire outcome.\n    var CSS_UNIT = \"(?:\" + CSS_NUMBER + \")|(?:\" + CSS_INTEGER + \")\";\n\n    // Actual matching.\n    // Parentheses and commas are optional, but not required.\n    // Whitespace can take the place of commas or opening paren\n    var PERMISSIVE_MATCH3 = \"[\\\\s|\\\\(]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")\\\\s*\\\\)?\";\n    var PERMISSIVE_MATCH4 = \"[\\\\s|\\\\(]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")\\\\s*\\\\)?\";\n\n    return {\n        CSS_UNIT: new RegExp(CSS_UNIT),\n        rgb: new RegExp(\"rgb\" + PERMISSIVE_MATCH3),\n        rgba: new RegExp(\"rgba\" + PERMISSIVE_MATCH4),\n        hsl: new RegExp(\"hsl\" + PERMISSIVE_MATCH3),\n        hsla: new RegExp(\"hsla\" + PERMISSIVE_MATCH4),\n        hsv: new RegExp(\"hsv\" + PERMISSIVE_MATCH3),\n        hsva: new RegExp(\"hsva\" + PERMISSIVE_MATCH4),\n        hex3: /^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,\n        hex6: /^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,\n        hex4: /^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,\n        hex8: /^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/\n    };\n})();\n\n// `isValidCSSUnit`\n// Take in a single string / number and check to see if it looks like a CSS unit\n// (see `matchers` above for definition).\nfunction isValidCSSUnit(color) {\n    return !!matchers.CSS_UNIT.exec(color);\n}\n\n// `stringInputToObject`\n// Permissive string parsing.  Take in a number of formats, and output an object\n// based on detected format.  Returns `{ r, g, b }` or `{ h, s, l }` or `{ h, s, v}`\nfunction stringInputToObject(color) {\n\n    color = color.replace(trimLeft,'').replace(trimRight, '').toLowerCase();\n    var named = false;\n    if (names[color]) {\n        color = names[color];\n        named = true;\n    }\n    else if (color == 'transparent') {\n        return { r: 0, g: 0, b: 0, a: 0, format: \"name\" };\n    }\n\n    // Try to match string input using regular expressions.\n    // Keep most of the number bounding out of this function - don't worry about [0,1] or [0,100] or [0,360]\n    // Just return an object and let the conversion functions handle that.\n    // This way the result will be the same whether the tinycolor is initialized with string or object.\n    var match;\n    if ((match = matchers.rgb.exec(color))) {\n        return { r: match[1], g: match[2], b: match[3] };\n    }\n    if ((match = matchers.rgba.exec(color))) {\n        return { r: match[1], g: match[2], b: match[3], a: match[4] };\n    }\n    if ((match = matchers.hsl.exec(color))) {\n        return { h: match[1], s: match[2], l: match[3] };\n    }\n    if ((match = matchers.hsla.exec(color))) {\n        return { h: match[1], s: match[2], l: match[3], a: match[4] };\n    }\n    if ((match = matchers.hsv.exec(color))) {\n        return { h: match[1], s: match[2], v: match[3] };\n    }\n    if ((match = matchers.hsva.exec(color))) {\n        return { h: match[1], s: match[2], v: match[3], a: match[4] };\n    }\n    if ((match = matchers.hex8.exec(color))) {\n        return {\n            r: parseIntFromHex(match[1]),\n            g: parseIntFromHex(match[2]),\n            b: parseIntFromHex(match[3]),\n            a: convertHexToDecimal(match[4]),\n            format: named ? \"name\" : \"hex8\"\n        };\n    }\n    if ((match = matchers.hex6.exec(color))) {\n        return {\n            r: parseIntFromHex(match[1]),\n            g: parseIntFromHex(match[2]),\n            b: parseIntFromHex(match[3]),\n            format: named ? \"name\" : \"hex\"\n        };\n    }\n    if ((match = matchers.hex4.exec(color))) {\n        return {\n            r: parseIntFromHex(match[1] + '' + match[1]),\n            g: parseIntFromHex(match[2] + '' + match[2]),\n            b: parseIntFromHex(match[3] + '' + match[3]),\n            a: convertHexToDecimal(match[4] + '' + match[4]),\n            format: named ? \"name\" : \"hex8\"\n        };\n    }\n    if ((match = matchers.hex3.exec(color))) {\n        return {\n            r: parseIntFromHex(match[1] + '' + match[1]),\n            g: parseIntFromHex(match[2] + '' + match[2]),\n            b: parseIntFromHex(match[3] + '' + match[3]),\n            format: named ? \"name\" : \"hex\"\n        };\n    }\n\n    return false;\n}\n\nfunction validateWCAG2Parms(parms) {\n    // return valid WCAG2 parms for isReadable.\n    // If input parms are invalid, return {\"level\":\"AA\", \"size\":\"small\"}\n    var level, size;\n    parms = parms || {\"level\":\"AA\", \"size\":\"small\"};\n    level = (parms.level || \"AA\").toUpperCase();\n    size = (parms.size || \"small\").toLowerCase();\n    if (level !== \"AA\" && level !== \"AAA\") {\n        level = \"AA\";\n    }\n    if (size !== \"small\" && size !== \"large\") {\n        size = \"small\";\n    }\n    return {\"level\":level, \"size\":size};\n}\n\n// Node: Export function\nif (typeof module !== \"undefined\" && module.exports) {\n    module.exports = tinycolor;\n}\n// AMD/requirejs: Define the module\nelse if (typeof define === 'function' && define.amd) {\n    define(function () {return tinycolor;});\n}\n// Browser: Expose to window\nelse {\n    window.tinycolor = tinycolor;\n}\n\n})(Math);\n","'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Color = require('tinycolor2');\nvar Counter = require('yy-counter');\n\nvar STYLES = {\n    'background': 'rgba(0, 0, 0, 0.5)',\n    'color': 'white'\n};\n\nvar STYLES_FPS = {\n    'padding': '0.1em 0.5em'\n};\n\nvar STYLES_METER = {};\n\nmodule.exports = function () {\n    /**\r\n     * @param {object} [options]\r\n     * @param {boolean} [options.meter=true] include a meter with the FPS\r\n     * @param {string} [options.side=bottom-right] include any combination of left/right and top/bottom\r\n     * @param {number} [options.FPS=60] desired FPS\r\n     * @param {number} [options.tolerance=1] minimum tolerance for fluctuations in FPS number\r\n     * @param {number} [options.meterWidth=100] width of meter div\r\n     * @param {number} [options.meterHeight=25] height of meter div\r\n     * @param {number} [options.meterLineHeight=4] height of meter line\r\n     * @param {styles[]} [options.styles] CSS styles to apply to the div (in javascript format)\r\n     * @param {styles[]} [options.stylesFPS] CSS styles to apply to the FPS text (in javascript format)\r\n     * @param {styles[]} [options.stylesMeter] CSS styles to apply to the FPS meter (in javascript format)\r\n     * @param {string} [options.text=\" FPS\"] change the text to the right of the FPS\r\n     */\n    function FPS(options) {\n        _classCallCheck(this, FPS);\n\n        this.options = options || {};\n        this.tolerance = this.options.tolerance || 1;\n        this.FPS = this.options.FPS || 60;\n        this.meterWidth = this.options.meterWidth || 100;\n        this.meterHeight = this.options.meterHeight || 25;\n        this.meterLineHeight = this.options.meterLineHeight || 4;\n        this.div = document.createElement('div');\n        Counter.findParent(this.options.side || 'bottom-right').appendChild(this.div);\n        this.style(this.div, STYLES, this.options.styles);\n        this.divFPS();\n        this.meter = typeof this.options.meter === 'undefined' || this.options.meter;\n        this.lastTime = 0;\n        this.frameNumber = 0;\n        this.lastUpdate = 0;\n        this.lastFPS = '--';\n    }\n\n    /**\r\n     * change desired FPS\r\n     * @type {number}\r\n     */\n\n\n    _createClass(FPS, [{\n        key: 'remove',\n\n\n        /**\r\n         * remove meter from DOM\r\n         */\n        value: function remove() {\n            this.div.remove();\n        }\n\n        /**\r\n         * @type {boolean} meter (the FPS graph) is on or off\r\n         */\n\n    }, {\n        key: 'style',\n        value: function style(div, style1, style2) {\n            for (var style in style1) {\n                div.style[style] = style1[style];\n            }\n            if (style2) {\n                for (var _style in style2) {\n                    div.style[_style] = style2[_style];\n                }\n            }\n        }\n\n        /**\r\n         * create div for text FPS\r\n         * @private\r\n         * @param {HTMLElement} div\r\n         * @param {object} options (see contructor)\r\n         */\n\n    }, {\n        key: 'divFPS',\n        value: function divFPS() {\n            var div = this.div;\n            var options = this.options;\n            var divFPS = document.createElement('div');\n            div.appendChild(divFPS);\n            this.fpsSpan = document.createElement('span');\n            divFPS.appendChild(this.fpsSpan);\n            var span = document.createElement('span');\n            divFPS.appendChild(span);\n            span.innerText = typeof options.text !== 'undefined' ? options.text : ' FPS';\n            this.style(div, STYLES_FPS, options.stylesFPS);\n        }\n\n        /**\r\n         * create div for FPS meter\r\n         * @private\r\n         * @param {HTMLElement} div\r\n         * @param {object} options (see contructor)\r\n         */\n\n    }, {\n        key: 'divMeter',\n        value: function divMeter() {\n            var div = this.div;\n            var options = this.options;\n            if (!this.meterCanvas) {\n                this.meterCanvas = document.createElement('canvas');\n                div.appendChild(this.meterCanvas);\n                this.meterCanvas.width = this.meterWidth;\n                this.meterCanvas.height = this.meterHeight;\n                this.meterCanvas.style.width = div.width + 'px';\n                this.meterCanvas.style.height = div.height + 'px';\n                this.style(this.meterCanvas, STYLES_METER, options.stylesMeter);\n            } else {\n                this.meterCanvas.style.display = 'block';\n            }\n        }\n\n        /**\r\n         * call this at the start of the frame to calculate FPS\r\n         */\n\n    }, {\n        key: 'frame',\n        value: function frame() {\n            this.frameNumber++;\n            var currentTime = performance.now() - this.lastTime;\n\n            // skip large differences to remove garbage\n            if (currentTime > 500) {\n                if (this.lastTime !== 0) {\n                    this.lastFPS = Math.floor(this.frameNumber / (currentTime / 1000));\n                    if (this.lastFPS >= this.FPS - this.tolerance && this.lastFPS <= this.FPS + this.tolerance) {\n                        this.lastFPS = this.FPS;\n                    }\n                }\n                this.lastTime = performance.now();\n                this.frameNumber = 0;\n            }\n            this.fpsSpan.innerText = this.lastFPS;\n            if (this.meterCanvas && this.lastFPS !== '--') {\n                this.meterUpdate(this.lastFPS / this.FPS);\n            }\n        }\n    }, {\n        key: 'meterUpdate',\n        value: function meterUpdate(percent) {\n            var c = this.meterCanvas.getContext('2d');\n            var data = c.getImageData(0, 0, this.meterCanvas.width, this.meterCanvas.height);\n            c.putImageData(data, -1, 0);\n            c.clearRect(this.meterCanvas.width - 1, 0, 1, this.meterCanvas.height);\n            if (percent < 0.5) {\n                c.fillStyle = Color.mix('#ff0000', '0xffa500', percent * 200).toHexString();\n            } else {\n                c.fillStyle = Color.mix('#ffa500', '#00ff00', (percent - 0.5) * 200).toHexString();\n            }\n            var height = (this.meterCanvas.height - this.meterLineHeight) * (1 - percent);\n            c.fillRect(this.meterCanvas.width - 1, height, 1, this.meterLineHeight);\n        }\n    }, {\n        key: 'side',\n        value: function side(options) {\n            if (options.side) {\n                options.side = options.side.toLowerCase();\n                if (options.side.indexOf('left') !== -1) {\n                    STYLES['left'] = 0;\n                    delete STYLES['right'];\n                } else {\n                    STYLES['right'] = 0;\n                    delete STYLES['left'];\n                }\n                if (options.side.indexOf('top') !== -1) {\n                    STYLES['top'] = 0;\n                    delete STYLES['bottom'];\n                } else {\n                    STYLES['bottom'] = 0;\n                    delete STYLES['top'];\n                }\n            } else {\n                STYLES['right'] = 0;\n                STYLES['bottom'] = 0;\n            }\n        }\n    }, {\n        key: 'fps',\n        get: function get() {\n            return this.FPS;\n        },\n        set: function set(value) {\n            this.FPS = value;\n        }\n    }, {\n        key: 'meter',\n        get: function get() {\n            return this._meter;\n        },\n        set: function set(value) {\n            if (value) {\n                this.divMeter();\n            } else if (this.meterCanvas) {\n                this.meterCanvas.style.display = 'none';\n            }\n        }\n    }]);\n\n    return FPS;\n}();\n\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SCxTQTlETDtBQUFBLDBCQStEYyxLQS9EZCxFQWdFSTtBQUNJLGdCQUFJLEtBQUosRUFDQTtBQUNJLHFCQUFLLFFBQUw7QUFDSCxhQUhELE1BSUssSUFBSSxLQUFLLFdBQVQsRUFDTDtBQUNJLHFCQUFLLFdBQUwsQ0FBaUIsS0FBakIsQ0FBdUIsT0FBdkIsR0FBaUMsTUFBakM7QUFDSDtBQUNKO0FBekVMOztBQUFBO0FBQUEiLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBDb2xvciA9IHJlcXVpcmUoJ3Rpbnljb2xvcjInKVxyXG5jb25zdCBDb3VudGVyID0gcmVxdWlyZSgneXktY291bnRlcicpXHJcblxyXG5jb25zdCBTVFlMRVMgPSB7XHJcbiAgICAnYmFja2dyb3VuZCc6ICdyZ2JhKDAsIDAsIDAsIDAuNSknLFxyXG4gICAgJ2NvbG9yJzogJ3doaXRlJyxcclxufVxyXG5cclxuY29uc3QgU1RZTEVTX0ZQUyA9IHtcclxuICAgICdwYWRkaW5nJzogJzAuMWVtIDAuNWVtJ1xyXG59XHJcblxyXG5jb25zdCBTVFlMRVNfTUVURVIgPSB7XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gY2xhc3MgRlBTXHJcbntcclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHtvYmplY3R9IFtvcHRpb25zXVxyXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5tZXRlcj10cnVlXSBpbmNsdWRlIGEgbWV0ZXIgd2l0aCB0aGUgRlBTXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMuc2lkZT1ib3R0b20tcmlnaHRdIGluY2x1ZGUgYW55IGNvbWJpbmF0aW9uIG9mIGxlZnQvcmlnaHQgYW5kIHRvcC9ib3R0b21cclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5GUFM9NjBdIGRlc2lyZWQgRlBTXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMudG9sZXJhbmNlPTFdIG1pbmltdW0gdG9sZXJhbmNlIGZvciBmbHVjdHVhdGlvbnMgaW4gRlBTIG51bWJlclxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLm1ldGVyV2lkdGg9MTAwXSB3aWR0aCBvZiBtZXRlciBkaXZcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5tZXRlckhlaWdodD0yNV0gaGVpZ2h0IG9mIG1ldGVyIGRpdlxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLm1ldGVyTGluZUhlaWdodD00XSBoZWlnaHQgb2YgbWV0ZXIgbGluZVxyXG4gICAgICogQHBhcmFtIHtzdHlsZXNbXX0gW29wdGlvbnMuc3R5bGVzXSBDU1Mgc3R5bGVzIHRvIGFwcGx5IHRvIHRoZSBkaXYgKGluIGphdmFzY3JpcHQgZm9ybWF0KVxyXG4gICAgICogQHBhcmFtIHtzdHlsZXNbXX0gW29wdGlvbnMuc3R5bGVzRlBTXSBDU1Mgc3R5bGVzIHRvIGFwcGx5IHRvIHRoZSBGUFMgdGV4dCAoaW4gamF2YXNjcmlwdCBmb3JtYXQpXHJcbiAgICAgKiBAcGFyYW0ge3N0eWxlc1tdfSBbb3B0aW9ucy5zdHlsZXNNZXRlcl0gQ1NTIHN0eWxlcyB0byBhcHBseSB0byB0aGUgRlBTIG1ldGVyIChpbiBqYXZhc2NyaXB0IGZvcm1hdClcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy50ZXh0PVwiIEZQU1wiXSBjaGFuZ2UgdGhlIHRleHQgdG8gdGhlIHJpZ2h0IG9mIHRoZSBGUFNcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3Iob3B0aW9ucylcclxuICAgIHtcclxuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zIHx8IHt9XHJcbiAgICAgICAgdGhpcy50b2xlcmFuY2UgPSB0aGlzLm9wdGlvbnMudG9sZXJhbmNlIHx8IDFcclxuICAgICAgICB0aGlzLkZQUyA9IHRoaXMub3B0aW9ucy5GUFMgfHwgNjBcclxuICAgICAgICB0aGlzLm1ldGVyV2lkdGggPSB0aGlzLm9wdGlvbnMubWV0ZXJXaWR0aCB8fCAxMDBcclxuICAgICAgICB0aGlzLm1ldGVySGVpZ2h0ID0gdGhpcy5vcHRpb25zLm1ldGVySGVpZ2h0IHx8IDI1XHJcbiAgICAgICAgdGhpcy5tZXRlckxpbmVIZWlnaHQgPSB0aGlzLm9wdGlvbnMubWV0ZXJMaW5lSGVpZ2h0IHx8IDRcclxuICAgICAgICB0aGlzLmRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXHJcbiAgICAgICAgQ291bnRlci5maW5kUGFyZW50KHRoaXMub3B0aW9ucy5zaWRlIHx8ICdib3R0b20tcmlnaHQnKS5hcHBlbmRDaGlsZCh0aGlzLmRpdilcclxuICAgICAgICB0aGlzLnN0eWxlKHRoaXMuZGl2LCBTVFlMRVMsIHRoaXMub3B0aW9ucy5zdHlsZXMpXHJcbiAgICAgICAgdGhpcy5kaXZGUFMoKVxyXG4gICAgICAgIHRoaXMubWV0ZXIgPSB0eXBlb2YgdGhpcy5vcHRpb25zLm1ldGVyID09PSAndW5kZWZpbmVkJyB8fCB0aGlzLm9wdGlvbnMubWV0ZXJcclxuICAgICAgICB0aGlzLmxhc3RUaW1lID0gMFxyXG4gICAgICAgIHRoaXMuZnJhbWVOdW1iZXIgPSAwXHJcbiAgICAgICAgdGhpcy5sYXN0VXBkYXRlID0gMFxyXG4gICAgICAgIHRoaXMubGFzdEZQUyA9ICctLSdcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIGNoYW5nZSBkZXNpcmVkIEZQU1xyXG4gICAgICogQHR5cGUge251bWJlcn1cclxuICAgICAqL1xyXG4gICAgZ2V0IGZwcygpXHJcbiAgICB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuRlBTXHJcbiAgICB9XHJcbiAgICBzZXQgZnBzKHZhbHVlKVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMuRlBTID0gdmFsdWVcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIHJlbW92ZSBtZXRlciBmcm9tIERPTVxyXG4gICAgICovXHJcbiAgICByZW1vdmUoKVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMuZGl2LnJlbW92ZSgpXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn0gbWV0ZXIgKHRoZSBGUFMgZ3JhcGgpIGlzIG9uIG9yIG9mZlxyXG4gICAgICovXHJcbiAgICBnZXQgbWV0ZXIoKVxyXG4gICAge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9tZXRlclxyXG4gICAgfVxyXG4gICAgc2V0IG1ldGVyKHZhbHVlKVxyXG4gICAge1xyXG4gICAgICAgIGlmICh2YWx1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuZGl2TWV0ZXIoKVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0aGlzLm1ldGVyQ2FudmFzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5tZXRlckNhbnZhcy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHN0eWxlKGRpdiwgc3R5bGUxLCBzdHlsZTIpXHJcbiAgICB7XHJcbiAgICAgICAgZm9yIChsZXQgc3R5bGUgaW4gc3R5bGUxKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZGl2LnN0eWxlW3N0eWxlXSA9IHN0eWxlMVtzdHlsZV1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHN0eWxlMilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IHN0eWxlIGluIHN0eWxlMilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZGl2LnN0eWxlW3N0eWxlXSA9IHN0eWxlMltzdHlsZV1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIGNyZWF0ZSBkaXYgZm9yIHRleHQgRlBTXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZGl2XHJcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gb3B0aW9ucyAoc2VlIGNvbnRydWN0b3IpXHJcbiAgICAgKi9cclxuICAgIGRpdkZQUygpXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3QgZGl2ID0gdGhpcy5kaXZcclxuICAgICAgICBjb25zdCBvcHRpb25zID0gdGhpcy5vcHRpb25zXHJcbiAgICAgICAgY29uc3QgZGl2RlBTID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcclxuICAgICAgICBkaXYuYXBwZW5kQ2hpbGQoZGl2RlBTKVxyXG4gICAgICAgIHRoaXMuZnBzU3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKVxyXG4gICAgICAgIGRpdkZQUy5hcHBlbmRDaGlsZCh0aGlzLmZwc1NwYW4pXHJcbiAgICAgICAgY29uc3Qgc3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKVxyXG4gICAgICAgIGRpdkZQUy5hcHBlbmRDaGlsZChzcGFuKVxyXG4gICAgICAgIHNwYW4uaW5uZXJUZXh0ID0gdHlwZW9mIG9wdGlvbnMudGV4dCAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLnRleHQgOiAnIEZQUydcclxuICAgICAgICB0aGlzLnN0eWxlKGRpdiwgU1RZTEVTX0ZQUywgb3B0aW9ucy5zdHlsZXNGUFMpXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBjcmVhdGUgZGl2IGZvciBGUFMgbWV0ZXJcclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBkaXZcclxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zIChzZWUgY29udHJ1Y3RvcilcclxuICAgICAqL1xyXG4gICAgZGl2TWV0ZXIoKVxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IGRpdiA9IHRoaXMuZGl2XHJcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHRoaXMub3B0aW9uc1xyXG4gICAgICAgIGlmICghdGhpcy5tZXRlckNhbnZhcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMubWV0ZXJDYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKVxyXG4gICAgICAgICAgICBkaXYuYXBwZW5kQ2hpbGQodGhpcy5tZXRlckNhbnZhcylcclxuICAgICAgICAgICAgdGhpcy5tZXRlckNhbnZhcy53aWR0aCA9IHRoaXMubWV0ZXJXaWR0aFxyXG4gICAgICAgICAgICB0aGlzLm1ldGVyQ2FudmFzLmhlaWdodCA9IHRoaXMubWV0ZXJIZWlnaHRcclxuICAgICAgICAgICAgdGhpcy5tZXRlckNhbnZhcy5zdHlsZS53aWR0aCA9IGRpdi53aWR0aCArICdweCdcclxuICAgICAgICAgICAgdGhpcy5tZXRlckNhbnZhcy5zdHlsZS5oZWlnaHQgPSBkaXYuaGVpZ2h0ICsgJ3B4J1xyXG4gICAgICAgICAgICB0aGlzLnN0eWxlKHRoaXMubWV0ZXJDYW52YXMsIFNUWUxFU19NRVRFUiwgb3B0aW9ucy5zdHlsZXNNZXRlcilcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5tZXRlckNhbnZhcy5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJ1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIGNhbGwgdGhpcyBhdCB0aGUgc3RhcnQgb2YgdGhlIGZyYW1lIHRvIGNhbGN1bGF0ZSBGUFNcclxuICAgICAqL1xyXG4gICAgZnJhbWUoKVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMuZnJhbWVOdW1iZXIrK1xyXG4gICAgICAgIGNvbnN0IGN1cnJlbnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCkgLSB0aGlzLmxhc3RUaW1lXHJcblxyXG4gICAgICAgIC8vIHNraXAgbGFyZ2UgZGlmZmVyZW5jZXMgdG8gcmVtb3ZlIGdhcmJhZ2VcclxuICAgICAgICBpZiAoY3VycmVudFRpbWUgPiA1MDApXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5sYXN0VGltZSAhPT0gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5sYXN0RlBTID0gTWF0aC5mbG9vcih0aGlzLmZyYW1lTnVtYmVyIC8gKGN1cnJlbnRUaW1lIC8gMTAwMCkpXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5sYXN0RlBTID49IHRoaXMuRlBTIC0gdGhpcy50b2xlcmFuY2UgJiYgdGhpcy5sYXN0RlBTIDw9IHRoaXMuRlBTICsgdGhpcy50b2xlcmFuY2UpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sYXN0RlBTID0gdGhpcy5GUFNcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmxhc3RUaW1lID0gcGVyZm9ybWFuY2Uubm93KClcclxuICAgICAgICAgICAgdGhpcy5mcmFtZU51bWJlciA9IDBcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5mcHNTcGFuLmlubmVyVGV4dCA9IHRoaXMubGFzdEZQU1xyXG4gICAgICAgIGlmICh0aGlzLm1ldGVyQ2FudmFzICYmIHRoaXMubGFzdEZQUyAhPT0gJy0tJylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMubWV0ZXJVcGRhdGUodGhpcy5sYXN0RlBTIC8gdGhpcy5GUFMpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG1ldGVyVXBkYXRlKHBlcmNlbnQpXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3QgYyA9IHRoaXMubWV0ZXJDYW52YXMuZ2V0Q29udGV4dCgnMmQnKVxyXG4gICAgICAgIGNvbnN0IGRhdGEgPSBjLmdldEltYWdlRGF0YSgwLCAwLCB0aGlzLm1ldGVyQ2FudmFzLndpZHRoLCB0aGlzLm1ldGVyQ2FudmFzLmhlaWdodClcclxuICAgICAgICBjLnB1dEltYWdlRGF0YShkYXRhLCAtMSwgMClcclxuICAgICAgICBjLmNsZWFyUmVjdCh0aGlzLm1ldGVyQ2FudmFzLndpZHRoIC0gMSwgMCwgMSwgdGhpcy5tZXRlckNhbnZhcy5oZWlnaHQpXHJcbiAgICAgICAgaWYgKHBlcmNlbnQgPCAwLjUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjLmZpbGxTdHlsZSA9IENvbG9yLm1peCgnI2ZmMDAwMCcsICcweGZmYTUwMCcsIHBlcmNlbnQgKiAyMDApLnRvSGV4U3RyaW5nKClcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYy5maWxsU3R5bGUgPSBDb2xvci5taXgoJyNmZmE1MDAnLCAnIzAwZmYwMCcsIChwZXJjZW50IC0gMC41KSAqIDIwMCkudG9IZXhTdHJpbmcoKVxyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBoZWlnaHQgPSAodGhpcy5tZXRlckNhbnZhcy5oZWlnaHQgLSB0aGlzLm1ldGVyTGluZUhlaWdodCkgKiAoMSAtIHBlcmNlbnQpXHJcbiAgICAgICAgYy5maWxsUmVjdCh0aGlzLm1ldGVyQ2FudmFzLndpZHRoIC0gMSwgaGVpZ2h0LCAxLCB0aGlzLm1ldGVyTGluZUhlaWdodClcclxuICAgIH1cclxuXHJcbiAgICBzaWRlKG9wdGlvbnMpXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKG9wdGlvbnMuc2lkZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG9wdGlvbnMuc2lkZSA9IG9wdGlvbnMuc2lkZS50b0xvd2VyQ2FzZSgpXHJcbiAgICAgICAgICAgIGlmIChvcHRpb25zLnNpZGUuaW5kZXhPZignbGVmdCcpICE9PSAtMSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgU1RZTEVTWydsZWZ0J10gPSAwXHJcbiAgICAgICAgICAgICAgICBkZWxldGUgU1RZTEVTWydyaWdodCddXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBTVFlMRVNbJ3JpZ2h0J10gPSAwXHJcbiAgICAgICAgICAgICAgICBkZWxldGUgU1RZTEVTWydsZWZ0J11cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5zaWRlLmluZGV4T2YoJ3RvcCcpICE9PSAtMSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgU1RZTEVTWyd0b3AnXSA9IDBcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSBTVFlMRVNbJ2JvdHRvbSddXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBTVFlMRVNbJ2JvdHRvbSddID0gMFxyXG4gICAgICAgICAgICAgICAgZGVsZXRlIFNUWUxFU1sndG9wJ11cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBTVFlMRVNbJ3JpZ2h0J10gPSAwXHJcbiAgICAgICAgICAgIFNUWUxFU1snYm90dG9tJ10gPSAwXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59Il19","// yy-counter\n// In-browser counter to watch changeable values like counters or FPS\n// David Figatner\n// (c) YOPEY YOPEY LLC 2017\n// MIT License\n// https://github.com/davidfig/counter\n\nmodule.exports = class Counter\n{\n    /**\n     * @param {object} [options]\n     * @param {string} [options.side=rightbottom] side to place the panel (combination of right/left and bottom/top)\n     * @param {number} [options.padding=7px]\n     * @param {string} [options.color=white]\n     * @param {string} [options.background=rgba(0,0,0,0.5)]\n     * @param {*} {options.xxx} where xxx is a CSS style for the div\n     */\n    constructor(options)\n    {\n        options = options || {}\n        options.side = options.side || 'rightbottom'\n        options.side.toLowerCase()\n        options.padding = options.padding || '7px'\n        options.color = options.color || 'white'\n        options.background = options.background || 'rgba(0,0,0,0.5)'\n        this.div = document.createElement('div')\n        Counter.findParent(options.side).appendChild(this.div)\n        for (let style in options)\n        {\n            if (style !== 'parent' && style !== 'side')\n            {\n                this.div.style[style] = options[style]\n            }\n        }\n    }\n\n    /**\n     * find the parent div for one of the corners\n     * @param {string} [options.side] side to place the panel (combination of right/left and bottom/top)\n     * @return {HTMLElement}\n     */\n    static findParent(side)\n    {\n        const styles = []\n        let name = 'yy-counter-'\n        if (side.indexOf('left') !== -1)\n        {\n            name += 'left-'\n            styles['left'] = 0\n        }\n        else\n        {\n            name += 'right-'\n            styles['right'] = 0\n        }\n        if (side.indexOf('top') !== -1)\n        {\n            name += 'top'\n            styles['top'] = 0\n        }\n        else\n        {\n            name += 'bottom'\n            styles['bottom'] = 0\n        }\n        const test = document.getElementById(name)\n        if (test)\n        {\n            return test\n        }\n        const container = document.createElement('div')\n        container.id = name\n        container.style.overflow = 'hidden'\n        container.style.position = 'fixed'\n        container.style.zIndex = 10000\n        container.style.pointerEvents = 'none'\n        container.style.userSelect = 'none'\n        for (let style in styles)\n        {\n            container.style[style] = styles[style]\n        }\n        document.body.appendChild(container)\n        return container\n    }\n\n    /**\n     * replaces the innerHTML of the console\n     * @param {string|number} text1\n     * @param {string|number} [text2]\n     * @param {string|number} [...textn] any number of arguments\n     */\n    log()\n    {\n        let s = ''\n        for (let arg of arguments)\n        {\n            s += '<div>' + arg + '</div>'\n        }\n        this.div.innerHTML =  s\n    }\n\n    /**\n     * appends to the innerHTML of the console\n     * @param {string|number} text1\n     * @param {string|number} [text2]\n     * @param {string|number} [...textn] any number of arguments\n     */\n    append()\n    {\n        let s = this.div.innerHTML\n        for (let arg of arguments)\n        {\n            s += '<div>' + arg + '</div>'\n        }\n        this.div.innerHTML = s\n    }\n}","/**\r\n * shortcut to create an html element\r\n * @param {object} options\r\n * @param {type} [options.string=div]\r\n * @param {string} [options.className]\r\n * @param {object} [options.styles]\r\n * @param {HTMLElement} [options.parent]\r\n * @param {string} [options.html]\r\n * @returns {HTMLElement}\r\n */\r\nexport function html(options={})\r\n{\r\n    const object = document.createElement(options.type || 'div')\r\n    if (options.parent)\r\n    {\r\n        options.parent.appendChild(object)\r\n    }\r\n    if (options.styles)\r\n    {\r\n        Object.assign(object.style, options.styles)\r\n    }\r\n    if (options.className)\r\n    {\r\n        object.className = options.className\r\n    }\r\n    if (options.html)\r\n    {\r\n        object.innerHTML = options.html\r\n    }\r\n    return object\r\n}","'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n\n  var listener = new EE(fn, context || emitter, once)\n    , evt = prefix ? prefix + event : event;\n\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n  else emitter._events[evt] = [emitter._events[evt], listener];\n\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();\n  else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event\n    , handlers = this._events[evt];\n\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event\n    , listeners = this._events[evt];\n\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n      listeners.fn === fn &&\n      (!once || listeners.once) &&\n      (!context || listeners.context === context)\n    ) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n        listeners[i].fn !== fn ||\n        (once && !listeners[i].once) ||\n        (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else clearEvent(this, evt);\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n","/**\n * Watcher for click, double-click, or long-click event for both mouse and touch\n * @example\n * import { clicked } from 'clicked'\n *\n * function handleClick()\n * {\n *    console.log('I was clicked.')\n * }\n *\n * const div = document.getElementById('clickme')\n * const c = clicked(div, handleClick, { threshold: 15 })\n *\n * // change callback\n * c.callback = () => console.log('different clicker')\n *\n * // destroy\n * c.destroy()\n *\n * // using built-in querySelector\n * clicked('#clickme', handleClick2)\n *\n * // watching for all types of clicks\n * function handleAllClicks(e) {\n *     switch (e.type)\n *     {\n *         case 'clicked': ...\n *         case 'double-clicked': ...\n *         case 'long-clicked': ...\n *     }\n *\n *     // view UIEvent that caused callback\n *     console.log(e.event)\n * }\n * clicked('#clickme', handleAllClicks, { doubleClicked: true, longClicked: true })\n */\n\n/** @type {object} */\nconst defaultOptions = {\n    threshold: 10,\n    clicked: true,\n    doubleClicked: false,\n    doubleClickedTime: 300,\n    longClicked: false,\n    longClickedTime: 500,\n    capture: false,\n    clickDown: false\n}\n\n/**\n * @param {HTMLElement|string} element or querySelector entry (e.g., #id-name or .class-name)\n * @param {ClickedCallback} callback called after a click, double click, or long click is registered\n * @param {object} [options]\n * @param {number} [options.threshold=10] if touch moves threshhold-pixels then the touch-click is cancelled\n * @param {boolean} [options.clicked=true] disable watcher for default clicked event\n * @param {boolean} [options.doubleClicked] enable watcher for double click\n * @param {number} [options.doubleClickedTime=500] wait time in millseconds for double click\n * @param {boolean} [options.longClicked] enable watcher for long click\n * @param {number} [options.longClickedTime=500] wait time for long click\n * @param {boolean} [options.clickDown] enable watcher for click start\n * @param {boolean} [options.capture]  events will be dispatched to this registered listener before being dispatched to any EventTarget beneath it in the DOM tree\n * @returns {Clicked}\n */\nexport function clicked(element, callback, options)\n{\n    return new Clicked(element, callback, options)\n}\n\nclass Clicked\n{\n    constructor(element, callback, options)\n    {\n        if (typeof element === 'string')\n        {\n            element = document.querySelector(element)\n            if (!element)\n            {\n                console.warn(`Unknown element: document.querySelector(${element}) in clicked()`)\n                return\n            }\n        }\n        this.options = Object.assign({}, defaultOptions, options)\n        this.events = {\n            mousedown: (e) => this.mousedown(e),\n            mouseup: (e) => this.mouseup(e),\n            mousemove: (e) => this.mousemove(e),\n            touchstart: (e) => this.touchstart(e),\n            touchmove: (e) => this.touchmove(e),\n            touchcancel: (e) => this.cancel(e),\n            touchend: (e) => this.touchend(e)\n        }\n        element.addEventListener('mousedown', this.events.mousedown, { capture: this.options.capture })\n        element.addEventListener('mouseup', this.events.mouseup, { capture: this.options.capture })\n        element.addEventListener('mousemove', this.events.mousemove, { capture: this.options.capture })\n        element.addEventListener('touchstart', this.events.touchstart, { passive: true, capture: this.options.capture })\n        element.addEventListener('touchmove', this.events.touchmove, { passive: true, capture: this.options.capture })\n        element.addEventListener('touchcancel', this.events.touchcancel, { capture: this.options.capture})\n        element.addEventListener('touchend', this.events.touchend, { capture: this.options.capture })\n        this.element = element\n        this.callback = callback\n    }\n\n    /**\n     * removes event listeners added by Clicked\n     */\n    destroy()\n    {\n        this.element.removeEventListener('mousedown', this.events.mousedown)\n        this.element.removeEventListener('mouseup', this.events.mouseup)\n        this.element.removeEventListener('mousemove', this.events.mousemove)\n        this.element.removeEventListener('touchstart', this.events.touchstart, { passive: true })\n        this.element.removeEventListener('touchmove', this.events.touchmove, { passive: true })\n        this.element.removeEventListener('touchcancel', this.events.touchcancel)\n        this.element.removeEventListener('touchend', this.events.touchend)\n    }\n\n    touchstart(e)\n    {\n        if (this.down === true)\n        {\n            this.cancel()\n        }\n        else\n        {\n            if (e.touches.length === 1)\n            {\n                this.handleDown(e.changedTouches[0].screenX, e.changedTouches[0].screenY)\n            }\n        }\n    }\n\n    pastThreshold(x, y)\n    {\n        return Math.abs(this.lastX - x) > this.options.threshold || Math.abs(this.lastY - y) > this.options.threshold\n    }\n\n    touchmove(e)\n    {\n        if (this.down)\n        {\n            if (e.touches.length !== 1)\n            {\n                this.cancel()\n            }\n            else\n            {\n                const x = e.changedTouches[0].screenX\n                const y = e.changedTouches[0].screenY\n                if (this.pastThreshold(x, y))\n                {\n                    this.cancel()\n                }\n            }\n        }\n    }\n\n    /** cancel current event */\n    cancel()\n    {\n        this.down = false\n        if (this.doubleClickedTimeout)\n        {\n            clearTimeout(this.doubleClickedTimeout)\n            this.doubleClickedTimeout = null\n        }\n        if (this.longClickedTimeout)\n        {\n            clearTimeout(this.longClickedTimeout)\n            this.longClickedTimeout = null\n        }\n    }\n\n    touchend(e)\n    {\n        if (this.down)\n        {\n            e.preventDefault()\n            this.handleClicks(e, e.pointerId)\n        }\n    }\n\n    handleClicks(e)\n    {\n        if (this.options.doubleClicked)\n        {\n            this.doubleClickedTimeout = setTimeout(() => this.doubleClickedCancel(e), this.options.doubleClickedTime)\n        }\n        else if (this.options.clicked)\n        {\n            this.callback({ event: e, type: 'clicked' })\n        }\n        if (this.longClickedTimeout)\n        {\n            clearTimeout(this.longClickedTimeout)\n            this.longClickedTimeout = null\n        }\n        this.down = false\n    }\n\n    handleDown(e, x, y)\n    {\n        if (this.doubleClickedTimeout)\n        {\n            if (this.pastThreshold(x, y))\n            {\n                if (this.options.clicked)\n                {\n                    this.callback({ event: e, type: 'clicked' })\n                }\n                this.cancel()\n            }\n            else\n            {\n                this.callback({ event: e, type: 'double-clicked' })\n                this.cancel()\n            }\n        }\n        else\n        {\n            this.lastX = x\n            this.lastY = y\n            this.down = true\n            if (this.options.longClicked)\n            {\n                this.longClickedTimeout = setTimeout(() => this.longClicked(e), this.options.longClickedTime)\n            }\n            if (this.options.clickDown) {\n                this.callback({ event: e, type: 'click-down' })\n            }\n        }\n    }\n\n    longClicked(e)\n    {\n        this.longClikedTimeout = null\n        this.down = false\n        this.callback({ event: e, type: 'long-clicked' })\n    }\n\n    doubleClickedCancel(e)\n    {\n        this.doubleClickedTimeout = null\n        if (this.options.clicked)\n        {\n            this.callback({ event: e, type: 'double-clicked' })\n        }\n    }\n\n    mousedown(e)\n    {\n        if (this.down === true)\n        {\n            this.down = false\n        }\n        else\n        {\n            this.handleDown(e, e.screenX, e.screenY)\n        }\n    }\n\n    mousemove(e)\n    {\n        if (this.down)\n        {\n            const x = e.screenX\n            const y = e.screenY\n            if (this.pastThreshold(x, y))\n            {\n                this.cancel()\n            }\n        }\n    }\n\n    mouseup(e)\n    {\n        if (this.down)\n        {\n            e.preventDefault()\n            this.handleClicks(e)\n        }\n    }\n}\n\n/**\n * Callback for\n * @callback Clicked~ClickedCallback\n * @param {UIEvent} event\n * @param {('clicked'|'double-clicked'|'long-clicked'|'click-down')} type\n */","import Events from 'eventemitter3'\r\nimport { clicked } from 'clicked'\r\n\r\nimport { html } from './html'\r\n\r\n/**\r\n * Window class returned by WindowManager.createWindow()\r\n * @extends EventEmitter\r\n * @fires open\r\n * @fires focus\r\n * @fires blur\r\n * @fires close\r\n * @fires maximize\r\n * @fires maximize-restore\r\n * @fires move\r\n * @fires move-start\r\n * @fires move-end\r\n * @fires resize\r\n * @fires resize-start\r\n * @fires resize-end\r\n * @fires move-x\r\n * @fires move-y\r\n * @fires resize-width\r\n * @fires resize-height\r\n */\r\nexport class Window extends Events\r\n{\r\n    /**\r\n     * @param {WindowManager} [wm]\r\n     * @param {object} [options]\r\n     */\r\n    constructor(wm, options={})\r\n    {\r\n        super()\r\n        this.wm = wm\r\n        this.options = options\r\n        this.id = typeof this.options.id === 'undefined' ? Window.id++ : this.options.id\r\n        this._createWindow()\r\n        this._listeners()\r\n\r\n        this.active = false\r\n        this.maximized = false\r\n\r\n        this._closed = true\r\n        this._restore = null\r\n        this._moving = null\r\n        this._resizing = null\r\n        this._attachedToScreen = { vertical: '', horziontal: '' }\r\n    }\r\n\r\n    /**\r\n     * open the window\r\n     * @param {boolean} [noFocus] do not focus window when opened\r\n     */\r\n    open(noFocus)\r\n    {\r\n        if (this._closed)\r\n        {\r\n            this.win.style.display = 'block'\r\n            this._closed = false\r\n            this.emit('open', this)\r\n            if (!noFocus)\r\n            {\r\n                this.focus()\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * focus the window\r\n     */\r\n    focus()\r\n    {\r\n        this.active = true\r\n        if (this.options.titlebar)\r\n        {\r\n            this.winTitlebar.style.backgroundColor = this.options.backgroundTitlebarActive\r\n        }\r\n        this.emit('focus', this)\r\n    }\r\n\r\n    /**\r\n     * blur the window\r\n     */\r\n    blur()\r\n    {\r\n        this.active = false\r\n        if (this.options.titlebar)\r\n        {\r\n            this.winTitlebar.style.backgroundColor = this.options.backgroundTitlebarInactive\r\n        }\r\n        this.emit('blur', this)\r\n    }\r\n\r\n    /**\r\n     * closes the window (can be reopened with open)\r\n     */\r\n    close()\r\n    {\r\n        if (!this._closed)\r\n        {\r\n            this._closed = true\r\n            this.win.style.display = 'none'\r\n            this.emit('close', this)\r\n        }\r\n    }\r\n\r\n    /**\r\n     * is window closed?\r\n     * @type {boolean}\r\n     * @readonly\r\n     */\r\n    get closed()\r\n    {\r\n        return this._closed\r\n    }\r\n\r\n    /**\r\n     * left coordinate\r\n     * @type {number}\r\n     */\r\n    get x() { return this.options.x }\r\n    set x(value)\r\n    {\r\n        if (value !== this.options.x)\r\n        {\r\n            this.options.x = value\r\n            this.emit('move-x', this)\r\n            this._buildTransform()\r\n        }\r\n    }\r\n\r\n    _buildTransform()\r\n    {\r\n        this.win.style.transform = `translate(${this.options.x}px,${this.options.y}px)`\r\n    }\r\n\r\n    /**\r\n     * top coordinate\r\n     * @type {number}\r\n     */\r\n    get y() { return this.options.y }\r\n    set y(value)\r\n    {\r\n        if (value !== this.options.y)\r\n        {\r\n            this.options.y = value\r\n            this._buildTransform()\r\n            this.emit('move-y', this)\r\n        }\r\n    }\r\n\r\n    /**\r\n     * width of window\r\n     * @type {number}\r\n     */\r\n    get width() { return this.options.width || this.win.offsetWidth }\r\n    set width(value)\r\n    {\r\n        if (value !== this.options.width)\r\n        {\r\n            if (value)\r\n            {\r\n                this.win.style.width = `${value}px`\r\n                this.options.width = this.win.offsetWidth\r\n            }\r\n            else\r\n            {\r\n                this.win.style.width = 'auto'\r\n                this.options.width = ''\r\n            }\r\n            this.emit('resize-width', this)\r\n        }\r\n    }\r\n\r\n    /**\r\n     * height of window\r\n     * @type {number}\r\n     */\r\n    get height() { return this.options.height || this.win.offsetHeight }\r\n    set height(value)\r\n    {\r\n        if (value !== this.options.height)\r\n        {\r\n            if (value)\r\n            {\r\n                this.win.style.height = `${value}px`\r\n                this.options.height = this.win.offsetHeight\r\n            }\r\n            else\r\n            {\r\n                this.win.style.height = 'auto'\r\n                this.options.height = ''\r\n            }\r\n            this.emit('resize-height', this)\r\n        }\r\n    }\r\n\r\n    /**\r\n     * resize the window\r\n     * @param {number} width\r\n     * @param {number} height\r\n     */\r\n    resize(width, height)\r\n    {\r\n        this.width = width\r\n        this.height = height\r\n    }\r\n\r\n    /**\r\n     * move window\r\n     * @param {number} x\r\n     * @param {number} y\r\n     */\r\n    move(x, y)\r\n    {\r\n        const keepInside = this.keepInside\r\n        if (keepInside)\r\n        {\r\n            const bounds = this.bounds\r\n            if (keepInside === true || keepInside === 'horizontal')\r\n            {\r\n                x = x + this.width > bounds.right ? bounds.right - this.width : x\r\n                x = x < bounds.left ? bounds.left : x\r\n            }\r\n            if (keepInside === true || keepInside === 'vertical')\r\n            {\r\n                y = y + this.height > bounds.bottom ? bounds.bottom - this.height : y\r\n                y = y < bounds.top ? bounds.top : y\r\n            }\r\n        }\r\n        if (x !== this.options.x)\r\n        {\r\n            this.options.x = x\r\n            this.emit('move-x', this)\r\n        }\r\n        if (y !== this.options.y)\r\n        {\r\n            this.options.y = y\r\n            this.emit('move-y', this)\r\n        }\r\n        this._buildTransform()\r\n    }\r\n\r\n    /**\r\n     * maximize the window\r\n     */\r\n    maximize()\r\n    {\r\n        if (this.options.maximizable)\r\n        {\r\n            if (this.maximized)\r\n            {\r\n                this.x = this.maximized.x\r\n                this.y = this.maximized.y\r\n                this.width = this.maximized.width\r\n                this.height = this.maximized.height\r\n                this.maximized = null\r\n                this.emit('restore', this)\r\n                this.buttons.maximize.innerHTML = this.options.maximizeButton\r\n            }\r\n            else\r\n            {\r\n                const x = this.x, y = this.y, width = this.win.offsetWidth, height = this.win.offsetHeight\r\n                this.maximized = { x, y, width, height }\r\n                this.x = 0\r\n                this.y = 0\r\n                this.width = this.wm.overlay.offsetWidth\r\n                this.height = this.wm.overlay.offsetHeight\r\n                this.emit('maximize', this)\r\n                this.buttons.maximize.innerHTML = this.options.restoreButton\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * sends window to back of window-manager\r\n     */\r\n    sendToBack()\r\n    {\r\n        this.wm.sendToBack(this)\r\n    }\r\n\r\n    /**\r\n     * send window to front of window-manager\r\n     */\r\n    sendToFront()\r\n    {\r\n        this.wm.sendToFront(this)\r\n    }\r\n\r\n    /**\r\n     * save the state of the window\r\n     * @return {object} data\r\n     */\r\n    save()\r\n    {\r\n        const data = {}\r\n        const maximized = this.maximized\r\n        if (maximized)\r\n        {\r\n            data.maximized = { left: maximized.left, top: maximized.top, width: maximized.width, height: maximized.height }\r\n        }\r\n        data.x = this.x\r\n        data.y = this.y\r\n        if (typeof this.options.width !== 'undefined')\r\n        {\r\n            data.width = this.options.width\r\n        }\r\n        if (typeof this.options.height !== 'undefined')\r\n        {\r\n            data.height = this.options.height\r\n        }\r\n        data.closed = this._closed\r\n        return data\r\n    }\r\n\r\n    /**\r\n     * return the state of the window\r\n     * @param {object} data from save()\r\n     */\r\n    load(data)\r\n    {\r\n        if (data.maximized)\r\n        {\r\n            if (!this.maximized)\r\n            {\r\n                this.maximize(true)\r\n            }\r\n        }\r\n        else if (this.maximized)\r\n        {\r\n            this.maximize(true)\r\n        }\r\n        this.x = data.x\r\n        this.y = data.y\r\n        if (typeof data.width !== 'undefined')\r\n        {\r\n            this.width = data.width\r\n        }\r\n        else\r\n        {\r\n            this.win.style.width = 'auto'\r\n        }\r\n        if (typeof data.height !== 'undefined')\r\n        {\r\n            this.height = data.height\r\n        }\r\n        else\r\n        {\r\n            this.win.style.height = 'auto'\r\n        }\r\n        if (data.closed)\r\n        {\r\n            this.close(true)\r\n        }\r\n        else if (this.closed)\r\n        {\r\n            this.open(true, true)\r\n        }\r\n    }\r\n\r\n    /**\r\n     * change title\r\n     * @type {string}\r\n     */\r\n    get title() { return this._title }\r\n    set title(value)\r\n    {\r\n        this.winTitle.innerText = value\r\n        this.emit('title-change', this)\r\n    }\r\n\r\n\r\n    /**\r\n     * right coordinate of window\r\n     * @type {number}\r\n     */\r\n    get right() { return this.x + this.width }\r\n    set right(value)\r\n    {\r\n        this.x = value - this.width\r\n    }\r\n\r\n    /**\r\n     * bottom coordinate of window\r\n     * @type {number}\r\n     */\r\n    get bottom() { return this.y + this.height }\r\n    set bottom(value)\r\n    {\r\n        this.y = value - this.height\r\n    }\r\n\r\n    /**\r\n     * centers window in middle of other window or document.body\r\n     * @param {Window} [win]\r\n     */\r\n    center(win)\r\n    {\r\n        if (win)\r\n        {\r\n            this.move(\r\n                win.x + win.width / 2 - this.width / 2,\r\n                win.y + win.height / 2 - this.height / 2\r\n            )\r\n        }\r\n        else\r\n        {\r\n            this.move(\r\n                window.innerWidth / 2 - this.width / 2,\r\n                window.innerHeight / 2 - this.height / 2\r\n            )\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Fires when window is maximized\r\n     * @event Window#maximize\r\n     * @type {Window}\r\n     */\r\n\r\n    /**\r\n     * Fires when window is restored to normal after being maximized\r\n     * @event Window#maximize-restore\r\n     * @type {Window}\r\n     */\r\n\r\n    /**\r\n     * Fires when window opens\r\n     * @event Window#open\r\n     * @type {Window}\r\n     */\r\n\r\n    /**\r\n     * Fires when window gains focus\r\n     * @event Window#focus\r\n     * @type {Window}\r\n     */\r\n    /**\r\n     * Fires when window loses focus\r\n     * @event Window#blur\r\n     * @type {Window}\r\n     */\r\n    /**\r\n     * Fires when window closes\r\n     * @event Window#close\r\n     * @type {Window}\r\n     */\r\n\r\n    /**\r\n     * Fires when resize starts\r\n     * @event Window#resize-start\r\n     * @type {Window}\r\n     */\r\n\r\n    /**\r\n     * Fires after resize completes\r\n     * @event Window#resize-end\r\n     * @type {Window}\r\n     */\r\n\r\n    /**\r\n     * Fires during resizing\r\n     * @event Window#resize\r\n     * @type {Window}\r\n     */\r\n\r\n    /**\r\n     * Fires when move starts\r\n     * @event Window#move-start\r\n     * @type {Window}\r\n     */\r\n\r\n    /**\r\n     * Fires after move completes\r\n     * @event Window#move-end\r\n     * @type {Window}\r\n     */\r\n\r\n    /**\r\n     * Fires during move\r\n     * @event Window#move\r\n     * @type {Window}\r\n     */\r\n\r\n    /**\r\n     * Fires when width is changed\r\n     * @event Window#resize-width\r\n     * @type {Window}\r\n     */\r\n\r\n    /**\r\n     * Fires when height is changed\r\n     * @event Window#resize-height\r\n     * @type {Window}\r\n     */\r\n\r\n    /**\r\n     * Fires when x position of window is changed\r\n     * @event Window#move-x\r\n     * @type {Window}\r\n     */\r\n\r\n\r\n    /**\r\n     * Fires when y position of window is changed\r\n     * @event Window#move-y\r\n     * @type {Window}\r\n     */\r\n\r\n    _createWindow()\r\n    {\r\n        /**\r\n         * This is the top-level DOM element\r\n         * @type {HTMLElement}\r\n         * @readonly\r\n         */\r\n        this.win = html({\r\n            parent: (this.wm ? this.wm.win : null), styles: {\r\n                'display': 'none',\r\n                'border-radius': this.options.borderRadius,\r\n                'user-select': 'none',\r\n                'overflow': 'hidden',\r\n                'position': 'absolute',\r\n                'min-width': this.options.minWidth,\r\n                'min-height': this.options.minHeight,\r\n                'box-shadow': this.options.shadow,\r\n                'background-color': this.options.backgroundWindow,\r\n                'width': isNaN(this.options.width) ? this.options.width : this.options.width + 'px',\r\n                'height': isNaN(this.options.height) ? this.options.height : this.options.height + 'px',\r\n                ...this.options.styles\r\n            },\r\n            className: this.options.classNames.win\r\n        })\r\n\r\n        this.winBox = html({\r\n            parent: this.win, styles: {\r\n                'display': 'flex',\r\n                'flex-direction': 'column',\r\n                'width': '100%',\r\n                'height': '100%',\r\n                'min-height': this.options.minHeight\r\n            },\r\n            className: this.options.classNames.winBox\r\n        })\r\n        this._createTitlebar()\r\n\r\n        /**\r\n         * This is the content DOM element. Use this to add content to the Window.\r\n         * @type {HTMLElement}\r\n         * @readonly\r\n         */\r\n        this.content = html({\r\n            parent: this.winBox, type: 'section', styles: {\r\n                'display': 'block',\r\n                'flex': 1,\r\n                'min-height': this.minHeight,\r\n                'overflow-x': 'hidden',\r\n                'overflow-y': 'auto'\r\n            },\r\n            className: this.options.classNames.content\r\n        })\r\n\r\n        if (this.options.resizable)\r\n        {\r\n            this._createResize()\r\n        }\r\n\r\n        this.overlay = html({\r\n            parent: this.win, styles: {\r\n                'display': 'none',\r\n                'position': 'absolute',\r\n                'left': 0,\r\n                'top': 0,\r\n                'width': '100%',\r\n                'height': '100%'\r\n            },\r\n            className: this.options.classNames.overlay\r\n        })\r\n        this.overlay.addEventListener('mousedown', (e) => { this._downTitlebar(e); e.stopPropagation() })\r\n        this.overlay.addEventListener('touchstart', (e) => { this._downTitlebar(e); e.stopPropagation() })\r\n        this._buildTransform()\r\n    }\r\n\r\n    _downTitlebar(e)\r\n    {\r\n        const event = this._convertMoveEvent(e)\r\n        this._moving = {\r\n            x: event.pageX - this.x,\r\n            y: event.pageY - this.y\r\n        }\r\n        this.emit('move-start', this)\r\n        this._moved = false\r\n    }\r\n\r\n    _createTitlebar()\r\n    {\r\n        if (this.options.titlebar)\r\n        {\r\n            this.winTitlebar = html({\r\n                parent: this.winBox, type: 'header', styles: {\r\n                    'user-select': 'none',\r\n                    'display': 'flex',\r\n                    'flex-direction': 'row',\r\n                    'align-items': 'center',\r\n                    'justify-content': 'center',\r\n                    'height': this.options.titlebarHeight,\r\n                    'min-height': this.options.titlebarHeight,\r\n                    'border': 0,\r\n                    'padding': '0 8px',\r\n                    'overflow': 'hidden',\r\n                },\r\n                className: this.options.classNames.titlebar\r\n            })\r\n            const winTitleStyles = {\r\n                'user-select': 'none',\r\n                'flex': 1,\r\n                'display': 'flex',\r\n                'flex-direction': 'row',\r\n                'align-items': 'center',\r\n                'user-select': 'none',\r\n                'cursor': 'default',\r\n                'padding': 0,\r\n                'margin': 0,\r\n                'font-size': '16px',\r\n                'font-weight': 400,\r\n                'color': this.options.foregroundTitle\r\n            }\r\n            if (this.options.titleCenter)\r\n            {\r\n                winTitleStyles['justify-content'] = 'center'\r\n            }\r\n            else\r\n            {\r\n                winTitleStyles['padding-left'] = '8px'\r\n\r\n            }\r\n            this.winTitle = html({ parent: this.winTitlebar, type: 'span', html: this.options.title, styles: winTitleStyles, className: this.options.classNames.winTitle })\r\n            this._createButtons()\r\n\r\n            if (this.options.movable)\r\n            {\r\n                this.winTitlebar.addEventListener('mousedown', (e) => this._downTitlebar(e))\r\n                this.winTitlebar.addEventListener('touchstart', (e) => this._downTitlebar(e))\r\n            }\r\n            if (this.options.maximizable)\r\n            {\r\n                clicked(this.winTitlebar, () => this.maximize(), { doubleClicked: true, clicked: false})\r\n            }\r\n        }\r\n    }\r\n\r\n    _createButtons()\r\n    {\r\n        this.winButtonGroup = html({\r\n            parent: this.winTitlebar, styles: {\r\n                'display': 'flex',\r\n                'flex-direction': 'row',\r\n                'align-items': 'center',\r\n                'padding-left': '10px'\r\n            },\r\n            className: this.options.classNames.winButtonGroup\r\n        })\r\n        const button = {\r\n            'display': 'inline-block',\r\n            'border': 0,\r\n            'margin': 0,\r\n            'margin-left': '15px',\r\n            'padding': 0,\r\n            'width': '12px',\r\n            'height': '12px',\r\n            'background-color': 'transparent',\r\n            'background-size': 'cover',\r\n            'background-repeat': 'no-repeat',\r\n            'opacity': .7,\r\n            'color': this.options.foregroundButton,\r\n            'outline': 0\r\n        }\r\n        this.buttons = {}\r\n        if (this.options.maximizable)\r\n        {\r\n            this.buttons.maximize = html({ parent: this.winButtonGroup, html: this.options.maximizeButton, type: 'button', styles: button, className: this.options.maximize })\r\n            clicked(this.buttons.maximize, () => this.maximize())\r\n        }\r\n        if (this.options.closable)\r\n        {\r\n            this.buttons.close = html({ parent: this.winButtonGroup, html: this.options.closeButton, type: 'button', styles: button, className: this.options.close })\r\n            clicked(this.buttons.close, () => this.close())\r\n        }\r\n        for (let key in this.buttons)\r\n        {\r\n            const button = this.buttons[key]\r\n            button.addEventListener('mousemove', () =>\r\n            {\r\n                button.style.opacity = 1\r\n            })\r\n            button.addEventListener('mouseout', () =>\r\n            {\r\n                button.style.opacity = 0.7\r\n            })\r\n        }\r\n    }\r\n\r\n    _createResize()\r\n    {\r\n        this.resizeEdge = html({\r\n            parent: this.winBox, type: 'button', html: this.options.backgroundResize, styles: {\r\n                'position': 'absolute',\r\n                'bottom': 0,\r\n                'right': '4px',\r\n                'border': 0,\r\n                'margin': 0,\r\n                'padding': 0,\r\n                'cursor': 'se-resize',\r\n                'user-select': 'none',\r\n                'height': '15px',\r\n                'width': '10px',\r\n                'background': 'none'\r\n            },\r\n            className: this.options.classNames.resizeEdge\r\n        })\r\n        const down = (e) =>\r\n        {\r\n            const event = this._convertMoveEvent(e)\r\n            const width = this.width || this.win.offsetWidth\r\n            const height = this.height || this.win.offsetHeight\r\n            this._resizing = {\r\n                width: width - event.pageX,\r\n                height: height - event.pageY\r\n            }\r\n            this.emit('resize-start')\r\n            e.preventDefault()\r\n        }\r\n        this.resizeEdge.addEventListener('mousedown', down)\r\n        this.resizeEdge.addEventListener('touchstart', down)\r\n    }\r\n\r\n    _move(e)\r\n    {\r\n        const event = this._convertMoveEvent(e)\r\n\r\n        if (!this._isTouchEvent(e) && e.which !== 1)\r\n        {\r\n            this._moving && this._stopMove()\r\n            this._resizing && this._stopResize()\r\n        }\r\n        if (this._moving)\r\n        {\r\n            this.move(event.pageX - this._moving.x, event.pageY - this._moving.y)\r\n            this.emit('move', this)\r\n            e.preventDefault()\r\n        }\r\n\r\n        if (this._resizing)\r\n        {\r\n            this.resize(\r\n                event.pageX + this._resizing.width,\r\n                event.pageY + this._resizing.height\r\n            )\r\n            this.maximized = null\r\n            this.emit('resize', this)\r\n            e.preventDefault()\r\n        }\r\n    }\r\n\r\n    _up()\r\n    {\r\n        if (this._moving)\r\n        {\r\n            this._stopMove()\r\n        }\r\n        this._resizing && this._stopResize()\r\n    }\r\n\r\n    _listeners()\r\n    {\r\n        this.win.addEventListener('mousedown', () => this.focus())\r\n        this.win.addEventListener('touchstart', () => this.focus())\r\n    }\r\n\r\n    _stopMove()\r\n    {\r\n        this._moving = null\r\n        this.emit('move-end', this)\r\n    }\r\n\r\n    _stopResize()\r\n    {\r\n        this._restore = this._resizing = null\r\n        this.emit('resize-end', this)\r\n    }\r\n\r\n    _isTouchEvent(e)\r\n    {\r\n        return !!window.TouchEvent && (e instanceof window.TouchEvent)\r\n    }\r\n\r\n    _convertMoveEvent(e)\r\n    {\r\n        return this._isTouchEvent(e) ? e.changedTouches[0] : e\r\n    }\r\n\r\n    /**\r\n     * attaches window to a side of the screen\r\n     * @param {('horizontal'|'vertical')} direction\r\n     * @param {('left'|'right'|'top'|'bottom')} location\r\n     */\r\n    attachToScreen(direction, location)\r\n    {\r\n        this._attachedToScreen[direction] = location\r\n    }\r\n\r\n    /**\r\n     * @param {Bounds} bounds\r\n     * @param {(boolean|'horizontal'|'vertical')} keepInside\r\n     */\r\n    resize(bounds, keepInside)\r\n    {\r\n        this.bounds = bounds\r\n        this.keepInside = keepInside\r\n        let x = this.x\r\n        let y = this.y\r\n        x = this._attachedToScreen.horziontal === 'right' ? bounds.right - this.width : x\r\n        x = this._attachedToScreen.horizontal === 'left' ? bounds.left : x\r\n        y = this._attachedToScreen.vertical === 'bottom' ? bounds.bottom - this.height : y\r\n        y = this._attachedToScreen.vertical === 'top' ? bounds.top : y\r\n        this.move(x, y)\r\n    }\r\n\r\n    /**\r\n     * @param {boolean} [ignoreClosed]\r\n     * @returns {boolean}\r\n     */\r\n    isModal(ignoreClosed)\r\n    {\r\n        return (ignoreClosed || !this._closed) && this.options.modal\r\n    }\r\n\r\n    /** @returns {boolean} */\r\n    isClosed()\r\n    {\r\n        return this._closed\r\n    }\r\n\r\n    get z()\r\n    {\r\n        return parseInt(this.win.style.zIndex)\r\n    }\r\n    set z(value)\r\n    {\r\n        this.win.style.zIndex = value\r\n    }\r\n}\r\n\r\nWindow.id = 0","export const close='<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\"><svg width=\"100%\" height=\"100%\" viewBox=\"0 0 20 20\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xml:space=\"preserve\" xmlns:serif=\"http://www.serif.com/\" style=\"fill-rule:evenodd;clip-rule:evenodd;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:1.5;\"><rect id=\"close\" x=\"0\" y=\"0\" width=\"20\" height=\"20\" style=\"fill:none;\"/><g><path d=\"M3.5,3.5l13,13\" style=\"fill:none;stroke:#fff;stroke-width:3px;\"/><path d=\"M16.5,3.5l-13,13\" style=\"fill:none;stroke:#fff;stroke-width:3px;\"/></g></svg>';export const maximize='<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\"><svg width=\"100%\" height=\"100%\" viewBox=\"0 0 20 20\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xml:space=\"preserve\" xmlns:serif=\"http://www.serif.com/\" style=\"fill-rule:evenodd;clip-rule:evenodd;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:1.5;\"><rect id=\"maximize\" x=\"0\" y=\"0\" width=\"20\" height=\"20\" style=\"fill:none;\"/><rect x=\"2\" y=\"2\" width=\"16\" height=\"16\" style=\"fill:none;stroke:#fff;stroke-width:2px;\"/><rect x=\"2\" y=\"2\" width=\"16\" height=\"3.2\" style=\"fill:#fff;\"/></svg>';export const minimize='<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\"><svg width=\"100%\" height=\"100%\" viewBox=\"0 0 20 20\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xml:space=\"preserve\" xmlns:serif=\"http://www.serif.com/\" style=\"fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;\"><rect id=\"minimize\" x=\"0\" y=\"0\" width=\"20\" height=\"20\" style=\"fill:none;\"/><rect x=\"2\" y=\"15.6\" width=\"16\" height=\"3.2\" style=\"fill:#fff;\"/></svg>';export const resize='<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\"><svg width=\"100%\" height=\"100%\" viewBox=\"0 0 20 20\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xml:space=\"preserve\" xmlns:serif=\"http://www.serif.com/\" style=\"fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;\"><rect id=\"resize\" x=\"0\" y=\"0\" width=\"20\" height=\"20\" style=\"fill:none;\"/><clipPath id=\"_clip1\"><rect x=\"0\" y=\"0\" width=\"20\" height=\"20\"/></clipPath><g clip-path=\"url(#_clip1)\"><rect x=\"0\" y=\"16.8\" width=\"20\" height=\"3.2\" style=\"fill:#fff;\"/><path d=\"M17.737,3.595l-14.142,14.142l2.263,2.263l14.142,-14.142l-2.263,-2.263Z\" style=\"fill:#fff;\"/><path d=\"M16.8,0l0,20l3.2,0l0,-20l-3.2,0Z\" style=\"fill:#fff;\"/><path d=\"M7.099,18.4l11.301,-11.123l0,11.123l-11.301,0Z\" style=\"fill:#fff;\"/></g></svg>';export const restore='<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\"><svg width=\"100%\" height=\"100%\" viewBox=\"0 0 20 20\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xml:space=\"preserve\" xmlns:serif=\"http://www.serif.com/\" style=\"fill-rule:evenodd;clip-rule:evenodd;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:1.5;\"><rect id=\"restore\" x=\"0\" y=\"0\" width=\"20\" height=\"20\" style=\"fill:none;\"/><g><rect x=\"7\" y=\"2.5\" width=\"10\" height=\"10\" style=\"fill:none;stroke:#fff;stroke-width:1.5px;\"/><rect x=\"7\" y=\"2.5\" width=\"10\" height=\"2\" style=\"fill:#fff;\"/></g><g><rect x=\"3\" y=\"7.5\" width=\"10\" height=\"10\" style=\"fill:none;stroke:#fff;stroke-width:1.5px;\"/><g><rect x=\"3\" y=\"7.5\" width=\"10\" height=\"2\" style=\"fill:#fff;\"/></g></g></svg>';","import { close, maximize, restore, resize } from './images'\r\n\r\n/**\r\n * @typedef {object} WindowOptions\r\n * @property {number} [x=0]\r\n * @property {number} [y=0]\r\n * @property {number} [width]\r\n * @property {number} [height]\r\n * @property {boolean} [modal]\r\n * @property {boolean} [openOnCreate=true]\r\n * @property {boolean} [movable=true]\r\n * @property {boolean} [resizable=true]\r\n * @property {boolean} [maximizable=true]\r\n * @property {boolean} [closable=true]\r\n * @property {boolean} [noSnap] don't snap this window or use this window as a snap target\r\n * @property {boolean} [titlebar=true]\r\n * @property {string} [titlebarHeight=36px]\r\n * @property {boolean} [titleCenter]\r\n * @property {string} [minWidth=200px]\r\n * @property {string} [minHeight=60px]\r\n * @property {string} [borderRadius=4px]\r\n * @property {object} [styles]\r\n * @property {string} [shadow='0 0 12px 1px rgba(0, 0, 0, 0.6)']\r\n * @property {number} [animateTime=250]\r\n * @property {string} [backgroundModal=rgba(0,0,0,0.6)]\r\n * @property {string} [backgroundWindow=#fefefe]\r\n * @property {string} [backgroundTitlebarActive=#365d98]\r\n * @property {string} [backgroundTitlebarInactive=#888888]\r\n * @property {string} [foregroundButton=#ffffff]\r\n * @property {string} [foregroundTitle=#ffffff]\r\n * @property {string} [maximizeButton=...]\r\n * @property {string} [closeButton=...]\r\n * @property {string} [resize=...]\r\n */\r\nexport const windowOptions = {\r\n    x: 0,\r\n    y: 0,\r\n    width: undefined,\r\n    height: undefined,\r\n    modal: false,\r\n    openOnCreate: true,\r\n\r\n    classNames: {},\r\n\r\n    minWidth: '200px',\r\n    minHeight: '60px',\r\n    borderRadius: 0,\r\n    styles: {},\r\n\r\n    shadow: 'none',\r\n    movable: true,\r\n    resizable: true,\r\n    maximizable: true,\r\n    closable: true,\r\n\r\n    titlebar: true,\r\n    titlebarHeight: '2rem',\r\n\r\n    backgroundModal: 'rgba(0, 0, 0, 0.6)',\r\n    backgroundWindow: '#fefefe',\r\n    backgroundTitlebarActive: '#365d98',\r\n    backgroundTitlebarInactive: '#888888',\r\n    foregroundButton: '#ffffff',\r\n    foregroundTitle: '#ffffff',\r\n\r\n    closeButton: close,\r\n    maximizeButton: maximize,\r\n    restoreButton: restore,\r\n\r\n    backgroundResize: resize\r\n}","import { html } from './html'\n\nconst DEFAULT_COLOR = '#a8f0f4'\nconst DEFAULT_SIZE = 10\n\nconst SnapOptionsDefault = {\n    screen: true,\n    windows: true,\n    snap: 20,\n    color: DEFAULT_COLOR,\n    spacing: 5,\n    indicator: DEFAULT_SIZE\n}\n\nexport class Snap\n{\n    /**\n     * add edge snapping plugin\n     * @param {WindowManager} wm\n     * @param {object} [options]\n     * @param {boolean} [options.screen=true] snap to screen edges\n     * @param {boolean} [options.windows=true] snap to window edges\n     * @param {number} [options.snap=20] distance to edge in pixels before snapping and width/height of snap bars\n     * @param {string} [options.color=#a8f0f4] color for snap bars\n     * @param {number} [options.spacing=5] spacing distance between window and edges\n     * @param {number} [options.indicator=10] size in pixels of snapping indicator (the indicator is actually twice the size of what is shown)\n     */\n    constructor(wm, options={})\n    {\n        this.wm = wm\n        this.options = Object.assign({}, SnapOptionsDefault, options)\n        this.highlights = html({ parent: this.wm.overlay, styles: { 'position': 'absolute' } })\n        this.horizontal = html({\n            parent: this.highlights, styles: {\n                display: 'none',\n                position: 'absolute',\n                height: `${this.options.indicator}px`,\n                borderRadius: `${this.options.indicator}px`,\n                backgroundColor: this.options.color\n            }\n        })\n        this.vertical = html({\n            parent: this.highlights, styles: {\n                display: 'none',\n                position: 'absolute',\n                width: `${this.options.indicator}px`,\n                borderRadius: `${this.options.indicator}px`,\n                backgroundColor: this.options.color\n            }\n        })\n        this.horizontal\n        this.showing = []\n    }\n\n    stop()\n    {\n        this.highlights.remove()\n        this.stopped = true\n    }\n\n    addWindow(win)\n    {\n        win.on('move', () => this.move(win))\n        win.on('move-end', () => this.moveEnd(win))\n    }\n\n    screenMove(rect, horizontal, vertical)\n    {\n        const width = document.body.clientWidth\n        const height = document.body.clientHeight\n        if (rect.left - this.options.snap <= width && rect.right + this.options.snap >= 0)\n        {\n            if (Math.abs(rect.top - 0) <= this.options.snap)\n            {\n                horizontal.push({ distance: Math.abs(rect.top - 0), left: 0, width, top: 0, side: 'top', screen: true })\n            }\n            else if (Math.abs(rect.bottom - height) <= this.options.snap)\n            {\n                horizontal.push({ distance: Math.abs(rect.bottom - height), left: 0, width, top: height, side: 'bottom', screen: true })\n            }\n        }\n        if (rect.top - this.options.snap <= height && rect.bottom + this.options.snap >= 0)\n        {\n            if (Math.abs(rect.left - 0) <= this.options.snap)\n            {\n                vertical.push({ distance: Math.abs(rect.left - 0), top: 0, height, left: 0, side: 'left', screen: true })\n            }\n            else if (Math.abs(rect.right - width) <= this.options.snap)\n            {\n                vertical.push({ distance: Math.abs(rect.right - width), top: 0, height, left: width, side: 'right', screen: true })\n            }\n        }\n    }\n\n    windowsMove(original, rect, horizontal, vertical)\n    {\n        for (let win of this.wm.windows)\n        {\n            if (!win.options.noSnap && win !== original)\n            {\n                const rect2 = win.win.getBoundingClientRect()\n                if (rect.left - this.options.snap <= rect2.right && rect.right + this.options.snap >= rect2.left)\n                {\n                    if (Math.abs(rect.top - rect2.bottom) <= this.options.snap)\n                    {\n                        horizontal.push({ distance: Math.abs(rect.top - rect2.bottom), left: rect2.left, width: rect2.width, top: rect2.bottom, side: 'top' })\n                        if (Math.abs(rect.left - rect2.left) <= this.options.snap)\n                        {\n                            vertical.push({ distance: Math.abs(rect.left - rect2.left), top: rect2.top, height: rect2.height, left: rect2.left, side: 'left', noSpacing: true })\n                        }\n                        else if (Math.abs(rect.right - rect2.right) <= this.options.snap)\n                        {\n                            vertical.push({ distance: Math.abs(rect.right - rect2.right), top: rect2.top, height: rect2.height, left: rect2.right, side: 'right', noSpacing: true })\n                        }\n                    }\n                    else if (Math.abs(rect.bottom - rect2.top) <= this.options.snap)\n                    {\n                        horizontal.push({ distance: Math.abs(rect.bottom - rect2.top), left: rect2.left, width: rect2.width, top: rect2.top, side: 'bottom' })\n                        if (Math.abs(rect.left - rect2.left) <= this.options.snap)\n                        {\n                            vertical.push({ distance: Math.abs(rect.left - rect2.left), top: rect2.top, height: rect2.height, left: rect2.left, side: 'left', noSpacing: true })\n                        }\n                        else if (Math.abs(rect.right - rect2.right) <= this.options.snap)\n                        {\n                            vertical.push({ distance: Math.abs(rect.right - rect2.right), top: rect2.top, height: rect2.height, left: rect2.right, side: 'right', noSpacing: true })\n                        }\n                    }\n                }\n                if (rect.top - this.options.snap <= rect2.bottom && rect.bottom + this.options.snap >= rect2.top)\n                {\n                    if (Math.abs(rect.left - rect2.right) <= this.options.snap)\n                    {\n                        vertical.push({ distance: Math.abs(rect.left - rect2.right), top: rect2.top, height: rect2.height, left: rect2.right, side: 'left' })\n                        if (Math.abs(rect.top - rect2.top) <= this.options.snap)\n                        {\n                            horizontal.push({ distance: Math.abs(rect.top - rect2.top), left: rect2.left, width: rect2.width, top: rect2.top, side: 'top', noSpacing: true })\n                        }\n                        else if (Math.abs(rect.bottom - rect2.bottom) <= this.options.snap)\n                        {\n                            horizontal.push({ distance: Math.abs(rect.bottom - rect2.bottom), left: rect2.left, width: rect2.width, top: rect2.bottom, side: 'bottom', noSpacing: true })\n                        }\n                    }\n                    else if (Math.abs(rect.right - rect2.left) <= this.options.snap)\n                    {\n                        vertical.push({ distance: Math.abs(rect.right - rect2.left), top: rect2.top, height: rect2.height, left: rect2.left, side: 'right' })\n                        if (Math.abs(rect.top - rect2.top) <= this.options.snap)\n                        {\n                            horizontal.push({ distance: Math.abs(rect.top - rect2.top), left: rect2.left, width: rect2.width, top: rect2.top, side: 'top', noSpacing: true })\n                        }\n                        else if (Math.abs(rect.bottom - rect2.bottom) <= this.options.snap)\n                        {\n                            horizontal.push({ distance: Math.abs(rect.bottom - rect2.bottom), left: rect2.left, width: rect2.width, top: rect2.bottom, side: 'bottom', noSpacing: true })\n                        }\n                    }\n                }\n            }\n        }\n    }\n\n    move(win)\n    {\n        if (this.stopped || win.options.noSnap || win.isModal())\n        {\n            return\n        }\n        this.horizontal.style.display = 'none'\n        this.vertical.style.display = 'none'\n        const horizontal = []\n        const vertical = []\n        const rect = win.win.getBoundingClientRect()\n        if (this.options.screen)\n        {\n            this.screenMove(rect, horizontal, vertical)\n        }\n        if (this.options.windows)\n        {\n            this.windowsMove(win, rect, horizontal, vertical)\n        }\n        if (horizontal.length)\n        {\n            horizontal.sort((a, b) => { return a.distance - b.distance })\n            const find = horizontal[0]\n            this.horizontal.style.display = 'block'\n            this.horizontal.style.width = find.width + 'px'\n            this.horizontal.y = find.top - this.options.indicator / 2\n            this.horizontal.style.transform = `translate(${find.left}px,${this.horizontal.y}px)`\n            this.horizontal.side = find.side\n            this.horizontal.noSpacing = find.noSpacing\n            this.horizontal.screen = find.screen\n        }\n        if (vertical.length)\n        {\n            vertical.sort((a, b) => { return a.distance - b.distance })\n            const find = vertical[0]\n            this.vertical.style.display  = 'block'\n            this.vertical.style.height = find.height + 'px'\n            this.vertical.x = find.left - this.options.indicator / 2\n            this.vertical.style.transform = `translate(${this.vertical.x}px,${find.top}px)`\n            this.vertical.side = find.side\n            this.vertical.noSpacing = find.noSpacing\n            this.vertical.screen = find.screen\n        }\n    }\n\n    moveEnd(win)\n    {\n        if (this.stopped)\n        {\n            return\n        }\n        if (this.horizontal.style.display === 'block')\n        {\n            const spacing = this.horizontal.noSpacing ? 0 : this.options.spacing\n            const adjust = win.minimized ? (win.height - win.height * win.minimized.scaleY) / 2 : 0\n            switch (this.horizontal.side)\n            {\n                case 'top':\n                    win.y = this.horizontal.y - adjust + spacing + this.options.indicator / 2\n                    break\n\n                case 'bottom':\n                    win.bottom = Math.floor(this.horizontal.y + adjust - spacing + this.options.indicator / 2)\n                    break\n            }\n            win.attachToScreen('vertical', this.horizontal.screen ? this.horizontal.side : '')\n        }\n        if (this.vertical.style.display === 'block')\n        {\n            const spacing = this.vertical.noSpacing ? 0 : this.options.spacing\n            const adjust = win.minimized ? (win.width - win.width * win.minimized.scaleX) / 2 : 0\n            switch (this.vertical.side)\n            {\n                case 'left':\n                    win.x = this.vertical.x - adjust + spacing + this.options.indicator / 2\n                    break\n\n                case 'right':\n                    win.right = Math.floor(this.vertical.x + adjust - spacing + this.options.indicator / 2)\n                    break\n            }\n            win.attachToScreen('horziontal', this.vertical.screen ? this.vertical.side : '')\n        }\n        this.horizontal.style.display = this.vertical.style.display = 'none'\n    }\n}","import { html } from './html'\r\nimport { Window } from './Window'\r\nimport { windowOptions } from './windowOptions'\r\nimport { Snap } from './Snap'\r\nexport { Window } from './Window'\r\n\r\nconst windowManagerOptions = {\r\n    parent: document.body,\r\n    quiet: false,\r\n    keepInside: true,\r\n    snap: true\r\n}\r\n\r\n/**\r\n * Creates a windowing system to create and manage windows\r\n *\r\n * @extends EventEmitter\r\n * @example\r\n * var wm = new WindowManager();\r\n *\r\n * wm.createWindow({ x: 20, y: 20, width: 200 })\r\n * wm.content.innerHTML = 'Hello there!'\r\n */\r\nexport class WindowManager\r\n{\r\n    /**\r\n     * @param {object} [options]\r\n     * @param {HTMLElement} [options.parent=document.body]\r\n     * @param {boolean} [options.quiet] suppress the simple-window-manager console message\r\n     * @param {(boolean|SnapOptions)} [options.snap] turn on edge and/or screen snapping\r\n     * @param {(boolean|'horizontal'|'vertical')} [options.keepInside=true] keep windows inside the parent in a certain direction\r\n     * @param {WindowOptions} [defaultOptions] default WindowOptions used when createWindow is called\r\n     */\r\n    constructor(options={}, defaultOptions={})\r\n    {\r\n        this.windows = []\r\n        this.active = null\r\n        this.options = Object.assign({}, windowManagerOptions, options)\r\n        this.defaultOptions = Object.assign({}, windowOptions, defaultOptions)\r\n        if (!this.options.quiet)\r\n        {\r\n            console.log('%c  simple-window-manager initialized ', 'color: #ff00ff')\r\n        }\r\n        this._createDom(options.parent || document.body)\r\n        if (this.options.snap)\r\n        {\r\n            this.snap(this.options.snap === true ? {} : this.options.snap)\r\n        }\r\n        window.addEventListener('resize', () => this.resize())\r\n    }\r\n\r\n    /**\r\n     * Create a window\r\n     * @param {WindowOptions} [options]\r\n     * @param {string} [options.title]\r\n     * @param {number} [options.x] position\r\n     * @param {number} [options.y] position\r\n     * @param {boolean} [options.modal]\r\n     * @param {(number|*)} [options.id] if not provide, id will be assigned in order of creation (0, 1, 2...)\r\n     * @returns {Window} the created window\r\n     */\r\n    createWindow(options={})\r\n    {\r\n        const win = new Window(this, Object.assign({}, this.defaultOptions, options))\r\n        win.on('open', () => this._open(win))\r\n        win.on('focus', () => this._focus(win))\r\n        win.on('blur', () => this._blur(win))\r\n        win.on('close', () => this._close(win))\r\n        win.win.addEventListener('mousemove', (e) => this._move(e))\r\n        win.win.addEventListener('touchmove', (e) => this._move(e))\r\n        win.win.addEventListener('mouseup', (e) => this._up(e))\r\n        win.win.addEventListener('touchend', (e) => this._up(e))\r\n        if (this._snap && !options.noSnap)\r\n        {\r\n            this._snap.addWindow(win)\r\n        }\r\n        win.resize(this.bounds, this.options.keepInside)\r\n        if (win.options.openOnCreate)\r\n        {\r\n            win.open()\r\n        }\r\n        return win\r\n    }\r\n\r\n    /**\r\n     * Attach an existing window to the WindowManager\r\n     * Note: WindowManager.createWindow is the preferred way to create windows to ensure that all the defaultOptions\r\n     * are applied to the Window. If you use this function, then Window needs to be initialized with WindowOptions.\r\n     * @param {Window} win\r\n     * @returns {Window} the window\r\n     */\r\n    attachWindow(win)\r\n    {\r\n        win.on('open', this._open, this)\r\n        win.on('focus', this._focus, this)\r\n        win.on('blur', this._blur, this)\r\n        win.on('close', this._close, this)\r\n        this.win.appendChild(win.win)\r\n        win.wm = this\r\n        win.win.addEventListener('mousemove', (e) => this._move(e))\r\n        win.win.addEventListener('touchmove', (e) => this._move(e))\r\n        win.win.addEventListener('mouseup', (e) => this._up(e))\r\n        win.win.addEventListener('touchend', (e) => this._up(e))\r\n        if (this._snap && !this.defaultOptions.noSnap)\r\n        {\r\n            this._snap.addWindow(win)\r\n        }\r\n        return win\r\n    }\r\n\r\n    /**\r\n     * enable edge and/or screen snapping\r\n     * @param {SnapOptions} options\r\n     */\r\n    snap(options)\r\n    {\r\n        this._snap = new Snap(this, options)\r\n        for (let win of this.windows)\r\n        {\r\n            if (!win.options.noSnap)\r\n            {\r\n                this._snap.addWindow(win)\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * send window to front\r\n     * @param {Window} win\r\n     */\r\n    sendToFront(win)\r\n    {\r\n        const index = this.windows.indexOf(win)\r\n        console.assert(index !== -1, 'sendToFront should find window in this.windows')\r\n        if (index !== this.windows.length - 1)\r\n        {\r\n            this.windows.splice(index, 1)\r\n            this.windows.push(win)\r\n            this._reorder()\r\n        }\r\n    }\r\n\r\n    /**\r\n     * send window to back\r\n     * @param {Window} win\r\n     */\r\n    sendToBack(win)\r\n    {\r\n        const index = this.windows.indexOf(win)\r\n        console.assert(index !== -1, 'sendToFront should find window in this.windows')\r\n        if (index !== 0)\r\n        {\r\n            this.windows.splice(index, 1)\r\n            this.windows.unshift(win)\r\n            this._reorder()\r\n        }\r\n    }\r\n\r\n    /**\r\n     * save the state of all the windows\r\n     * @returns {object} use this object in load() to restore the state of all windows\r\n     */\r\n    save()\r\n    {\r\n        const data = {}\r\n        for (let i = 0; i < this.windows.length; i++)\r\n        {\r\n            const entry = this.windows[i]\r\n            data[entry.id] = entry.save()\r\n            data[entry.id].order = i\r\n        }\r\n        return data\r\n    }\r\n\r\n    /**\r\n     * restores the state of all the windows\r\n     * NOTE: this requires that the windows have the same id as when save() was called\r\n     * @param {object} data created by save()\r\n     */\r\n    load(data)\r\n    {\r\n        for (let i = 0; i < this.windows.length; i++)\r\n        {\r\n            const entry = this.windows[i]\r\n            if (data[entry.id])\r\n            {\r\n                entry.load(data[entry.id])\r\n            }\r\n        }\r\n        // reorder windows\r\n    }\r\n\r\n    /**\r\n     * close all windows\r\n     */\r\n    closeAll()\r\n    {\r\n        for (let win of this.windows)\r\n        {\r\n            win.close()\r\n        }\r\n        this.windows = []\r\n        this.active = null\r\n    }\r\n\r\n    /**\r\n     * reorder windows\r\n     * @private\r\n     * @returns {number} available z-index for top window\r\n     */\r\n    _reorder()\r\n    {\r\n        let i = 0\r\n        for (const win of this.windows)\r\n        {\r\n            if (!win.isClosed())\r\n            {\r\n                win.z = i++\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @param {HTMLElement} parent\r\n     */\r\n    _createDom(parent)\r\n    {\r\n        /**\r\n         * This is the top-level DOM element\r\n         * @type {HTMLElement}\r\n         * @readonly\r\n         */\r\n        this.win = html({\r\n            parent, styles: {\r\n                'user-select': 'none',\r\n                'width': '100%',\r\n                'height': '100%',\r\n                'overflow': 'hidden',\r\n                'z-index': -1,\r\n                'cursor': 'default'\r\n            }\r\n        })\r\n\r\n        /**\r\n         * This is the bottom DOM element. Use this to set a wallpaper or attach elements underneath the windows\r\n         * @type {HTMLElement}\r\n         * @readonly\r\n         */\r\n        this.overlay = html({\r\n            parent: this.win, styles: {\r\n                'user-select': 'none',\r\n                'position': 'absolute',\r\n                'top': 0,\r\n                'left': 0,\r\n                'width': '100%',\r\n                'height': '100%',\r\n                'overflow': 'hidden'\r\n            }\r\n        })\r\n        this.overlay.addEventListener('mousemove', (e) => this._move(e))\r\n        this.overlay.addEventListener('touchmove', (e) => this._move(e))\r\n        this.overlay.addEventListener('mouseup', (e) => this._up(e))\r\n        this.overlay.addEventListener('touchend', (e) => this._up(e))\r\n\r\n        this.modalOverlay = html({\r\n            parent: this.win,\r\n            styles: {\r\n                'display': 'none',\r\n                'user-select': 'none',\r\n                'position': 'absolute',\r\n                'top': 0,\r\n                'left': 0,\r\n                'width': '100%',\r\n                'height': '100%',\r\n                'overflow': 'hidden',\r\n                'background': this.defaultOptions.backgroundModal\r\n            }\r\n        })\r\n        this.modalOverlay.addEventListener('mousemove', (e) => { this._move(e); e.preventDefault(); e.stopPropagation() })\r\n        this.modalOverlay.addEventListener('touchmove', (e) => { this._move(e); e.preventDefault(); e.stopPropagation() })\r\n        this.modalOverlay.addEventListener('mouseup', (e) => { this._up(e); e.preventDefault(); e.stopPropagation() })\r\n        this.modalOverlay.addEventListener('touchend', (e) => { this._up(e); e.preventDefault(); e.stopPropagation() })\r\n        this.modalOverlay.addEventListener('mousedown', (e) => { e.preventDefault(); e.stopPropagation() })\r\n        this.modalOverlay.addEventListener('touchstart', (e) => { e.preventDefault(); e.stopPropagation() })\r\n    }\r\n\r\n    _open(win)\r\n    {\r\n        this.windows.push(win)\r\n        this._reorder()\r\n        if (win.options.modal)\r\n        {\r\n            this.modalOverlay.style.display = 'block'\r\n            this.modalOverlay.style.zIndex = win.z\r\n        }\r\n        else\r\n        {\r\n            this.modalOverlay.style.display = 'none'\r\n        }\r\n    }\r\n\r\n    _focus(win)\r\n    {\r\n        if (this.active === win)\r\n        {\r\n            return\r\n        }\r\n        if (this.active)\r\n        {\r\n            this.active.blur()\r\n        }\r\n        const index = this.windows.indexOf(win)\r\n        console.assert(index !== -1, 'WindowManager._focus should find window in this.windows')\r\n        if (index !== this.windows.length - 1)\r\n        {\r\n            this.windows.splice(index, 1)\r\n            this.windows.push(win)\r\n        }\r\n        this._reorder()\r\n        this.active = this.windows[this.windows.length - 1]\r\n    }\r\n\r\n    _blur(win)\r\n    {\r\n        if (this.active === win)\r\n        {\r\n            this.active = null\r\n        }\r\n    }\r\n\r\n    _close(win)\r\n    {\r\n        const index = this.windows.indexOf(win)\r\n        console.assert(index !== -1, 'WindowManager._close should find window in this.windows')\r\n        this.windows.splice(index, 1)\r\n        const next = this.windows[this.windows.length - 1]\r\nif (next === win) debugger\r\n        if (win.isModal(true))\r\n        {\r\n            if (next && next.isModal())\r\n            {\r\n                this.modalOverlay.style.zIndex = next.z\r\n            }\r\n            else\r\n            {\r\n                this.modalOverlay.style.display = 'none'\r\n            }\r\n        }\r\n        next.focus()\r\n    }\r\n\r\n    _move(e)\r\n    {\r\n        for (const key in this.windows)\r\n        {\r\n            this.windows[key]._move(e)\r\n        }\r\n    }\r\n\r\n    _up(e)\r\n    {\r\n        for (const key in this.windows)\r\n        {\r\n            this.windows[key]._up(e)\r\n        }\r\n    }\r\n\r\n    checkModal(win)\r\n    {\r\n        return !this.modal || this.modal === win\r\n    }\r\n\r\n    /** @type {Bounds} */\r\n    get bounds()\r\n    {\r\n        return {\r\n            top: this.win.offsetTop,\r\n            bottom: this.win.offsetTop + this.win.offsetHeight,\r\n            left: this.win.offsetLeft,\r\n            right: this.win.offsetLeft + this.win.offsetWidth\r\n        }\r\n    }\r\n\r\n    resize()\r\n    {\r\n        const bounds = this.bounds\r\n        for (const key in this.windows)\r\n        {\r\n            this.windows[key].resize(bounds, this.options.keepInside)\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * @typedef {object} SnapOptions\r\n * @property {boolean} [screen=true] snap to screen edges\r\n * @property {boolean} [windows=true] snap to window edges\r\n * @property {number} [snap=20] distance to edge before snapping\r\n * @property {string} [color=#a8f0f4] color for snap bars\r\n * @property {number} [spacing=0] spacing distance between window and edges\r\n */\r\n\r\n/**\r\n * @typedef {object} Bounds\r\n * @property {number} left\r\n * @property {number} right\r\n * @property {number} top\r\n * @property {number} bottom\r\n */","import FPS from 'yy-fps'\r\n\r\nimport { WindowManager } from '../../src/WindowManager'\r\nimport { html } from '../../src/html'\r\n\r\n// import { menu } from './menu'\r\n\r\n// create a window manager and change some of the default styles\r\nconst wm = new WindowManager()\r\nwm.snap({ screen: true, windows: true, spacing: 0 })\r\n\r\nwindow.onload = () =>\r\n{\r\n    // creates test windows\r\n    test()\r\n    test2()\r\n    test3()\r\n    test4()\r\n    test5()\r\n    test7()\r\n    // menu(wm)\r\n    update()\r\n}\r\n\r\nconst top = 10\r\n\r\nfunction test()\r\n{\r\n    const test = wm.createWindow({ x: 10, y: top, titlebar: false, title: 'Test Window', resizable: false, maximizable: false, minimizable: false, titleCenter: true, closable: false })\r\n    test.content.style.padding = '1em'\r\n    test.content.innerHTML = 'This is a test window.'\r\n    test.open()\r\n}\r\n\r\nfunction test2()\r\n{\r\n    const test = wm.createWindow({\r\n        width: 300, height: 150,\r\n        x: 100, y: 100,\r\n        titlebarHeight: '22px',\r\n        backgroundTitlebarActive: 'green',\r\n        backgroundTitlebarInactive: 'purple',\r\n        backgroundWindow: 'rgb(255,200,255)',\r\n    })\r\n    test.content.style.padding = '0.5em'\r\n    test.content.innerHTML = 'This is a pink test window.<br><br>Check out the fancy title bar for other style tests.<br><br><br>And scrolling!!!'\r\n    test.open()\r\n}\r\n\r\nfunction test3()\r\n{\r\n    // create a test window with a button to create a modal window\r\n    const test = wm.createWindow({ x: 300, y: 400, width: 350, title: 'This is one fancy demo!' })\r\n    test.content.style.padding = '1em'\r\n    html({ parent: test.content, html: 'OK. It isn\\'t that fancy, but it shows off some of the functionality of this library.<br><br>Please excuse the mess. I do NOT keep my desktop this messy, but I thought it made for a good demo.' })\r\n    const div = html({ parent: test.content, styles: { textAlign: 'center', marginTop: '1em' } })\r\n    const button = html({ parent: div, type: 'button', html: 'open modal window' })\r\n\r\n    let x = 0\r\n    let y = 0\r\n    function createModal()\r\n    {\r\n        // create a modal window\r\n        const modal = wm.createWindow({\r\n            modal: true,\r\n            width: 200,\r\n            title: 'modal window',\r\n            minimizable: false,\r\n            maximizable: false\r\n        })\r\n        const div = html({ parent: modal.content, styles: { 'margin': '0.5em' } })\r\n        html({ parent: div, html: 'This needs to be closed before using other windows.' })\r\n        const buttonDiv = html({ parent: div, styles: { 'text-align': 'center', margin: '1em', display: 'flex' } })\r\n        const buttonAdd = html({ parent: buttonDiv, type: 'button', html: 'open child modal' })\r\n        const button = html({ parent: buttonDiv, type: 'button', html: 'close modal' })\r\n        button.onclick = () => modal.close()\r\n        buttonAdd.onclick = () => createModal()\r\n        modal.open()\r\n\r\n        // center window in test\r\n        modal.center(test)\r\n        modal.move(modal.x + x, modal.y + y)\r\n        x += 20\r\n        y += 20\r\n    }\r\n\r\n    button.onclick = () => createModal(div)\r\n    test.open()\r\n}\r\n\r\nfunction test4()\r\n{\r\n    const test = wm.createWindow({ x: 300, y: top, title: 'My wife\\'s art gallery!', maximizable: false })\r\n    test.content.innerHTML = '<iframe width=\"560\" height=\"315\" src=\"https://yuanru.gallery\" frameborder=\"0\" allow=\"encrypted-media\" allowfullscreen></iframe>'\r\n    test.open()\r\n    test.sendToBack()\r\n}\r\n\r\nfunction test5()\r\n{\r\n    const test = wm.createWindow({ x: 20, y: 600, title: 'window save/load' })\r\n    html({ parent: test.content, html: 'Save the windows, and then move windows around and load them.', styles: { margin: '0.5em' } })\r\n    const buttons = html({ parent: test.content, styles: { 'text-align': 'center' } })\r\n    const save = html({ parent: buttons, html: 'save window state', type: 'button', styles: { margin: '1em', background: 'rgb(200,255,200)' } })\r\n    const load = html({ parent: buttons, html: 'load window state', type: 'button', styles: { margin: '1em', background: 'rgb(255,200,200)' } })\r\n    test.open()\r\n    let data\r\n    save.onclick = () => data = wm.save()\r\n    load.onclick = () => { if (data) wm.load(data) }\r\n}\r\n\r\nfunction test7()\r\n{\r\n    const test = wm.createWindow({ x: 700, y: 40, width: 400, height: 300, title: 'API documentation', styles: { overflow: 'hidden' } })\r\n    test.content.innerHTML = '<iframe width=\"100%\" height=\"100%\" src=\"https://davidfig.github.io/window-manager/jsdoc/\"></iframe>'\r\n    test.open()\r\n}\r\n\r\nconst wallpaper = html({ parent: wm.overlay, styles: { position: 'absolute', top: '50%', left: '50%', transform: 'translate(-50%, -50%)', color: 'white' } })\r\nwallpaper.innerHTML = 'You can also use the background as wallpaper or another window surface.'\r\n\r\nconst fps = new FPS()\r\nfunction update()\r\n{\r\n    fps.frame(false, true)\r\n    requestAnimationFrame(update)\r\n}"],"names":["Math","trimLeft","trimRight","tinyCounter","mathRound","round","mathMin","min","mathMax","max","mathRandom","random","tinycolor","color","opts","this","rgb","r","g","b","a","s","v","l","ok","format","replace","toLowerCase","match","named","names","matchers","exec","rgba","hsl","h","hsla","hsv","hsva","hex8","parseIntFromHex","convertHexToDecimal","hex6","hex4","hex3","stringInputToObject","isValidCSSUnit","bound01","String","substr","convertToPercentage","i","floor","f","p","q","t","mod","hsvToRgb","hue2rgb","hslToRgb","hasOwnProperty","boundAlpha","inputToRGB","_originalInput","_r","_g","_b","_a","_roundA","_format","_gradientType","gradientType","_ok","_tc_id","rgbToHsl","d","rgbToHsv","rgbToHex","allow3Char","hex","pad2","toString","charAt","join","rgbaToArgbHex","convertDecimalToHex","desaturate","amount","toHsl","clamp01","saturate","greyscale","lighten","brighten","toRgb","darken","spin","hue","complement","triad","tetrad","splitcomplement","analogous","results","slices","part","ret","push","monochromatic","toHsv","modification","prototype","isDark","getBrightness","isLight","isValid","getOriginalInput","getFormat","getAlpha","getLuminance","RsRGB","GsRGB","BsRGB","pow","setAlpha","value","toHsvString","toHslString","toHex","toHexString","toHex8","allow4Char","rgbaToHex","toHex8String","toRgbString","toPercentageRgb","toPercentageRgbString","toName","hexNames","toFilter","secondColor","hex8String","secondHex8String","formatSet","formattedString","hasAlpha","clone","_applyModification","fn","args","apply","concat","slice","call","arguments","_applyCombination","fromRatio","newColor","equals","color1","color2","mix","rgb1","rgb2","readability","c1","c2","isReadable","wcag2","wcag2Parms","out","parms","level","size","toUpperCase","validateWCAG2Parms","mostReadable","baseColor","colorList","includeFallbackColors","bestColor","bestScore","length","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","burntsienna","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","o","flipped","flip","parseFloat","isNaN","n","indexOf","isOnePointZero","processPercent","isPercentage","parseInt","abs","val","c","CSS_UNIT","PERMISSIVE_MATCH3","PERMISSIVE_MATCH4","RegExp","module","exports","window","_createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","Object","defineProperty","key","Constructor","protoProps","staticProps","STYLES","background","STYLES_FPS","padding","STYLES_METER","FPS","options","instance","TypeError","_classCallCheck","tolerance","meterWidth","meterHeight","meterLineHeight","div","document","createElement","Counter","[object Object]","side","findParent","appendChild","style","styles","name","test","getElementById","container","id","overflow","position","zIndex","pointerEvents","userSelect","body","arg","innerHTML","divFPS","meter","lastTime","frameNumber","lastUpdate","lastFPS","remove","style1","style2","_style","fpsSpan","span","innerText","text","stylesFPS","meterCanvas","display","width","height","stylesMeter","currentTime","performance","now","meterUpdate","percent","getContext","data","getImageData","putImageData","clearRect","fillStyle","Color","fillRect","get","set","_meter","divMeter","html","object","type","parent","assign","className","has","prefix","Events","EE","context","once","addListener","emitter","event","listener","evt","_events","_eventsCount","clearEvent","EventEmitter","create","__proto__","eventNames","events","getOwnPropertySymbols","listeners","handlers","ee","Array","listenerCount","emit","a1","a2","a3","a4","a5","len","removeListener","undefined","j","on","removeAllListeners","off","prefixed","defaultOptions","threshold","clicked","doubleClicked","doubleClickedTime","longClicked","longClickedTime","capture","clickDown","element","callback","Clicked","querySelector","mousedown","e","mouseup","mousemove","touchstart","touchmove","touchcancel","cancel","touchend","addEventListener","passive","console","warn","removeEventListener","down","touches","handleDown","changedTouches","screenX","screenY","x","y","lastX","lastY","pastThreshold","doubleClickedTimeout","clearTimeout","longClickedTimeout","preventDefault","handleClicks","pointerId","setTimeout","doubleClickedCancel","longClikedTimeout","Window","wm","super","_createWindow","_listeners","active","maximized","_closed","_restore","_moving","_resizing","_attachedToScreen","vertical","horziontal","noFocus","win","focus","titlebar","winTitlebar","backgroundColor","backgroundTitlebarActive","backgroundTitlebarInactive","closed","_buildTransform","transform","offsetWidth","offsetHeight","keepInside","bounds","right","left","bottom","top","maximizable","buttons","maximize","maximizeButton","overlay","restoreButton","sendToBack","sendToFront","close","open","title","_title","winTitle","move","innerWidth","innerHeight","border-radius","borderRadius","user-select","min-width","minWidth","min-height","minHeight","box-shadow","shadow","background-color","backgroundWindow","classNames","winBox","flex-direction","_createTitlebar","content","flex","overflow-x","overflow-y","resizable","_createResize","_downTitlebar","stopPropagation","_convertMoveEvent","pageX","pageY","_moved","align-items","justify-content","titlebarHeight","border","winTitleStyles","cursor","margin","font-size","font-weight","foregroundTitle","titleCenter","_createButtons","movable","winButtonGroup","padding-left","button","margin-left","background-size","background-repeat","opacity","foregroundButton","outline","closable","closeButton","resizeEdge","backgroundResize","_isTouchEvent","which","_stopMove","_stopResize","resize","TouchEvent","direction","location","horizontal","ignoreClosed","modal","z","windowOptions","openOnCreate","backgroundModal","SnapOptionsDefault","screen","windows","snap","spacing","indicator","Snap","highlights","showing","stopped","moveEnd","rect","clientWidth","clientHeight","distance","original","noSnap","rect2","getBoundingClientRect","noSpacing","isModal","screenMove","windowsMove","sort","find","adjust","minimized","scaleY","attachToScreen","scaleX","windowManagerOptions","quiet","log","_createDom","_open","_focus","_blur","_close","_move","_up","_snap","addWindow","index","assert","splice","_reorder","unshift","entry","save","order","load","isClosed","z-index","modalOverlay","blur","next","offsetTop","offsetLeft","onload","createWindow","minimizable","test2","textAlign","marginTop","onclick","createModal","buttonDiv","text-align","buttonAdd","center","test3","test4","test5","test7","update","fps","frame","requestAnimationFrame"],"mappings":"4GAIA,SAAUA,GAEV,IAAIC,EAAW,OACXC,EAAY,OACZC,EAAc,EACdC,EAAYJ,EAAKK,MACjBC,EAAUN,EAAKO,IACfC,EAAUR,EAAKS,IACfC,EAAaV,EAAKW,OAEtB,SAASC,EAAWC,EAAOC,GAMvB,GAHAA,EAAOA,GAAQ,IADfD,EAAQ,GAAkB,cAILD,EAClB,OAAOC,EAGV,KAAME,gBAAgBH,GAClB,OAAO,IAAIA,EAAUC,EAAOC,GAGhC,IAAIE,EAoRR,SAAoBH,GAEhB,IAAIG,EAAM,CAAEC,EAAG,EAAGC,EAAG,EAAGC,EAAG,GACvBC,EAAI,EACJC,EAAI,KACJC,EAAI,KACJC,EAAI,KACJC,GAAK,EACLC,GAAS,EAEO,iBAATZ,IACPA,EAywBR,SAA6BA,GAEzBA,EAAQA,EAAMa,QAAQzB,EAAS,IAAIyB,QAAQxB,EAAW,IAAIyB,cAC1D,IAaIC,EAbAC,GAAQ,EACZ,GAAIC,EAAMjB,GACNA,EAAQiB,EAAMjB,GACdgB,GAAQ,OAEP,GAAa,eAAThB,EACL,MAAO,CAAEI,EAAG,EAAGC,EAAG,EAAGC,EAAG,EAAGC,EAAG,EAAGK,OAAQ,QAQ7C,GAAKG,EAAQG,EAASf,IAAIgB,KAAKnB,GAC3B,MAAO,CAAEI,EAAGW,EAAM,GAAIV,EAAGU,EAAM,GAAIT,EAAGS,EAAM,IAEhD,GAAKA,EAAQG,EAASE,KAAKD,KAAKnB,GAC5B,MAAO,CAAEI,EAAGW,EAAM,GAAIV,EAAGU,EAAM,GAAIT,EAAGS,EAAM,GAAIR,EAAGQ,EAAM,IAE7D,GAAKA,EAAQG,EAASG,IAAIF,KAAKnB,GAC3B,MAAO,CAAEsB,EAAGP,EAAM,GAAIP,EAAGO,EAAM,GAAIL,EAAGK,EAAM,IAEhD,GAAKA,EAAQG,EAASK,KAAKJ,KAAKnB,GAC5B,MAAO,CAAEsB,EAAGP,EAAM,GAAIP,EAAGO,EAAM,GAAIL,EAAGK,EAAM,GAAIR,EAAGQ,EAAM,IAE7D,GAAKA,EAAQG,EAASM,IAAIL,KAAKnB,GAC3B,MAAO,CAAEsB,EAAGP,EAAM,GAAIP,EAAGO,EAAM,GAAIN,EAAGM,EAAM,IAEhD,GAAKA,EAAQG,EAASO,KAAKN,KAAKnB,GAC5B,MAAO,CAAEsB,EAAGP,EAAM,GAAIP,EAAGO,EAAM,GAAIN,EAAGM,EAAM,GAAIR,EAAGQ,EAAM,IAE7D,GAAKA,EAAQG,EAASQ,KAAKP,KAAKnB,GAC5B,MAAO,CACHI,EAAGuB,EAAgBZ,EAAM,IACzBV,EAAGsB,EAAgBZ,EAAM,IACzBT,EAAGqB,EAAgBZ,EAAM,IACzBR,EAAGqB,EAAoBb,EAAM,IAC7BH,OAAQI,EAAQ,OAAS,QAGjC,GAAKD,EAAQG,EAASW,KAAKV,KAAKnB,GAC5B,MAAO,CACHI,EAAGuB,EAAgBZ,EAAM,IACzBV,EAAGsB,EAAgBZ,EAAM,IACzBT,EAAGqB,EAAgBZ,EAAM,IACzBH,OAAQI,EAAQ,OAAS,OAGjC,GAAKD,EAAQG,EAASY,KAAKX,KAAKnB,GAC5B,MAAO,CACHI,EAAGuB,EAAgBZ,EAAM,GAAK,GAAKA,EAAM,IACzCV,EAAGsB,EAAgBZ,EAAM,GAAK,GAAKA,EAAM,IACzCT,EAAGqB,EAAgBZ,EAAM,GAAK,GAAKA,EAAM,IACzCR,EAAGqB,EAAoBb,EAAM,GAAK,GAAKA,EAAM,IAC7CH,OAAQI,EAAQ,OAAS,QAGjC,GAAKD,EAAQG,EAASa,KAAKZ,KAAKnB,GAC5B,MAAO,CACHI,EAAGuB,EAAgBZ,EAAM,GAAK,GAAKA,EAAM,IACzCV,EAAGsB,EAAgBZ,EAAM,GAAK,GAAKA,EAAM,IACzCT,EAAGqB,EAAgBZ,EAAM,GAAK,GAAKA,EAAM,IACzCH,OAAQI,EAAQ,OAAS,OAIjC,OAAO,EA/0BKgB,CAAoBhC,IAGZ,iBAATA,IACHiC,EAAejC,EAAMI,IAAM6B,EAAejC,EAAMK,IAAM4B,EAAejC,EAAMM,IAiDrEF,EAhDSJ,EAAMI,EAgDZC,EAhDeL,EAAMK,EAgDlBC,EAhDqBN,EAAMM,EAAvCH,EAiDD,CACHC,EAAqB,IAAlB8B,EAAQ9B,EAAG,KACdC,EAAqB,IAAlB6B,EAAQ7B,EAAG,KACdC,EAAqB,IAAlB4B,EAAQ5B,EAAG,MAnDVK,GAAK,EACLC,EAAwC,MAA/BuB,OAAOnC,EAAMI,GAAGgC,QAAQ,GAAa,OAAS,OAElDH,EAAejC,EAAMsB,IAAMW,EAAejC,EAAMQ,IAAMyB,EAAejC,EAAMS,IAChFD,EAAI6B,EAAoBrC,EAAMQ,GAC9BC,EAAI4B,EAAoBrC,EAAMS,GAC9BN,EAoJX,SAAkBmB,EAAGd,EAAGC,GAErBa,EAAsB,EAAlBY,EAAQZ,EAAG,KACfd,EAAI0B,EAAQ1B,EAAG,KACfC,EAAIyB,EAAQzB,EAAG,KAEf,IAAI6B,EAAInD,EAAKoD,MAAMjB,GACfkB,EAAIlB,EAAIgB,EACRG,EAAIhC,GAAK,EAAID,GACbkC,EAAIjC,GAAK,EAAI+B,EAAIhC,GACjBmC,EAAIlC,GAAK,GAAK,EAAI+B,GAAKhC,GACvBoC,EAAMN,EAAI,EAKd,MAAO,CAAElC,EAAO,IAJR,CAACK,EAAGiC,EAAGD,EAAGA,EAAGE,EAAGlC,GAAGmC,GAINvC,EAAO,IAHpB,CAACsC,EAAGlC,EAAGA,EAAGiC,EAAGD,EAAGA,GAAGG,GAGMtC,EAAO,IAFhC,CAACmC,EAAGA,EAAGE,EAAGlC,EAAGA,EAAGiC,GAAGE,IAlKbC,CAAS7C,EAAMsB,EAAGd,EAAGC,GAC3BE,GAAK,EACLC,EAAS,OAEJqB,EAAejC,EAAMsB,IAAMW,EAAejC,EAAMQ,IAAMyB,EAAejC,EAAMU,KAChFF,EAAI6B,EAAoBrC,EAAMQ,GAC9BE,EAAI2B,EAAoBrC,EAAMU,GAC9BP,EA6EZ,SAAkBmB,EAAGd,EAAGE,GACpB,IAAIN,EAAGC,EAAGC,EAMV,SAASwC,EAAQL,EAAGC,EAAGC,GAGnB,OAFGA,EAAI,IAAGA,GAAK,GACZA,EAAI,IAAGA,GAAK,GACZA,EAAI,EAAE,EAAUF,EAAc,GAATC,EAAID,GAASE,EAClCA,EAAI,GAAYD,EAChBC,EAAI,EAAE,EAAUF,GAAKC,EAAID,IAAM,EAAE,EAAIE,GAAK,EACtCF,EAGX,GAbAnB,EAAIY,EAAQZ,EAAG,KACfd,EAAI0B,EAAQ1B,EAAG,KACfE,EAAIwB,EAAQxB,EAAG,KAWN,IAANF,EACCJ,EAAIC,EAAIC,EAAII,MAEX,CACD,IAAIgC,EAAIhC,EAAI,GAAMA,GAAK,EAAIF,GAAKE,EAAIF,EAAIE,EAAIF,EACxCiC,EAAI,EAAI/B,EAAIgC,EAChBtC,EAAI0C,EAAQL,EAAGC,EAAGpB,EAAI,EAAE,GACxBjB,EAAIyC,EAAQL,EAAGC,EAAGpB,GAClBhB,EAAIwC,EAAQL,EAAGC,EAAGpB,EAAI,EAAE,GAG5B,MAAO,CAAElB,EAAO,IAAJA,EAASC,EAAO,IAAJA,EAASC,EAAO,IAAJA,GAxGtByC,CAAS/C,EAAMsB,EAAGd,EAAGE,GAC3BC,GAAK,EACLC,EAAS,OAGTZ,EAAMgD,eAAe,OACrBzC,EAAIP,EAAMO,IA4BtB,IAAkBH,EAAGC,EAAGC,EAtBpB,OAFAC,EAAI0C,EAAW1C,GAER,CACHI,GAAIA,EACJC,OAAQZ,EAAMY,QAAUA,EACxBR,EAAGX,EAAQ,IAAKE,EAAQQ,EAAIC,EAAG,IAC/BC,EAAGZ,EAAQ,IAAKE,EAAQQ,EAAIE,EAAG,IAC/BC,EAAGb,EAAQ,IAAKE,EAAQQ,EAAIG,EAAG,IAC/BC,EAAGA,GApUG2C,CAAWlD,GACrBE,KAAKiD,eAAiBnD,EACtBE,KAAKkD,GAAKjD,EAAIC,EACdF,KAAKmD,GAAKlD,EAAIE,EACdH,KAAKoD,GAAKnD,EAAIG,EACdJ,KAAKqD,GAAKpD,EAAII,EACdL,KAAKsD,QAAUjE,EAAU,IAAIW,KAAKqD,IAAM,IACxCrD,KAAKuD,QAAUxD,EAAKW,QAAUT,EAAIS,OAClCV,KAAKwD,cAAgBzD,EAAK0D,aAMtBzD,KAAKkD,GAAK,IAAKlD,KAAKkD,GAAK7D,EAAUW,KAAKkD,KACxClD,KAAKmD,GAAK,IAAKnD,KAAKmD,GAAK9D,EAAUW,KAAKmD,KACxCnD,KAAKoD,GAAK,IAAKpD,KAAKoD,GAAK/D,EAAUW,KAAKoD,KAE5CpD,KAAK0D,IAAMzD,EAAIQ,GACfT,KAAK2D,OAASvE,IA6UlB,SAASwE,EAAS1D,EAAGC,EAAGC,GAEpBF,EAAI8B,EAAQ9B,EAAG,KACfC,EAAI6B,EAAQ7B,EAAG,KACfC,EAAI4B,EAAQ5B,EAAG,KAEf,IACIgB,EAAGd,EADHZ,EAAMD,EAAQS,EAAGC,EAAGC,GAAIZ,EAAMD,EAAQW,EAAGC,EAAGC,GACtCI,GAAKd,EAAMF,GAAO,EAE5B,GAAGE,GAAOF,EACN4B,EAAId,EAAI,MAEP,CACD,IAAIuD,EAAInE,EAAMF,EAEd,OADAc,EAAIE,EAAI,GAAMqD,GAAK,EAAInE,EAAMF,GAAOqE,GAAKnE,EAAMF,GACxCE,GACH,KAAKQ,EAAGkB,GAAKjB,EAAIC,GAAKyD,GAAK1D,EAAIC,EAAI,EAAI,GAAI,MAC3C,KAAKD,EAAGiB,GAAKhB,EAAIF,GAAK2D,EAAI,EAAG,MAC7B,KAAKzD,EAAGgB,GAAKlB,EAAIC,GAAK0D,EAAI,EAG9BzC,GAAK,EAGT,MAAO,CAAEA,EAAGA,EAAGd,EAAGA,EAAGE,EAAGA,GAyC5B,SAASsD,EAAS5D,EAAGC,EAAGC,GAEpBF,EAAI8B,EAAQ9B,EAAG,KACfC,EAAI6B,EAAQ7B,EAAG,KACfC,EAAI4B,EAAQ5B,EAAG,KAEf,IACIgB,EAAGd,EADHZ,EAAMD,EAAQS,EAAGC,EAAGC,GAAIZ,EAAMD,EAAQW,EAAGC,EAAGC,GACtCG,EAAIb,EAEVmE,EAAInE,EAAMF,EAGd,GAFAc,EAAY,IAARZ,EAAY,EAAImE,EAAInE,EAErBA,GAAOF,EACN4B,EAAI,MAEH,CACD,OAAO1B,GACH,KAAKQ,EAAGkB,GAAKjB,EAAIC,GAAKyD,GAAK1D,EAAIC,EAAI,EAAI,GAAI,MAC3C,KAAKD,EAAGiB,GAAKhB,EAAIF,GAAK2D,EAAI,EAAG,MAC7B,KAAKzD,EAAGgB,GAAKlB,EAAIC,GAAK0D,EAAI,EAE9BzC,GAAK,EAET,MAAO,CAAEA,EAAGA,EAAGd,EAAGA,EAAGC,EAAGA,GA8B5B,SAASwD,EAAS7D,EAAGC,EAAGC,EAAG4D,GAEvB,IAAIC,EAAM,CACNC,EAAK7E,EAAUa,GAAGiE,SAAS,KAC3BD,EAAK7E,EAAUc,GAAGgE,SAAS,KAC3BD,EAAK7E,EAAUe,GAAG+D,SAAS,MAI/B,OAAIH,GAAcC,EAAI,GAAGG,OAAO,IAAMH,EAAI,GAAGG,OAAO,IAAMH,EAAI,GAAGG,OAAO,IAAMH,EAAI,GAAGG,OAAO,IAAMH,EAAI,GAAGG,OAAO,IAAMH,EAAI,GAAGG,OAAO,GACzHH,EAAI,GAAGG,OAAO,GAAKH,EAAI,GAAGG,OAAO,GAAKH,EAAI,GAAGG,OAAO,GAGxDH,EAAII,KAAK,IA2BpB,SAASC,EAAcpE,EAAGC,EAAGC,EAAGC,GAS5B,MAPU,CACN6D,EAAKK,EAAoBlE,IACzB6D,EAAK7E,EAAUa,GAAGiE,SAAS,KAC3BD,EAAK7E,EAAUc,GAAGgE,SAAS,KAC3BD,EAAK7E,EAAUe,GAAG+D,SAAS,MAGpBE,KAAK,IAwBpB,SAASG,EAAW1E,EAAO2E,GACvBA,EAAqB,IAAXA,EAAgB,EAAKA,GAAU,GACzC,IAAItD,EAAMtB,EAAUC,GAAO4E,QAG3B,OAFAvD,EAAIb,GAAKmE,EAAS,IAClBtD,EAAIb,EAAIqE,EAAQxD,EAAIb,GACbT,EAAUsB,GAGrB,SAASyD,EAAS9E,EAAO2E,GACrBA,EAAqB,IAAXA,EAAgB,EAAKA,GAAU,GACzC,IAAItD,EAAMtB,EAAUC,GAAO4E,QAG3B,OAFAvD,EAAIb,GAAKmE,EAAS,IAClBtD,EAAIb,EAAIqE,EAAQxD,EAAIb,GACbT,EAAUsB,GAGrB,SAAS0D,EAAU/E,GACf,OAAOD,EAAUC,GAAO0E,WAAW,KAGvC,SAASM,EAAShF,EAAO2E,GACrBA,EAAqB,IAAXA,EAAgB,EAAKA,GAAU,GACzC,IAAItD,EAAMtB,EAAUC,GAAO4E,QAG3B,OAFAvD,EAAIX,GAAKiE,EAAS,IAClBtD,EAAIX,EAAImE,EAAQxD,EAAIX,GACbX,EAAUsB,GAGrB,SAAS4D,EAASjF,EAAO2E,GACrBA,EAAqB,IAAXA,EAAgB,EAAKA,GAAU,GACzC,IAAIxE,EAAMJ,EAAUC,GAAOkF,QAI3B,OAHA/E,EAAIC,EAAIT,EAAQ,EAAGF,EAAQ,IAAKU,EAAIC,EAAIb,GAAmBoF,EAAS,IAAlB,OAClDxE,EAAIE,EAAIV,EAAQ,EAAGF,EAAQ,IAAKU,EAAIE,EAAId,GAAmBoF,EAAS,IAAlB,OAClDxE,EAAIG,EAAIX,EAAQ,EAAGF,EAAQ,IAAKU,EAAIG,EAAIf,GAAmBoF,EAAS,IAAlB,OAC3C5E,EAAUI,GAGrB,SAASgF,EAAQnF,EAAO2E,GACpBA,EAAqB,IAAXA,EAAgB,EAAKA,GAAU,GACzC,IAAItD,EAAMtB,EAAUC,GAAO4E,QAG3B,OAFAvD,EAAIX,GAAKiE,EAAS,IAClBtD,EAAIX,EAAImE,EAAQxD,EAAIX,GACbX,EAAUsB,GAKrB,SAAS+D,EAAKpF,EAAO2E,GACjB,IAAItD,EAAMtB,EAAUC,GAAO4E,QACvBS,GAAOhE,EAAIC,EAAIqD,GAAU,IAE7B,OADAtD,EAAIC,EAAI+D,EAAM,EAAI,IAAMA,EAAMA,EACvBtF,EAAUsB,GAQrB,SAASiE,EAAWtF,GAChB,IAAIqB,EAAMtB,EAAUC,GAAO4E,QAE3B,OADAvD,EAAIC,GAAKD,EAAIC,EAAI,KAAO,IACjBvB,EAAUsB,GAGrB,SAASkE,EAAMvF,GACX,IAAIqB,EAAMtB,EAAUC,GAAO4E,QACvBtD,EAAID,EAAIC,EACZ,MAAO,CACHvB,EAAUC,GACVD,EAAU,CAAEuB,GAAIA,EAAI,KAAO,IAAKd,EAAGa,EAAIb,EAAGE,EAAGW,EAAIX,IACjDX,EAAU,CAAEuB,GAAIA,EAAI,KAAO,IAAKd,EAAGa,EAAIb,EAAGE,EAAGW,EAAIX,KAIzD,SAAS8E,EAAOxF,GACZ,IAAIqB,EAAMtB,EAAUC,GAAO4E,QACvBtD,EAAID,EAAIC,EACZ,MAAO,CACHvB,EAAUC,GACVD,EAAU,CAAEuB,GAAIA,EAAI,IAAM,IAAKd,EAAGa,EAAIb,EAAGE,EAAGW,EAAIX,IAChDX,EAAU,CAAEuB,GAAIA,EAAI,KAAO,IAAKd,EAAGa,EAAIb,EAAGE,EAAGW,EAAIX,IACjDX,EAAU,CAAEuB,GAAIA,EAAI,KAAO,IAAKd,EAAGa,EAAIb,EAAGE,EAAGW,EAAIX,KAIzD,SAAS+E,EAAgBzF,GACrB,IAAIqB,EAAMtB,EAAUC,GAAO4E,QACvBtD,EAAID,EAAIC,EACZ,MAAO,CACHvB,EAAUC,GACVD,EAAU,CAAEuB,GAAIA,EAAI,IAAM,IAAKd,EAAGa,EAAIb,EAAGE,EAAGW,EAAIX,IAChDX,EAAU,CAAEuB,GAAIA,EAAI,KAAO,IAAKd,EAAGa,EAAIb,EAAGE,EAAGW,EAAIX,KAIzD,SAASgF,EAAU1F,EAAO2F,EAASC,GAC/BD,EAAUA,GAAW,EACrBC,EAASA,GAAU,GAEnB,IAAIvE,EAAMtB,EAAUC,GAAO4E,QACvBiB,EAAO,IAAMD,EACbE,EAAM,CAAC/F,EAAUC,IAErB,IAAKqB,EAAIC,GAAMD,EAAIC,GAAKuE,EAAOF,GAAW,GAAM,KAAO,MAAOA,GAC1DtE,EAAIC,GAAKD,EAAIC,EAAIuE,GAAQ,IACzBC,EAAIC,KAAKhG,EAAUsB,IAEvB,OAAOyE,EAGX,SAASE,EAAchG,EAAO2F,GAC1BA,EAAUA,GAAW,EAMrB,IALA,IAAInE,EAAMzB,EAAUC,GAAOiG,QACvB3E,EAAIE,EAAIF,EAAGd,EAAIgB,EAAIhB,EAAGC,EAAIe,EAAIf,EAC9BqF,EAAM,GACNI,EAAe,EAAIP,EAEhBA,KACHG,EAAIC,KAAKhG,EAAU,CAAEuB,EAAGA,EAAGd,EAAGA,EAAGC,EAAGA,KACpCA,GAAKA,EAAIyF,GAAgB,EAG7B,OAAOJ,EApoBX/F,EAAUoG,UAAY,CAClBC,OAAQ,WACJ,OAAOlG,KAAKmG,gBAAkB,KAElCC,QAAS,WACL,OAAQpG,KAAKkG,UAEjBG,QAAS,WACL,OAAOrG,KAAK0D,KAEhB4C,iBAAkB,WAChB,OAAOtG,KAAKiD,gBAEdsD,UAAW,WACP,OAAOvG,KAAKuD,SAEhBiD,SAAU,WACN,OAAOxG,KAAKqD,IAEhB8C,cAAe,WAEX,IAAIlG,EAAMD,KAAKgF,QACf,OAAgB,IAAR/E,EAAIC,EAAkB,IAARD,EAAIE,EAAkB,IAARF,EAAIG,GAAW,KAEvDqG,aAAc,WAEV,IACIC,EAAOC,EAAOC,EADd3G,EAAMD,KAAKgF,QASf,OAPA0B,EAAQzG,EAAIC,EAAE,IACdyG,EAAQ1G,EAAIE,EAAE,IACdyG,EAAQ3G,EAAIG,EAAE,IAKN,OAHJsG,GAAS,OAAcA,EAAQ,MAAkBzH,EAAK4H,KAAMH,EAAQ,MAAS,MAAQ,MAGlE,OAFnBC,GAAS,OAAcA,EAAQ,MAAkB1H,EAAK4H,KAAMF,EAAQ,MAAS,MAAQ,MAEnD,OADlCC,GAAS,OAAcA,EAAQ,MAAkB3H,EAAK4H,KAAMD,EAAQ,MAAS,MAAQ,OAG7FE,SAAU,SAASC,GAGf,OAFA/G,KAAKqD,GAAKN,EAAWgE,GACrB/G,KAAKsD,QAAUjE,EAAU,IAAIW,KAAKqD,IAAM,IACjCrD,MAEX+F,MAAO,WACH,IAAIzE,EAAMwC,EAAS9D,KAAKkD,GAAIlD,KAAKmD,GAAInD,KAAKoD,IAC1C,MAAO,CAAEhC,EAAW,IAARE,EAAIF,EAASd,EAAGgB,EAAIhB,EAAGC,EAAGe,EAAIf,EAAGF,EAAGL,KAAKqD,KAEzD2D,YAAa,WACT,IAAI1F,EAAMwC,EAAS9D,KAAKkD,GAAIlD,KAAKmD,GAAInD,KAAKoD,IACtChC,EAAI/B,EAAkB,IAARiC,EAAIF,GAAUd,EAAIjB,EAAkB,IAARiC,EAAIhB,GAAUC,EAAIlB,EAAkB,IAARiC,EAAIf,GAC9E,OAAmB,GAAXP,KAAKqD,GACX,OAAUjC,EAAI,KAAOd,EAAI,MAAQC,EAAI,KACrC,QAAUa,EAAI,KAAOd,EAAI,MAAQC,EAAI,MAAOP,KAAKsD,QAAU,KAEjEoB,MAAO,WACH,IAAIvD,EAAMyC,EAAS5D,KAAKkD,GAAIlD,KAAKmD,GAAInD,KAAKoD,IAC1C,MAAO,CAAEhC,EAAW,IAARD,EAAIC,EAASd,EAAGa,EAAIb,EAAGE,EAAGW,EAAIX,EAAGH,EAAGL,KAAKqD,KAEzD4D,YAAa,WACT,IAAI9F,EAAMyC,EAAS5D,KAAKkD,GAAIlD,KAAKmD,GAAInD,KAAKoD,IACtChC,EAAI/B,EAAkB,IAAR8B,EAAIC,GAAUd,EAAIjB,EAAkB,IAAR8B,EAAIb,GAAUE,EAAInB,EAAkB,IAAR8B,EAAIX,GAC9E,OAAmB,GAAXR,KAAKqD,GACX,OAAUjC,EAAI,KAAOd,EAAI,MAAQE,EAAI,KACrC,QAAUY,EAAI,KAAOd,EAAI,MAAQE,EAAI,MAAOR,KAAKsD,QAAU,KAEjE4D,MAAO,SAASlD,GACZ,OAAOD,EAAS/D,KAAKkD,GAAIlD,KAAKmD,GAAInD,KAAKoD,GAAIY,IAE/CmD,YAAa,SAASnD,GAClB,MAAO,IAAMhE,KAAKkH,MAAMlD,IAE5BoD,OAAQ,SAASC,GACb,OA6YR,SAAmBnH,EAAGC,EAAGC,EAAGC,EAAGgH,GAE3B,IAAIpD,EAAM,CACNC,EAAK7E,EAAUa,GAAGiE,SAAS,KAC3BD,EAAK7E,EAAUc,GAAGgE,SAAS,KAC3BD,EAAK7E,EAAUe,GAAG+D,SAAS,KAC3BD,EAAKK,EAAoBlE,KAI7B,GAAIgH,GAAcpD,EAAI,GAAGG,OAAO,IAAMH,EAAI,GAAGG,OAAO,IAAMH,EAAI,GAAGG,OAAO,IAAMH,EAAI,GAAGG,OAAO,IAAMH,EAAI,GAAGG,OAAO,IAAMH,EAAI,GAAGG,OAAO,IAAMH,EAAI,GAAGG,OAAO,IAAMH,EAAI,GAAGG,OAAO,GACxK,OAAOH,EAAI,GAAGG,OAAO,GAAKH,EAAI,GAAGG,OAAO,GAAKH,EAAI,GAAGG,OAAO,GAAKH,EAAI,GAAGG,OAAO,GAGlF,OAAOH,EAAII,KAAK,IA3ZLiD,CAAUtH,KAAKkD,GAAIlD,KAAKmD,GAAInD,KAAKoD,GAAIpD,KAAKqD,GAAIgE,IAEzDE,aAAc,SAASF,GACnB,MAAO,IAAMrH,KAAKoH,OAAOC,IAE7BrC,MAAO,WACH,MAAO,CAAE9E,EAAGb,EAAUW,KAAKkD,IAAK/C,EAAGd,EAAUW,KAAKmD,IAAK/C,EAAGf,EAAUW,KAAKoD,IAAK/C,EAAGL,KAAKqD,KAE1FmE,YAAa,WACT,OAAmB,GAAXxH,KAAKqD,GACX,OAAUhE,EAAUW,KAAKkD,IAAM,KAAO7D,EAAUW,KAAKmD,IAAM,KAAO9D,EAAUW,KAAKoD,IAAM,IACvF,QAAU/D,EAAUW,KAAKkD,IAAM,KAAO7D,EAAUW,KAAKmD,IAAM,KAAO9D,EAAUW,KAAKoD,IAAM,KAAOpD,KAAKsD,QAAU,KAEnHmE,gBAAiB,WACb,MAAO,CAAEvH,EAAGb,EAAkC,IAAxB2C,EAAQhC,KAAKkD,GAAI,MAAc,IAAK/C,EAAGd,EAAkC,IAAxB2C,EAAQhC,KAAKmD,GAAI,MAAc,IAAK/C,EAAGf,EAAkC,IAAxB2C,EAAQhC,KAAKoD,GAAI,MAAc,IAAK/C,EAAGL,KAAKqD,KAExKqE,sBAAuB,WACnB,OAAmB,GAAX1H,KAAKqD,GACX,OAAUhE,EAAkC,IAAxB2C,EAAQhC,KAAKkD,GAAI,MAAc,MAAQ7D,EAAkC,IAAxB2C,EAAQhC,KAAKmD,GAAI,MAAc,MAAQ9D,EAAkC,IAAxB2C,EAAQhC,KAAKoD,GAAI,MAAc,KACrJ,QAAU/D,EAAkC,IAAxB2C,EAAQhC,KAAKkD,GAAI,MAAc,MAAQ7D,EAAkC,IAAxB2C,EAAQhC,KAAKmD,GAAI,MAAc,MAAQ9D,EAAkC,IAAxB2C,EAAQhC,KAAKoD,GAAI,MAAc,MAAQpD,KAAKsD,QAAU,KAElLqE,OAAQ,WACJ,OAAgB,IAAZ3H,KAAKqD,GACE,gBAGPrD,KAAKqD,GAAK,KAIPuE,EAAS7D,EAAS/D,KAAKkD,GAAIlD,KAAKmD,GAAInD,KAAKoD,IAAI,MAAU,IAElEyE,SAAU,SAASC,GACf,IAAIC,EAAa,IAAMzD,EAActE,KAAKkD,GAAIlD,KAAKmD,GAAInD,KAAKoD,GAAIpD,KAAKqD,IACjE2E,EAAmBD,EACnBtE,EAAezD,KAAKwD,cAAgB,qBAAuB,GAE/D,GAAIsE,EAAa,CACb,IAAIxH,EAAIT,EAAUiI,GAClBE,EAAmB,IAAM1D,EAAchE,EAAE4C,GAAI5C,EAAE6C,GAAI7C,EAAE8C,GAAI9C,EAAE+C,IAG/D,MAAO,8CAA8CI,EAAa,iBAAiBsE,EAAW,gBAAgBC,EAAiB,KAEnI7D,SAAU,SAASzD,GACf,IAAIuH,IAAcvH,EAClBA,EAASA,GAAUV,KAAKuD,QAExB,IAAI2E,GAAkB,EAClBC,EAAWnI,KAAKqD,GAAK,GAAKrD,KAAKqD,IAAM,EAGzC,OAFwB4E,IAAaE,GAAwB,QAAXzH,GAA+B,SAAXA,GAAgC,SAAXA,GAAgC,SAAXA,GAAgC,SAAXA,GAAgC,SAAXA,GAU3I,QAAXA,IACAwH,EAAkBlI,KAAKwH,eAEZ,SAAX9G,IACAwH,EAAkBlI,KAAK0H,yBAEZ,QAAXhH,GAA+B,SAAXA,IACpBwH,EAAkBlI,KAAKmH,eAEZ,SAAXzG,IACAwH,EAAkBlI,KAAKmH,aAAY,IAExB,SAAXzG,IACAwH,EAAkBlI,KAAKuH,cAAa,IAEzB,SAAX7G,IACAwH,EAAkBlI,KAAKuH,gBAEZ,SAAX7G,IACAwH,EAAkBlI,KAAK2H,UAEZ,QAAXjH,IACAwH,EAAkBlI,KAAKiH,eAEZ,QAAXvG,IACAwH,EAAkBlI,KAAKgH,eAGpBkB,GAAmBlI,KAAKmH,eAjCZ,SAAXzG,GAAiC,IAAZV,KAAKqD,GACnBrD,KAAK2H,SAET3H,KAAKwH,eAgCpBY,MAAO,WACH,OAAOvI,EAAUG,KAAKmE,aAG1BkE,mBAAoB,SAASC,EAAIC,GAC7B,IAAIzI,EAAQwI,EAAGE,MAAM,KAAM,CAACxI,MAAMyI,OAAO,GAAGC,MAAMC,KAAKJ,KAKvD,OAJAvI,KAAKkD,GAAKpD,EAAMoD,GAChBlD,KAAKmD,GAAKrD,EAAMqD,GAChBnD,KAAKoD,GAAKtD,EAAMsD,GAChBpD,KAAK8G,SAAShH,EAAMuD,IACbrD,MAEX8E,QAAS,WACL,OAAO9E,KAAKqI,mBAAmBvD,EAAS8D,YAE5C7D,SAAU,WACN,OAAO/E,KAAKqI,mBAAmBtD,EAAU6D,YAE7C3D,OAAQ,WACJ,OAAOjF,KAAKqI,mBAAmBpD,EAAQ2D,YAE3CpE,WAAY,WACR,OAAOxE,KAAKqI,mBAAmB7D,EAAYoE,YAE/ChE,SAAU,WACN,OAAO5E,KAAKqI,mBAAmBzD,EAAUgE,YAE7C/D,UAAW,WACP,OAAO7E,KAAKqI,mBAAmBxD,EAAW+D,YAE9C1D,KAAM,WACF,OAAOlF,KAAKqI,mBAAmBnD,EAAM0D,YAGzCC,kBAAmB,SAASP,EAAIC,GAC5B,OAAOD,EAAGE,MAAM,KAAM,CAACxI,MAAMyI,OAAO,GAAGC,MAAMC,KAAKJ,MAEtD/C,UAAW,WACP,OAAOxF,KAAK6I,kBAAkBrD,EAAWoD,YAE7CxD,WAAY,WACR,OAAOpF,KAAK6I,kBAAkBzD,EAAYwD,YAE9C9C,cAAe,WACX,OAAO9F,KAAK6I,kBAAkB/C,EAAe8C,YAEjDrD,gBAAiB,WACb,OAAOvF,KAAK6I,kBAAkBtD,EAAiBqD,YAEnDvD,MAAO,WACH,OAAOrF,KAAK6I,kBAAkBxD,EAAOuD,YAEzCtD,OAAQ,WACJ,OAAOtF,KAAK6I,kBAAkBvD,EAAQsD,aAM9C/I,EAAUiJ,UAAY,SAAShJ,EAAOC,GAClC,GAAoB,iBAATD,EAAmB,CAC1B,IAAIiJ,EAAW,GACf,IAAK,IAAI3G,KAAKtC,EACNA,EAAMgD,eAAeV,KAEjB2G,EAAS3G,GADH,MAANA,EACctC,EAAMsC,GAGND,EAAoBrC,EAAMsC,KAIpDtC,EAAQiJ,EAGZ,OAAOlJ,EAAUC,EAAOC,IA0Q5BF,EAAUmJ,OAAS,SAAUC,EAAQC,GACjC,SAAKD,IAAWC,IACTrJ,EAAUoJ,GAAQzB,eAAiB3H,EAAUqJ,GAAQ1B,eAGhE3H,EAAUD,OAAS,WACf,OAAOC,EAAUiJ,UAAU,CACvB5I,EAAGP,IACHQ,EAAGR,IACHS,EAAGT,OA2IXE,EAAUsJ,IAAM,SAASF,EAAQC,EAAQzE,GACrCA,EAAqB,IAAXA,EAAgB,EAAKA,GAAU,GAEzC,IAAI2E,EAAOvJ,EAAUoJ,GAAQjE,QACzBqE,EAAOxJ,EAAUqJ,GAAQlE,QAEzBzC,EAAIkC,EAAS,IASjB,OAAO5E,EAPI,CACPK,GAAKmJ,EAAKnJ,EAAIkJ,EAAKlJ,GAAKqC,EAAK6G,EAAKlJ,EAClCC,GAAKkJ,EAAKlJ,EAAIiJ,EAAKjJ,GAAKoC,EAAK6G,EAAKjJ,EAClCC,GAAKiJ,EAAKjJ,EAAIgJ,EAAKhJ,GAAKmC,EAAK6G,EAAKhJ,EAClCC,GAAKgJ,EAAKhJ,EAAI+I,EAAK/I,GAAKkC,EAAK6G,EAAK/I,KAa1CR,EAAUyJ,YAAc,SAASL,EAAQC,GACrC,IAAIK,EAAK1J,EAAUoJ,GACfO,EAAK3J,EAAUqJ,GACnB,OAAQjK,EAAKS,IAAI6J,EAAG9C,eAAe+C,EAAG/C,gBAAgB,MAASxH,EAAKO,IAAI+J,EAAG9C,eAAe+C,EAAG/C,gBAAgB,MAajH5G,EAAU4J,WAAa,SAASR,EAAQC,EAAQQ,GAC5C,IACIC,EAAYC,EADZN,EAAczJ,EAAUyJ,YAAYL,EAAQC,GAMhD,OAHAU,GAAM,GAEND,EAkaJ,SAA4BE,GAGxB,IAAIC,EAAOC,EAEXD,IADAD,EAAQA,GAAS,CAACC,MAAQ,KAAMC,KAAO,UACxBD,OAAS,MAAME,cAC9BD,GAAQF,EAAME,MAAQ,SAASnJ,cACjB,OAAVkJ,GAA4B,QAAVA,IAClBA,EAAQ,MAEC,UAATC,GAA6B,UAATA,IACpBA,EAAO,SAEX,MAAO,CAACD,MAAQA,EAAOC,KAAOA,GA/ajBE,CAAmBP,IACbI,MAAQH,EAAWI,MAClC,IAAK,UACL,IAAK,WACDH,EAAMN,GAAe,IACrB,MACJ,IAAK,UACDM,EAAMN,GAAe,EACrB,MACJ,IAAK,WACDM,EAAMN,GAAe,EAG7B,OAAOM,GAaX/J,EAAUqK,aAAe,SAASC,EAAWC,EAAW7B,GACpD,IAEIe,EACAe,EAAuBP,EAAOC,EAH9BO,EAAY,KACZC,EAAY,EAIhBF,GADA9B,EAAOA,GAAQ,IACc8B,sBAC7BP,EAAQvB,EAAKuB,MACbC,EAAOxB,EAAKwB,KAEZ,IAAK,IAAI3H,EAAG,EAAGA,EAAIgI,EAAUI,OAASpI,KAClCkH,EAAczJ,EAAUyJ,YAAYa,EAAWC,EAAUhI,KACvCmI,IACdA,EAAYjB,EACZgB,EAAYzK,EAAUuK,EAAUhI,KAIxC,OAAIvC,EAAU4J,WAAWU,EAAWG,EAAW,CAACR,MAAQA,EAAMC,KAAOA,MAAWM,EACrEC,GAGP/B,EAAK8B,uBAAsB,EACpBxK,EAAUqK,aAAaC,EAAU,CAAC,OAAQ,QAAQ5B,KAQjE,IAAIxH,EAAQlB,EAAUkB,MAAQ,CAC1B0J,UAAW,SACXC,aAAc,SACdC,KAAM,MACNC,WAAY,SACZC,MAAO,SACPC,MAAO,SACPC,OAAQ,SACRC,MAAO,MACPC,eAAgB,SAChBC,KAAM,MACNC,WAAY,SACZC,MAAO,SACPC,UAAW,SACXC,YAAa,SACbC,UAAW,SACXC,WAAY,SACZC,UAAW,SACXC,MAAO,SACPC,eAAgB,SAChBC,SAAU,SACVC,QAAS,SACTC,KAAM,MACNC,SAAU,SACVC,SAAU,SACVC,cAAe,SACfC,SAAU,SACVC,UAAW,SACXC,SAAU,SACVC,UAAW,SACXC,YAAa,SACbC,eAAgB,SAChBC,WAAY,SACZC,WAAY,SACZC,QAAS,SACTC,WAAY,SACZC,aAAc,SACdC,cAAe,SACfC,cAAe,SACfC,cAAe,SACfC,cAAe,SACfC,WAAY,SACZC,SAAU,SACVC,YAAa,SACbC,QAAS,SACTC,QAAS,SACTC,WAAY,SACZC,UAAW,SACXC,YAAa,SACbC,YAAa,SACbC,QAAS,MACTC,UAAW,SACXC,WAAY,SACZC,KAAM,SACNC,UAAW,SACXC,KAAM,SACNC,MAAO,SACPC,YAAa,SACbC,KAAM,SACNC,SAAU,SACVC,QAAS,SACTC,UAAW,SACXC,OAAQ,SACRC,MAAO,SACPC,MAAO,SACPC,SAAU,SACVC,cAAe,SACfC,UAAW,SACXC,aAAc,SACdC,UAAW,SACXC,WAAY,SACZC,UAAW,SACXC,qBAAsB,SACtBC,UAAW,SACXC,WAAY,SACZC,UAAW,SACXC,UAAW,SACXC,YAAa,SACbC,cAAe,SACfC,aAAc,SACdC,eAAgB,MAChBC,eAAgB,MAChBC,eAAgB,SAChBC,YAAa,SACbC,KAAM,MACNC,UAAW,SACXC,MAAO,SACPC,QAAS,MACTC,OAAQ,SACRC,iBAAkB,SAClBC,WAAY,SACZC,aAAc,SACdC,aAAc,SACdC,eAAgB,SAChBC,gBAAiB,SACjBC,kBAAmB,SACnBC,gBAAiB,SACjBC,gBAAiB,SACjBC,aAAc,SACdC,UAAW,SACXC,UAAW,SACXC,SAAU,SACVC,YAAa,SACbC,KAAM,SACNC,QAAS,SACTC,MAAO,SACPC,UAAW,SACXC,OAAQ,SACRC,UAAW,SACXC,OAAQ,SACRC,cAAe,SACfC,UAAW,SACXC,cAAe,SACfC,cAAe,SACfC,WAAY,SACZC,UAAW,SACXC,KAAM,SACNC,KAAM,SACNC,KAAM,SACNC,WAAY,SACZC,OAAQ,SACRC,cAAe,SACfC,IAAK,MACLC,UAAW,SACXC,UAAW,SACXC,YAAa,SACbC,OAAQ,SACRC,WAAY,SACZC,SAAU,SACVC,SAAU,SACVC,OAAQ,SACRC,OAAQ,SACRC,QAAS,SACTC,UAAW,SACXC,UAAW,SACXC,UAAW,SACXC,KAAM,SACNC,YAAa,SACbC,UAAW,SACXC,IAAK,SACLC,KAAM,SACNC,QAAS,SACTC,OAAQ,SACRC,UAAW,SACXC,OAAQ,SACRC,MAAO,SACPC,MAAO,MACPC,WAAY,SACZC,OAAQ,MACRC,YAAa,UAIbjM,EAAW/H,EAAU+H,SAOzB,SAAckM,GACV,IAAIC,EAAU,GACd,IAAK,IAAI3R,KAAK0R,EACNA,EAAEhR,eAAeV,KACjB2R,EAAQD,EAAE1R,IAAMA,GAGxB,OAAO2R,EAdyBC,CAAKjT,GAkBzC,SAASgC,EAAW1C,GAOhB,OANAA,EAAI4T,WAAW5T,IAEX6T,MAAM7T,IAAMA,EAAI,GAAKA,EAAI,KACzBA,EAAI,GAGDA,EAIX,SAAS2B,EAAQmS,EAAGzU,IAgCpB,SAAwByU,GACpB,MAAmB,iBAALA,IAAoC,GAAnBA,EAAEC,QAAQ,MAAgC,IAAlBH,WAAWE,IAhC9DE,CAAeF,KAAMA,EAAI,QAE7B,IAAIG,EAkCR,SAAsBH,GAClB,MAAoB,iBAANA,IAAqC,GAAnBA,EAAEC,QAAQ,KAnCrBG,CAAaJ,GASlC,OARAA,EAAI5U,EAAQG,EAAKD,EAAQ,EAAGwU,WAAWE,KAGnCG,IACAH,EAAIK,SAASL,EAAIzU,EAAK,IAAM,KAI3BT,EAAKwV,IAAIN,EAAIzU,GAAO,KACd,EAIHyU,EAAIzU,EAAOuU,WAAWvU,GAIlC,SAASiF,EAAQ+P,GACb,OAAOnV,EAAQ,EAAGE,EAAQ,EAAGiV,IAIjC,SAASjT,EAAgBiT,GACrB,OAAOF,SAASE,EAAK,IAezB,SAASxQ,EAAKyQ,GACV,OAAmB,GAAZA,EAAEnK,OAAc,IAAMmK,EAAI,GAAKA,EAI1C,SAASxS,EAAoBgS,GAKzB,OAJIA,GAAK,IACLA,EAAS,IAAJA,EAAW,KAGbA,EAIX,SAAS5P,EAAoBV,GACzB,OAAO5E,EAAKK,MAAsB,IAAhB2U,WAAWpQ,IAAUM,SAAS,IAGpD,SAASzC,EAAoBN,GACzB,OAAQK,EAAgBL,GAAK,IAGjC,IASQwT,EAKAC,EACAC,EAfJ9T,GAcI6T,EAAoB,eALpBD,EAAW,8CAKoC,aAAeA,EAAW,aAAeA,EAAW,YACnGE,EAAoB,cAAgBF,EAAW,aAAeA,EAAW,aAAeA,EAAW,aAAeA,EAAW,YAE1H,CACHA,SAAU,IAAIG,OAAOH,GACrB3U,IAAK,IAAI8U,OAAO,MAAQF,GACxB3T,KAAM,IAAI6T,OAAO,OAASD,GAC1B3T,IAAK,IAAI4T,OAAO,MAAQF,GACxBxT,KAAM,IAAI0T,OAAO,OAASD,GAC1BxT,IAAK,IAAIyT,OAAO,MAAQF,GACxBtT,KAAM,IAAIwT,OAAO,OAASD,GAC1BjT,KAAM,uDACNF,KAAM,uDACNC,KAAM,uEACNJ,KAAM,yEAOd,SAASO,EAAejC,GACpB,QAASkB,EAAS4T,SAAS3T,KAAKnB,GAgGCkV,EAAOC,QACxCD,UAAiBnV,EAQjBqV,OAAOrV,UAAYA,EAnqCvB,CAsqCGZ,SCxqCCkW,EAAe,WAAc,SAASC,EAAiBC,EAAQC,GAAS,IAAK,IAAIlT,EAAI,EAAGA,EAAIkT,EAAM9K,OAAQpI,IAAK,CAAE,IAAImT,EAAaD,EAAMlT,GAAImT,EAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,UAAWF,IAAYA,EAAWG,UAAW,GAAMC,OAAOC,eAAeP,EAAQE,EAAWM,IAAKN,IAAiB,OAAO,SAAUO,EAAaC,EAAYC,GAAiJ,OAA9HD,GAAYX,EAAiBU,EAAY7P,UAAW8P,GAAiBC,GAAaZ,EAAiBU,EAAaE,GAAqBF,GAA7gB,GAOnB,IAAIG,EAAS,CACTC,WAAc,qBACdpW,MAAS,SAGTqW,EAAa,CACbC,QAAW,eAGXC,EAAe,KAEF,WAeb,SAASC,EAAIC,IA/BjB,SAAyBC,EAAUV,GAAe,KAAMU,aAAoBV,GAAgB,MAAM,IAAIW,UAAU,qCAgCxGC,CAAgB1W,KAAMsW,GAEtBtW,KAAKuW,QAAUA,GAAW,GAC1BvW,KAAK2W,UAAY3W,KAAKuW,QAAQI,WAAa,EAC3C3W,KAAKsW,IAAMtW,KAAKuW,QAAQD,KAAO,GAC/BtW,KAAK4W,WAAa5W,KAAKuW,QAAQK,YAAc,IAC7C5W,KAAK6W,YAAc7W,KAAKuW,QAAQM,aAAe,GAC/C7W,KAAK8W,gBAAkB9W,KAAKuW,QAAQO,iBAAmB,EACvD9W,KAAK+W,IAAMC,SAASC,cAAc,OCrCzB,MAAMC,EAUnBC,YAAYZ,IAERA,EAAUA,GAAW,IACba,KAAOb,EAAQa,MAAQ,cAC/Bb,EAAQa,KAAKxW,cACb2V,EAAQH,QAAUG,EAAQH,SAAW,MACrCG,EAAQzW,MAAQyW,EAAQzW,OAAS,QACjCyW,EAAQL,WAAaK,EAAQL,YAAc,kBAC3ClW,KAAK+W,IAAMC,SAASC,cAAc,OAClCC,EAAQG,WAAWd,EAAQa,MAAME,YAAYtX,KAAK+W,KAClD,IAAK,IAAIQ,KAAShB,EAEA,WAAVgB,GAAgC,SAAVA,IAEtBvX,KAAK+W,IAAIQ,MAAMA,GAAShB,EAAQgB,IAU5CJ,kBAAkBC,GAEd,MAAMI,EAAS,GACf,IAAIC,EAAO,eACmB,IAA1BL,EAAKhD,QAAQ,SAEbqD,GAAQ,QACRD,EAAa,KAAI,IAIjBC,GAAQ,SACRD,EAAc,MAAI,IAEO,IAAzBJ,EAAKhD,QAAQ,QAEbqD,GAAQ,MACRD,EAAY,IAAI,IAIhBC,GAAQ,SACRD,EAAe,OAAI,GAEvB,MAAME,EAAOV,SAASW,eAAeF,GACrC,GAAIC,EAEA,OAAOA,EAEX,MAAME,EAAYZ,SAASC,cAAc,OACzCW,EAAUC,GAAKJ,EACfG,EAAUL,MAAMO,SAAW,SAC3BF,EAAUL,MAAMQ,SAAW,QAC3BH,EAAUL,MAAMS,OAAS,IACzBJ,EAAUL,MAAMU,cAAgB,OAChCL,EAAUL,MAAMW,WAAa,OAC7B,IAAK,IAAIX,KAASC,EAEdI,EAAUL,MAAMA,GAASC,EAAOD,GAGpC,OADAP,SAASmB,KAAKb,YAAYM,GACnBA,EASXT,MAEI,IAAI7W,EAAI,GACR,IAAK,IAAI8X,KAAOxP,UAEZtI,GAAK,QAAU8X,EAAM,SAEzBpY,KAAK+W,IAAIsB,UAAa/X,EAS1B6W,SAEI,IAAI7W,EAAIN,KAAK+W,IAAIsB,UACjB,IAAK,IAAID,KAAOxP,UAEZtI,GAAK,QAAU8X,EAAM,SAEzBpY,KAAK+W,IAAIsB,UAAY/X,IDrEb+W,WAAWrX,KAAKuW,QAAQa,MAAQ,gBAAgBE,YAAYtX,KAAK+W,KACzE/W,KAAKuX,MAAMvX,KAAK+W,IAAKd,EAAQjW,KAAKuW,QAAQiB,QAC1CxX,KAAKsY,SACLtY,KAAKuY,WAAsC,IAAvBvY,KAAKuW,QAAQgC,OAAyBvY,KAAKuW,QAAQgC,MACvEvY,KAAKwY,SAAW,EAChBxY,KAAKyY,YAAc,EACnBzY,KAAK0Y,WAAa,EAClB1Y,KAAK2Y,QAAU,KA2KnB,OAlKAxD,EAAamB,EAAK,CAAC,CACfT,IAAK,SAML9O,MAAO,WACH/G,KAAK+W,IAAI6B,WAOd,CACC/C,IAAK,QACL9O,MAAO,SAAegQ,EAAK8B,EAAQC,GAC/B,IAAK,IAAIvB,KAASsB,EACd9B,EAAIQ,MAAMA,GAASsB,EAAOtB,GAE9B,GAAIuB,EACA,IAAK,IAAIC,KAAUD,EACf/B,EAAIQ,MAAMwB,GAAUD,EAAOC,KAYxC,CACClD,IAAK,SACL9O,MAAO,WACH,IAAIgQ,EAAM/W,KAAK+W,IACXR,EAAUvW,KAAKuW,QACf+B,EAAStB,SAASC,cAAc,OACpCF,EAAIO,YAAYgB,GAChBtY,KAAKgZ,QAAUhC,SAASC,cAAc,QACtCqB,EAAOhB,YAAYtX,KAAKgZ,SACxB,IAAIC,EAAOjC,SAASC,cAAc,QAClCqB,EAAOhB,YAAY2B,GACnBA,EAAKC,eAAoC,IAAjB3C,EAAQ4C,KAAuB5C,EAAQ4C,KAAO,OACtEnZ,KAAKuX,MAAMR,EAAKZ,EAAYI,EAAQ6C,aAUzC,CACCvD,IAAK,WACL9O,MAAO,WACH,IAAIgQ,EAAM/W,KAAK+W,IACXR,EAAUvW,KAAKuW,QACdvW,KAAKqZ,YASNrZ,KAAKqZ,YAAY9B,MAAM+B,QAAU,SARjCtZ,KAAKqZ,YAAcrC,SAASC,cAAc,UAC1CF,EAAIO,YAAYtX,KAAKqZ,aACrBrZ,KAAKqZ,YAAYE,MAAQvZ,KAAK4W,WAC9B5W,KAAKqZ,YAAYG,OAASxZ,KAAK6W,YAC/B7W,KAAKqZ,YAAY9B,MAAMgC,MAAQxC,EAAIwC,MAAQ,KAC3CvZ,KAAKqZ,YAAY9B,MAAMiC,OAASzC,EAAIyC,OAAS,KAC7CxZ,KAAKuX,MAAMvX,KAAKqZ,YAAahD,EAAcE,EAAQkD,gBAU5D,CACC5D,IAAK,QACL9O,MAAO,WACH/G,KAAKyY,cACL,IAAIiB,EAAcC,YAAYC,MAAQ5Z,KAAKwY,SAGvCkB,EAAc,MACQ,IAAlB1Z,KAAKwY,WACLxY,KAAK2Y,QAAU1Z,KAAKoD,MAAMrC,KAAKyY,aAAeiB,EAAc,MACxD1Z,KAAK2Y,SAAW3Y,KAAKsW,IAAMtW,KAAK2W,WAAa3W,KAAK2Y,SAAW3Y,KAAKsW,IAAMtW,KAAK2W,YAC7E3W,KAAK2Y,QAAU3Y,KAAKsW,MAG5BtW,KAAKwY,SAAWmB,YAAYC,MAC5B5Z,KAAKyY,YAAc,GAEvBzY,KAAKgZ,QAAQE,UAAYlZ,KAAK2Y,QAC1B3Y,KAAKqZ,aAAgC,OAAjBrZ,KAAK2Y,SACzB3Y,KAAK6Z,YAAY7Z,KAAK2Y,QAAU3Y,KAAKsW,OAG9C,CACCT,IAAK,cACL9O,MAAO,SAAqB+S,GACxB,IAAInF,EAAI3U,KAAKqZ,YAAYU,WAAW,MAChCC,EAAOrF,EAAEsF,aAAa,EAAG,EAAGja,KAAKqZ,YAAYE,MAAOvZ,KAAKqZ,YAAYG,QACzE7E,EAAEuF,aAAaF,GAAO,EAAG,GACzBrF,EAAEwF,UAAUna,KAAKqZ,YAAYE,MAAQ,EAAG,EAAG,EAAGvZ,KAAKqZ,YAAYG,QAE3D7E,EAAEyF,UADFN,EAAU,GACIO,EAAMlR,IAAI,UAAW,WAAsB,IAAV2Q,GAAe3S,cAEhDkT,EAAMlR,IAAI,UAAW,UAA6B,KAAjB2Q,EAAU,KAAY3S,cAEzE,IAAIqS,GAAUxZ,KAAKqZ,YAAYG,OAASxZ,KAAK8W,kBAAoB,EAAIgD,GACrEnF,EAAE2F,SAASta,KAAKqZ,YAAYE,MAAQ,EAAGC,EAAQ,EAAGxZ,KAAK8W,mBAE5D,CACCjB,IAAK,OACL9O,MAAO,SAAcwP,GACbA,EAAQa,MACRb,EAAQa,KAAOb,EAAQa,KAAKxW,eACU,IAAlC2V,EAAQa,KAAKhD,QAAQ,SACrB6B,EAAa,KAAI,SACVA,EAAc,QAErBA,EAAc,MAAI,SACXA,EAAa,OAEa,IAAjCM,EAAQa,KAAKhD,QAAQ,QACrB6B,EAAY,IAAI,SACTA,EAAe,SAEtBA,EAAe,OAAI,SACZA,EAAY,OAGvBA,EAAc,MAAI,EAClBA,EAAe,OAAI,KAG5B,CACCJ,IAAK,MACL0E,IAAK,WACD,OAAOva,KAAKsW,KAEhBkE,IAAK,SAAazT,GACd/G,KAAKsW,IAAMvP,IAEhB,CACC8O,IAAK,QACL0E,IAAK,WACD,OAAOva,KAAKya,QAEhBD,IAAK,SAAazT,GACVA,EACA/G,KAAK0a,WACE1a,KAAKqZ,cACZrZ,KAAKqZ,YAAY9B,MAAM+B,QAAU,YAKtChD,EA3MM,GEVV,SAASqE,EAAKpE,EAAQ,IAEzB,MAAMqE,EAAS5D,SAASC,cAAcV,EAAQsE,MAAQ,OAiBtD,OAhBItE,EAAQuE,QAERvE,EAAQuE,OAAOxD,YAAYsD,GAE3BrE,EAAQiB,QAER7B,OAAOoF,OAAOH,EAAOrD,MAAOhB,EAAQiB,QAEpCjB,EAAQyE,YAERJ,EAAOI,UAAYzE,EAAQyE,WAE3BzE,EAAQoE,OAERC,EAAOvC,UAAY9B,EAAQoE,MAExBC,uBC3BX,IAAIK,EAAMtF,OAAO1P,UAAUnD,eACvBoY,EAAS,IASb,SAASC,KA4BT,SAASC,EAAG9S,EAAI+S,EAASC,GACvBtb,KAAKsI,GAAKA,EACVtI,KAAKqb,QAAUA,EACfrb,KAAKsb,KAAOA,IAAQ,EActB,SAASC,EAAYC,EAASC,EAAOnT,EAAI+S,EAASC,GAChD,GAAkB,mBAAPhT,EACT,MAAM,IAAImO,UAAU,mCAGtB,IAAIiF,EAAW,IAAIN,EAAG9S,EAAI+S,GAAWG,EAASF,GAC1CK,EAAMT,EAASA,EAASO,EAAQA,EAMpC,OAJKD,EAAQI,QAAQD,GACXH,EAAQI,QAAQD,GAAKrT,GAC1BkT,EAAQI,QAAQD,GAAO,CAACH,EAAQI,QAAQD,GAAMD,GADhBF,EAAQI,QAAQD,GAAK9V,KAAK6V,IADlCF,EAAQI,QAAQD,GAAOD,EAAUF,EAAQK,gBAI7DL,EAUT,SAASM,EAAWN,EAASG,GACI,KAAzBH,EAAQK,aAAoBL,EAAQI,QAAU,IAAIT,SAC5CK,EAAQI,QAAQD,GAU9B,SAASI,IACP/b,KAAK4b,QAAU,IAAIT,EACnBnb,KAAK6b,aAAe,EAxElBlG,OAAOqG,SACTb,EAAOlV,UAAY0P,OAAOqG,OAAO,OAM5B,IAAIb,GAASc,YAAWf,GAAS,IA2ExCa,EAAa9V,UAAUiW,WAAa,WAClC,IACIC,EACA1E,EAFA1W,EAAQ,GAIZ,GAA0B,IAAtBf,KAAK6b,aAAoB,OAAO9a,EAEpC,IAAK0W,KAAS0E,EAASnc,KAAK4b,QACtBX,EAAItS,KAAKwT,EAAQ1E,IAAO1W,EAAM8E,KAAKqV,EAASzD,EAAK/O,MAAM,GAAK+O,GAGlE,OAAI9B,OAAOyG,sBACFrb,EAAM0H,OAAOkN,OAAOyG,sBAAsBD,IAG5Cpb,GAUTgb,EAAa9V,UAAUoW,UAAY,SAAmBZ,GACpD,IAAIE,EAAMT,EAASA,EAASO,EAAQA,EAChCa,EAAWtc,KAAK4b,QAAQD,GAE5B,IAAKW,EAAU,MAAO,GACtB,GAAIA,EAAShU,GAAI,MAAO,CAACgU,EAAShU,IAElC,IAAK,IAAIlG,EAAI,EAAG5B,EAAI8b,EAAS9R,OAAQ+R,EAAK,IAAIC,MAAMhc,GAAI4B,EAAI5B,EAAG4B,IAC7Dma,EAAGna,GAAKka,EAASla,GAAGkG,GAGtB,OAAOiU,GAUTR,EAAa9V,UAAUwW,cAAgB,SAAuBhB,GAC5D,IAAIE,EAAMT,EAASA,EAASO,EAAQA,EAChCY,EAAYrc,KAAK4b,QAAQD,GAE7B,OAAKU,EACDA,EAAU/T,GAAW,EAClB+T,EAAU7R,OAFM,GAYzBuR,EAAa9V,UAAUyW,KAAO,SAAcjB,EAAOkB,EAAIC,EAAIC,EAAIC,EAAIC,GACjE,IAAIpB,EAAMT,EAASA,EAASO,EAAQA,EAEpC,IAAKzb,KAAK4b,QAAQD,GAAM,OAAO,EAE/B,IAEIpT,EACAnG,EAHAia,EAAYrc,KAAK4b,QAAQD,GACzBqB,EAAMpU,UAAU4B,OAIpB,GAAI6R,EAAU/T,GAAI,CAGhB,OAFI+T,EAAUf,MAAMtb,KAAKid,eAAexB,EAAOY,EAAU/T,QAAI4U,GAAW,GAEhEF,GACN,KAAK,EAAG,OAAOX,EAAU/T,GAAGK,KAAK0T,EAAUhB,UAAU,EACrD,KAAK,EAAG,OAAOgB,EAAU/T,GAAGK,KAAK0T,EAAUhB,QAASsB,IAAK,EACzD,KAAK,EAAG,OAAON,EAAU/T,GAAGK,KAAK0T,EAAUhB,QAASsB,EAAIC,IAAK,EAC7D,KAAK,EAAG,OAAOP,EAAU/T,GAAGK,KAAK0T,EAAUhB,QAASsB,EAAIC,EAAIC,IAAK,EACjE,KAAK,EAAG,OAAOR,EAAU/T,GAAGK,KAAK0T,EAAUhB,QAASsB,EAAIC,EAAIC,EAAIC,IAAK,EACrE,KAAK,EAAG,OAAOT,EAAU/T,GAAGK,KAAK0T,EAAUhB,QAASsB,EAAIC,EAAIC,EAAIC,EAAIC,IAAK,EAG3E,IAAK3a,EAAI,EAAGmG,EAAO,IAAIiU,MAAMQ,EAAK,GAAI5a,EAAI4a,EAAK5a,IAC7CmG,EAAKnG,EAAI,GAAKwG,UAAUxG,GAG1Bia,EAAU/T,GAAGE,MAAM6T,EAAUhB,QAAS9S,OACjC,CACL,IACI4U,EADA3S,EAAS6R,EAAU7R,OAGvB,IAAKpI,EAAI,EAAGA,EAAIoI,EAAQpI,IAGtB,OAFIia,EAAUja,GAAGkZ,MAAMtb,KAAKid,eAAexB,EAAOY,EAAUja,GAAGkG,QAAI4U,GAAW,GAEtEF,GACN,KAAK,EAAGX,EAAUja,GAAGkG,GAAGK,KAAK0T,EAAUja,GAAGiZ,SAAU,MACpD,KAAK,EAAGgB,EAAUja,GAAGkG,GAAGK,KAAK0T,EAAUja,GAAGiZ,QAASsB,GAAK,MACxD,KAAK,EAAGN,EAAUja,GAAGkG,GAAGK,KAAK0T,EAAUja,GAAGiZ,QAASsB,EAAIC,GAAK,MAC5D,KAAK,EAAGP,EAAUja,GAAGkG,GAAGK,KAAK0T,EAAUja,GAAGiZ,QAASsB,EAAIC,EAAIC,GAAK,MAChE,QACE,IAAKtU,EAAM,IAAK4U,EAAI,EAAG5U,EAAO,IAAIiU,MAAMQ,EAAK,GAAIG,EAAIH,EAAKG,IACxD5U,EAAK4U,EAAI,GAAKvU,UAAUuU,GAG1Bd,EAAUja,GAAGkG,GAAGE,MAAM6T,EAAUja,GAAGiZ,QAAS9S,IAKpD,OAAO,GAYTwT,EAAa9V,UAAUmX,GAAK,SAAY3B,EAAOnT,EAAI+S,GACjD,OAAOE,EAAYvb,KAAMyb,EAAOnT,EAAI+S,GAAS,IAY/CU,EAAa9V,UAAUqV,KAAO,SAAcG,EAAOnT,EAAI+S,GACrD,OAAOE,EAAYvb,KAAMyb,EAAOnT,EAAI+S,GAAS,IAa/CU,EAAa9V,UAAUgX,eAAiB,SAAwBxB,EAAOnT,EAAI+S,EAASC,GAClF,IAAIK,EAAMT,EAASA,EAASO,EAAQA,EAEpC,IAAKzb,KAAK4b,QAAQD,GAAM,OAAO3b,KAC/B,IAAKsI,EAEH,OADAwT,EAAW9b,KAAM2b,GACV3b,KAGT,IAAIqc,EAAYrc,KAAK4b,QAAQD,GAE7B,GAAIU,EAAU/T,GAEV+T,EAAU/T,KAAOA,GACfgT,IAAQe,EAAUf,MAClBD,GAAWgB,EAAUhB,UAAYA,GAEnCS,EAAW9b,KAAM2b,OAEd,CACL,IAAK,IAAIvZ,EAAI,EAAG+Z,EAAS,GAAI3R,EAAS6R,EAAU7R,OAAQpI,EAAIoI,EAAQpI,KAEhEia,EAAUja,GAAGkG,KAAOA,GACnBgT,IAASe,EAAUja,GAAGkZ,MACtBD,GAAWgB,EAAUja,GAAGiZ,UAAYA,IAErCc,EAAOtW,KAAKwW,EAAUja,IAOtB+Z,EAAO3R,OAAQxK,KAAK4b,QAAQD,GAAyB,IAAlBQ,EAAO3R,OAAe2R,EAAO,GAAKA,EACpEL,EAAW9b,KAAM2b,GAGxB,OAAO3b,MAUT+b,EAAa9V,UAAUoX,mBAAqB,SAA4B5B,GACtE,IAAIE,EAUJ,OARIF,GACFE,EAAMT,EAASA,EAASO,EAAQA,EAC5Bzb,KAAK4b,QAAQD,IAAMG,EAAW9b,KAAM2b,KAExC3b,KAAK4b,QAAU,IAAIT,EACnBnb,KAAK6b,aAAe,GAGf7b,MAMT+b,EAAa9V,UAAUqX,IAAMvB,EAAa9V,UAAUgX,eACpDlB,EAAa9V,UAAUsV,YAAcQ,EAAa9V,UAAUmX,GAK5DrB,EAAawB,SAAWrC,EAKxBa,EAAaA,aAAeA,EAM1B/G,UAAiB+G,KCxSnB,MAAMyB,EAAiB,CACnBC,UAAW,GACXC,SAAS,EACTC,eAAe,EACfC,kBAAmB,IACnBC,aAAa,EACbC,gBAAiB,IACjBC,SAAS,EACTC,WAAW,GAiBR,SAASN,EAAQO,EAASC,EAAU3H,GAEvC,OAAO,IAAI4H,EAAQF,EAASC,EAAU3H,GAG1C,MAAM4H,EAEFhH,YAAY8G,EAASC,EAAU3H,GAEJ,iBAAZ0H,IAEPA,EAAUjH,SAASoH,cAAcH,KAOrCje,KAAKuW,QAAUZ,OAAOoF,OAAO,GAAIyC,EAAgBjH,GACjDvW,KAAKmc,OAAS,CACVkC,UAAYC,GAAMte,KAAKqe,UAAUC,GACjCC,QAAUD,GAAMte,KAAKue,QAAQD,GAC7BE,UAAYF,GAAMte,KAAKwe,UAAUF,GACjCG,WAAaH,GAAMte,KAAKye,WAAWH,GACnCI,UAAYJ,GAAMte,KAAK0e,UAAUJ,GACjCK,YAAcL,GAAMte,KAAK4e,OAAON,GAChCO,SAAWP,GAAMte,KAAK6e,SAASP,IAEnCL,EAAQa,iBAAiB,YAAa9e,KAAKmc,OAAOkC,UAAW,CAAEN,QAAS/d,KAAKuW,QAAQwH,UACrFE,EAAQa,iBAAiB,UAAW9e,KAAKmc,OAAOoC,QAAS,CAAER,QAAS/d,KAAKuW,QAAQwH,UACjFE,EAAQa,iBAAiB,YAAa9e,KAAKmc,OAAOqC,UAAW,CAAET,QAAS/d,KAAKuW,QAAQwH,UACrFE,EAAQa,iBAAiB,aAAc9e,KAAKmc,OAAOsC,WAAY,CAAEM,SAAS,EAAMhB,QAAS/d,KAAKuW,QAAQwH,UACtGE,EAAQa,iBAAiB,YAAa9e,KAAKmc,OAAOuC,UAAW,CAAEK,SAAS,EAAMhB,QAAS/d,KAAKuW,QAAQwH,UACpGE,EAAQa,iBAAiB,cAAe9e,KAAKmc,OAAOwC,YAAa,CAAEZ,QAAS/d,KAAKuW,QAAQwH,UACzFE,EAAQa,iBAAiB,WAAY9e,KAAKmc,OAAO0C,SAAU,CAAEd,QAAS/d,KAAKuW,QAAQwH,UACnF/d,KAAKie,QAAUA,EACfje,KAAKke,SAAWA,GAtBRc,QAAQC,KAAK,2CAA2ChB,mBA4BpE9G,UAEInX,KAAKie,QAAQiB,oBAAoB,YAAalf,KAAKmc,OAAOkC,WAC1Dre,KAAKie,QAAQiB,oBAAoB,UAAWlf,KAAKmc,OAAOoC,SACxDve,KAAKie,QAAQiB,oBAAoB,YAAalf,KAAKmc,OAAOqC,WAC1Dxe,KAAKie,QAAQiB,oBAAoB,aAAclf,KAAKmc,OAAOsC,WAAY,CAAEM,SAAS,IAClF/e,KAAKie,QAAQiB,oBAAoB,YAAalf,KAAKmc,OAAOuC,UAAW,CAAEK,SAAS,IAChF/e,KAAKie,QAAQiB,oBAAoB,cAAelf,KAAKmc,OAAOwC,aAC5D3e,KAAKie,QAAQiB,oBAAoB,WAAYlf,KAAKmc,OAAO0C,UAG7D1H,WAAWmH,IAEW,IAAdte,KAAKmf,KAELnf,KAAK4e,SAIoB,IAArBN,EAAEc,QAAQ5U,QAEVxK,KAAKqf,WAAWf,EAAEgB,eAAe,GAAGC,QAASjB,EAAEgB,eAAe,GAAGE,SAK7ErI,cAAcsI,EAAGC,GAEb,OAAOzgB,KAAKwV,IAAIzU,KAAK2f,MAAQF,GAAKzf,KAAKuW,QAAQkH,WAAaxe,KAAKwV,IAAIzU,KAAK4f,MAAQF,GAAK1f,KAAKuW,QAAQkH,UAGxGtG,UAAUmH,GAEN,GAAIte,KAAKmf,KAEL,GAAyB,IAArBb,EAAEc,QAAQ5U,OAEVxK,KAAK4e,aAGT,CACI,MAAMa,EAAInB,EAAEgB,eAAe,GAAGC,QACxBG,EAAIpB,EAAEgB,eAAe,GAAGE,QAC1Bxf,KAAK6f,cAAcJ,EAAGC,IAEtB1f,KAAK4e,UAOrBzH,SAEInX,KAAKmf,MAAO,EACRnf,KAAK8f,uBAELC,aAAa/f,KAAK8f,sBAClB9f,KAAK8f,qBAAuB,MAE5B9f,KAAKggB,qBAELD,aAAa/f,KAAKggB,oBAClBhgB,KAAKggB,mBAAqB,MAIlC7I,SAASmH,GAEDte,KAAKmf,OAELb,EAAE2B,iBACFjgB,KAAKkgB,aAAa5B,EAAGA,EAAE6B,YAI/BhJ,aAAamH,GAELte,KAAKuW,QAAQoH,cAEb3d,KAAK8f,qBAAuBM,WAAW,IAAMpgB,KAAKqgB,oBAAoB/B,GAAIte,KAAKuW,QAAQqH,mBAElF5d,KAAKuW,QAAQmH,SAElB1d,KAAKke,SAAS,CAAEzC,MAAO6C,EAAGzD,KAAM,YAEhC7a,KAAKggB,qBAELD,aAAa/f,KAAKggB,oBAClBhgB,KAAKggB,mBAAqB,MAE9BhgB,KAAKmf,MAAO,EAGhBhI,WAAWmH,EAAGmB,EAAGC,GAET1f,KAAK8f,qBAED9f,KAAK6f,cAAcJ,EAAGC,IAElB1f,KAAKuW,QAAQmH,SAEb1d,KAAKke,SAAS,CAAEzC,MAAO6C,EAAGzD,KAAM,YAEpC7a,KAAK4e,WAIL5e,KAAKke,SAAS,CAAEzC,MAAO6C,EAAGzD,KAAM,mBAChC7a,KAAK4e,WAKT5e,KAAK2f,MAAQF,EACbzf,KAAK4f,MAAQF,EACb1f,KAAKmf,MAAO,EACRnf,KAAKuW,QAAQsH,cAEb7d,KAAKggB,mBAAqBI,WAAW,IAAMpgB,KAAK6d,YAAYS,GAAIte,KAAKuW,QAAQuH,kBAE7E9d,KAAKuW,QAAQyH,WACbhe,KAAKke,SAAS,CAAEzC,MAAO6C,EAAGzD,KAAM,gBAK5C1D,YAAYmH,GAERte,KAAKsgB,kBAAoB,KACzBtgB,KAAKmf,MAAO,EACZnf,KAAKke,SAAS,CAAEzC,MAAO6C,EAAGzD,KAAM,iBAGpC1D,oBAAoBmH,GAEhBte,KAAK8f,qBAAuB,KACxB9f,KAAKuW,QAAQmH,SAEb1d,KAAKke,SAAS,CAAEzC,MAAO6C,EAAGzD,KAAM,mBAIxC1D,UAAUmH,IAEY,IAAdte,KAAKmf,KAELnf,KAAKmf,MAAO,EAIZnf,KAAKqf,WAAWf,EAAGA,EAAEiB,QAASjB,EAAEkB,SAIxCrI,UAAUmH,GAEN,GAAIte,KAAKmf,KACT,CACI,MAAMM,EAAInB,EAAEiB,QACNG,EAAIpB,EAAEkB,QACRxf,KAAK6f,cAAcJ,EAAGC,IAEtB1f,KAAK4e,UAKjBzH,QAAQmH,GAEAte,KAAKmf,OAELb,EAAE2B,iBACFjgB,KAAKkgB,aAAa5B,KC7PvB,MAAMiC,UAAepF,EAMxBhE,YAAYqJ,EAAIjK,EAAQ,IAEpBkK,QACAzgB,KAAKwgB,GAAKA,EACVxgB,KAAKuW,QAAUA,EACfvW,KAAK6X,QAAgC,IAApB7X,KAAKuW,QAAQsB,GAAqB0I,EAAO1I,KAAO7X,KAAKuW,QAAQsB,GAC9E7X,KAAK0gB,gBACL1gB,KAAK2gB,aAEL3gB,KAAK4gB,QAAS,EACd5gB,KAAK6gB,WAAY,EAEjB7gB,KAAK8gB,SAAU,EACf9gB,KAAK+gB,SAAW,KAChB/gB,KAAKghB,QAAU,KACfhhB,KAAKihB,UAAY,KACjBjhB,KAAKkhB,kBAAoB,CAAEC,SAAU,GAAIC,WAAY,IAOzDjK,KAAKkK,GAEGrhB,KAAK8gB,UAEL9gB,KAAKshB,IAAI/J,MAAM+B,QAAU,QACzBtZ,KAAK8gB,SAAU,EACf9gB,KAAK0c,KAAK,OAAQ1c,MACbqhB,GAEDrhB,KAAKuhB,SAQjBpK,QAEInX,KAAK4gB,QAAS,EACV5gB,KAAKuW,QAAQiL,WAEbxhB,KAAKyhB,YAAYlK,MAAMmK,gBAAkB1hB,KAAKuW,QAAQoL,0BAE1D3hB,KAAK0c,KAAK,QAAS1c,MAMvBmX,OAEInX,KAAK4gB,QAAS,EACV5gB,KAAKuW,QAAQiL,WAEbxhB,KAAKyhB,YAAYlK,MAAMmK,gBAAkB1hB,KAAKuW,QAAQqL,4BAE1D5hB,KAAK0c,KAAK,OAAQ1c,MAMtBmX,QAESnX,KAAK8gB,UAEN9gB,KAAK8gB,SAAU,EACf9gB,KAAKshB,IAAI/J,MAAM+B,QAAU,OACzBtZ,KAAK0c,KAAK,QAAS1c,OAS3B6hB,aAEI,OAAO7hB,KAAK8gB,QAOhBrB,QAAU,OAAOzf,KAAKuW,QAAQkJ,EAC9BA,MAAM1Y,GAEEA,IAAU/G,KAAKuW,QAAQkJ,IAEvBzf,KAAKuW,QAAQkJ,EAAI1Y,EACjB/G,KAAK0c,KAAK,SAAU1c,MACpBA,KAAK8hB,mBAIb3K,kBAEInX,KAAKshB,IAAI/J,MAAMwK,UAAY,aAAa/hB,KAAKuW,QAAQkJ,OAAOzf,KAAKuW,QAAQmJ,OAO7EA,QAAU,OAAO1f,KAAKuW,QAAQmJ,EAC9BA,MAAM3Y,GAEEA,IAAU/G,KAAKuW,QAAQmJ,IAEvB1f,KAAKuW,QAAQmJ,EAAI3Y,EACjB/G,KAAK8hB,kBACL9hB,KAAK0c,KAAK,SAAU1c,OAQ5BuZ,YAAc,OAAOvZ,KAAKuW,QAAQgD,OAASvZ,KAAKshB,IAAIU,YACpDzI,UAAUxS,GAEFA,IAAU/G,KAAKuW,QAAQgD,QAEnBxS,GAEA/G,KAAKshB,IAAI/J,MAAMgC,MAAWxS,EAAH,KACvB/G,KAAKuW,QAAQgD,MAAQvZ,KAAKshB,IAAIU,cAI9BhiB,KAAKshB,IAAI/J,MAAMgC,MAAQ,OACvBvZ,KAAKuW,QAAQgD,MAAQ,IAEzBvZ,KAAK0c,KAAK,eAAgB1c,OAQlCwZ,aAAe,OAAOxZ,KAAKuW,QAAQiD,QAAUxZ,KAAKshB,IAAIW,aACtDzI,WAAWzS,GAEHA,IAAU/G,KAAKuW,QAAQiD,SAEnBzS,GAEA/G,KAAKshB,IAAI/J,MAAMiC,OAAYzS,EAAH,KACxB/G,KAAKuW,QAAQiD,OAASxZ,KAAKshB,IAAIW,eAI/BjiB,KAAKshB,IAAI/J,MAAMiC,OAAS,OACxBxZ,KAAKuW,QAAQiD,OAAS,IAE1BxZ,KAAK0c,KAAK,gBAAiB1c,OASnCmX,OAAOoC,EAAOC,GAEVxZ,KAAKuZ,MAAQA,EACbvZ,KAAKwZ,OAASA,EAQlBrC,KAAKsI,EAAGC,GAEJ,MAAMwC,EAAaliB,KAAKkiB,WACxB,GAAIA,EACJ,CACI,MAAMC,EAASniB,KAAKmiB,QACD,IAAfD,GAAsC,eAAfA,IAGvBzC,GADAA,EAAIA,EAAIzf,KAAKuZ,MAAQ4I,EAAOC,MAAQD,EAAOC,MAAQpiB,KAAKuZ,MAAQkG,GACxD0C,EAAOE,KAAOF,EAAOE,KAAO5C,IAErB,IAAfyC,GAAsC,aAAfA,IAGvBxC,GADAA,EAAIA,EAAI1f,KAAKwZ,OAAS2I,EAAOG,OAASH,EAAOG,OAAStiB,KAAKwZ,OAASkG,GAC5DyC,EAAOI,IAAMJ,EAAOI,IAAM7C,GAGtCD,IAAMzf,KAAKuW,QAAQkJ,IAEnBzf,KAAKuW,QAAQkJ,EAAIA,EACjBzf,KAAK0c,KAAK,SAAU1c,OAEpB0f,IAAM1f,KAAKuW,QAAQmJ,IAEnB1f,KAAKuW,QAAQmJ,EAAIA,EACjB1f,KAAK0c,KAAK,SAAU1c,OAExBA,KAAK8hB,kBAMT3K,WAEI,GAAInX,KAAKuW,QAAQiM,YAEb,GAAIxiB,KAAK6gB,UAEL7gB,KAAKyf,EAAIzf,KAAK6gB,UAAUpB,EACxBzf,KAAK0f,EAAI1f,KAAK6gB,UAAUnB,EACxB1f,KAAKuZ,MAAQvZ,KAAK6gB,UAAUtH,MAC5BvZ,KAAKwZ,OAASxZ,KAAK6gB,UAAUrH,OAC7BxZ,KAAK6gB,UAAY,KACjB7gB,KAAK0c,KAAK,UAAW1c,MACrBA,KAAKyiB,QAAQC,SAASrK,UAAYrY,KAAKuW,QAAQoM,mBAGnD,CACI,MAAMlD,EAAIzf,KAAKyf,EAAGC,EAAI1f,KAAK0f,EAAGnG,EAAQvZ,KAAKshB,IAAIU,YAAaxI,EAASxZ,KAAKshB,IAAIW,aAC9EjiB,KAAK6gB,UAAY,CAAEpB,EAAAA,EAAGC,EAAAA,EAAGnG,MAAAA,EAAOC,OAAAA,GAChCxZ,KAAKyf,EAAI,EACTzf,KAAK0f,EAAI,EACT1f,KAAKuZ,MAAQvZ,KAAKwgB,GAAGoC,QAAQZ,YAC7BhiB,KAAKwZ,OAASxZ,KAAKwgB,GAAGoC,QAAQX,aAC9BjiB,KAAK0c,KAAK,WAAY1c,MACtBA,KAAKyiB,QAAQC,SAASrK,UAAYrY,KAAKuW,QAAQsM,eAQ3D1L,aAEInX,KAAKwgB,GAAGsC,WAAW9iB,MAMvBmX,cAEInX,KAAKwgB,GAAGuC,YAAY/iB,MAOxBmX,OAEI,MAAM6C,EAAO,GACP6G,EAAY7gB,KAAK6gB,UAgBvB,OAfIA,IAEA7G,EAAK6G,UAAY,CAAEwB,KAAMxB,EAAUwB,KAAME,IAAK1B,EAAU0B,IAAKhJ,MAAOsH,EAAUtH,MAAOC,OAAQqH,EAAUrH,SAE3GQ,EAAKyF,EAAIzf,KAAKyf,EACdzF,EAAK0F,EAAI1f,KAAK0f,OACoB,IAAvB1f,KAAKuW,QAAQgD,QAEpBS,EAAKT,MAAQvZ,KAAKuW,QAAQgD,YAEK,IAAxBvZ,KAAKuW,QAAQiD,SAEpBQ,EAAKR,OAASxZ,KAAKuW,QAAQiD,QAE/BQ,EAAK6H,OAAS7hB,KAAK8gB,QACZ9G,EAOX7C,KAAK6C,GAEGA,EAAK6G,UAEA7gB,KAAK6gB,WAEN7gB,KAAK0iB,UAAS,GAGb1iB,KAAK6gB,WAEV7gB,KAAK0iB,UAAS,GAElB1iB,KAAKyf,EAAIzF,EAAKyF,EACdzf,KAAK0f,EAAI1F,EAAK0F,OACY,IAAf1F,EAAKT,MAEZvZ,KAAKuZ,MAAQS,EAAKT,MAIlBvZ,KAAKshB,IAAI/J,MAAMgC,MAAQ,YAEA,IAAhBS,EAAKR,OAEZxZ,KAAKwZ,OAASQ,EAAKR,OAInBxZ,KAAKshB,IAAI/J,MAAMiC,OAAS,OAExBQ,EAAK6H,OAEL7hB,KAAKgjB,OAAM,GAENhjB,KAAK6hB,QAEV7hB,KAAKijB,MAAK,GAAM,GAQxBC,YAAc,OAAOljB,KAAKmjB,OAC1BD,UAAUnc,GAEN/G,KAAKojB,SAASlK,UAAYnS,EAC1B/G,KAAK0c,KAAK,eAAgB1c,MAQ9BoiB,YAAc,OAAOpiB,KAAKyf,EAAIzf,KAAKuZ,MACnC6I,UAAUrb,GAEN/G,KAAKyf,EAAI1Y,EAAQ/G,KAAKuZ,MAO1B+I,aAAe,OAAOtiB,KAAK0f,EAAI1f,KAAKwZ,OACpC8I,WAAWvb,GAEP/G,KAAK0f,EAAI3Y,EAAQ/G,KAAKwZ,OAO1BrC,OAAOmK,GAECA,EAEAthB,KAAKqjB,KACD/B,EAAI7B,EAAI6B,EAAI/H,MAAQ,EAAIvZ,KAAKuZ,MAAQ,EACrC+H,EAAI5B,EAAI4B,EAAI9H,OAAS,EAAIxZ,KAAKwZ,OAAS,GAK3CxZ,KAAKqjB,KACDnO,OAAOoO,WAAa,EAAItjB,KAAKuZ,MAAQ,EACrCrE,OAAOqO,YAAc,EAAIvjB,KAAKwZ,OAAS,GAoGnDrC,gBAOInX,KAAKshB,IAAM3G,EAAK,CACZG,OAAS9a,KAAKwgB,GAAKxgB,KAAKwgB,GAAGc,IAAM,KAAO9J,OAAQ,CAC5C8B,QAAW,OACXkK,gBAAiBxjB,KAAKuW,QAAQkN,aAC9BC,cAAe,OACf5L,SAAY,SACZC,SAAY,WACZ4L,YAAa3jB,KAAKuW,QAAQqN,SAC1BC,aAAc7jB,KAAKuW,QAAQuN,UAC3BC,aAAc/jB,KAAKuW,QAAQyN,OAC3BC,mBAAoBjkB,KAAKuW,QAAQ2N,iBACjC3K,MAASrF,MAAMlU,KAAKuW,QAAQgD,OAASvZ,KAAKuW,QAAQgD,MAAQvZ,KAAKuW,QAAQgD,MAAQ,KAC/EC,OAAUtF,MAAMlU,KAAKuW,QAAQiD,QAAUxZ,KAAKuW,QAAQiD,OAASxZ,KAAKuW,QAAQiD,OAAS,QAChFxZ,KAAKuW,QAAQiB,QAEpBwD,UAAWhb,KAAKuW,QAAQ4N,WAAW7C,MAGvCthB,KAAKokB,OAASzJ,EAAK,CACfG,OAAQ9a,KAAKshB,IAAK9J,OAAQ,CACtB8B,QAAW,OACX+K,iBAAkB,SAClB9K,MAAS,OACTC,OAAU,OACVqK,aAAc7jB,KAAKuW,QAAQuN,WAE/B9I,UAAWhb,KAAKuW,QAAQ4N,WAAWC,SAEvCpkB,KAAKskB,kBAOLtkB,KAAKukB,QAAU5J,EAAK,CAChBG,OAAQ9a,KAAKokB,OAAQvJ,KAAM,UAAWrD,OAAQ,CAC1C8B,QAAW,QACXkL,KAAQ,EACRX,aAAc7jB,KAAK8jB,UACnBW,aAAc,SACdC,aAAc,QAElB1J,UAAWhb,KAAKuW,QAAQ4N,WAAWI,UAGnCvkB,KAAKuW,QAAQoO,WAEb3kB,KAAK4kB,gBAGT5kB,KAAK4iB,QAAUjI,EAAK,CAChBG,OAAQ9a,KAAKshB,IAAK9J,OAAQ,CACtB8B,QAAW,OACXvB,SAAY,WACZsK,KAAQ,EACRE,IAAO,EACPhJ,MAAS,OACTC,OAAU,QAEdwB,UAAWhb,KAAKuW,QAAQ4N,WAAWvB,UAEvC5iB,KAAK4iB,QAAQ9D,iBAAiB,YAAcR,IAAQte,KAAK6kB,cAAcvG,GAAIA,EAAEwG,oBAC7E9kB,KAAK4iB,QAAQ9D,iBAAiB,aAAeR,IAAQte,KAAK6kB,cAAcvG,GAAIA,EAAEwG,oBAC9E9kB,KAAK8hB,kBAGT3K,cAAcmH,GAEV,MAAM7C,EAAQzb,KAAK+kB,kBAAkBzG,GACrCte,KAAKghB,QAAU,CACXvB,EAAGhE,EAAMuJ,MAAQhlB,KAAKyf,EACtBC,EAAGjE,EAAMwJ,MAAQjlB,KAAK0f,GAE1B1f,KAAK0c,KAAK,aAAc1c,MACxBA,KAAKklB,QAAS,EAGlB/N,kBAEI,GAAInX,KAAKuW,QAAQiL,SACjB,CACIxhB,KAAKyhB,YAAc9G,EAAK,CACpBG,OAAQ9a,KAAKokB,OAAQvJ,KAAM,SAAUrD,OAAQ,CACzCkM,cAAe,OACfpK,QAAW,OACX+K,iBAAkB,MAClBc,cAAe,SACfC,kBAAmB,SACnB5L,OAAUxZ,KAAKuW,QAAQ8O,eACvBxB,aAAc7jB,KAAKuW,QAAQ8O,eAC3BC,OAAU,EACVlP,QAAW,QACX0B,SAAY,UAEhBkD,UAAWhb,KAAKuW,QAAQ4N,WAAW3C,WAEvC,MAAM+D,EAAiB,CACnB7B,cAAe,OACfc,KAAQ,EACRlL,QAAW,OACX+K,iBAAkB,MAClBc,cAAe,SACfzB,cAAe,OACf8B,OAAU,UACVpP,QAAW,EACXqP,OAAU,EACVC,YAAa,OACbC,cAAe,IACf7lB,MAASE,KAAKuW,QAAQqP,iBAEtB5lB,KAAKuW,QAAQsP,YAEbN,EAAe,mBAAqB,SAIpCA,EAAe,gBAAkB,MAGrCvlB,KAAKojB,SAAWzI,EAAK,CAAEG,OAAQ9a,KAAKyhB,YAAa5G,KAAM,OAAQF,KAAM3a,KAAKuW,QAAQ2M,MAAO1L,OAAQ+N,EAAgBvK,UAAWhb,KAAKuW,QAAQ4N,WAAWf,WACpJpjB,KAAK8lB,iBAED9lB,KAAKuW,QAAQwP,UAEb/lB,KAAKyhB,YAAY3C,iBAAiB,YAAcR,GAAMte,KAAK6kB,cAAcvG,IACzEte,KAAKyhB,YAAY3C,iBAAiB,aAAeR,GAAMte,KAAK6kB,cAAcvG,KAE1Ete,KAAKuW,QAAQiM,aAEb9E,EAAQ1d,KAAKyhB,YAAa,IAAMzhB,KAAK0iB,WAAY,CAAE/E,eAAe,EAAMD,SAAS,KAK7FvG,iBAEInX,KAAKgmB,eAAiBrL,EAAK,CACvBG,OAAQ9a,KAAKyhB,YAAajK,OAAQ,CAC9B8B,QAAW,OACX+K,iBAAkB,MAClBc,cAAe,SACfc,eAAgB,QAEpBjL,UAAWhb,KAAKuW,QAAQ4N,WAAW6B,iBAEvC,MAAME,EAAS,CACX5M,QAAW,eACXgM,OAAU,EACVG,OAAU,EACVU,cAAe,OACf/P,QAAW,EACXmD,MAAS,OACTC,OAAU,OACVyK,mBAAoB,cACpBmC,kBAAmB,QACnBC,oBAAqB,YACrBC,QAAW,GACXxmB,MAASE,KAAKuW,QAAQgQ,iBACtBC,QAAW,GAEfxmB,KAAKyiB,QAAU,GACXziB,KAAKuW,QAAQiM,cAEbxiB,KAAKyiB,QAAQC,SAAW/H,EAAK,CAAEG,OAAQ9a,KAAKgmB,eAAgBrL,KAAM3a,KAAKuW,QAAQoM,eAAgB9H,KAAM,SAAUrD,OAAQ0O,EAAQlL,UAAWhb,KAAKuW,QAAQmM,WACvJhF,EAAQ1d,KAAKyiB,QAAQC,SAAU,IAAM1iB,KAAK0iB,aAE1C1iB,KAAKuW,QAAQkQ,WAEbzmB,KAAKyiB,QAAQO,MAAQrI,EAAK,CAAEG,OAAQ9a,KAAKgmB,eAAgBrL,KAAM3a,KAAKuW,QAAQmQ,YAAa7L,KAAM,SAAUrD,OAAQ0O,EAAQlL,UAAWhb,KAAKuW,QAAQyM,QACjJtF,EAAQ1d,KAAKyiB,QAAQO,MAAO,IAAMhjB,KAAKgjB,UAE3C,IAAK,IAAInN,KAAO7V,KAAKyiB,QACrB,CACI,MAAMyD,EAASlmB,KAAKyiB,QAAQ5M,GAC5BqQ,EAAOpH,iBAAiB,YAAa,KAEjCoH,EAAO3O,MAAM+O,QAAU,IAE3BJ,EAAOpH,iBAAiB,WAAY,KAEhCoH,EAAO3O,MAAM+O,QAAU,MAKnCnP,gBAEInX,KAAK2mB,WAAahM,EAAK,CACnBG,OAAQ9a,KAAKokB,OAAQvJ,KAAM,SAAUF,KAAM3a,KAAKuW,QAAQqQ,iBAAkBpP,OAAQ,CAC9EO,SAAY,WACZuK,OAAU,EACVF,MAAS,MACTkD,OAAU,EACVG,OAAU,EACVrP,QAAW,EACXoP,OAAU,YACV9B,cAAe,OACflK,OAAU,OACVD,MAAS,OACTrD,WAAc,QAElB8E,UAAWhb,KAAKuW,QAAQ4N,WAAWwC,aAEvC,MAAMxH,EAAQb,IAEV,MAAM7C,EAAQzb,KAAK+kB,kBAAkBzG,GAC/B/E,EAAQvZ,KAAKuZ,OAASvZ,KAAKshB,IAAIU,YAC/BxI,EAASxZ,KAAKwZ,QAAUxZ,KAAKshB,IAAIW,aACvCjiB,KAAKihB,UAAY,CACb1H,MAAOA,EAAQkC,EAAMuJ,MACrBxL,OAAQA,EAASiC,EAAMwJ,OAE3BjlB,KAAK0c,KAAK,gBACV4B,EAAE2B,kBAENjgB,KAAK2mB,WAAW7H,iBAAiB,YAAaK,GAC9Cnf,KAAK2mB,WAAW7H,iBAAiB,aAAcK,GAGnDhI,MAAMmH,GAEF,MAAM7C,EAAQzb,KAAK+kB,kBAAkBzG,GAEhCte,KAAK6mB,cAAcvI,IAAkB,IAAZA,EAAEwI,QAE5B9mB,KAAKghB,SAAWhhB,KAAK+mB,YACrB/mB,KAAKihB,WAAajhB,KAAKgnB,eAEvBhnB,KAAKghB,UAELhhB,KAAKqjB,KAAK5H,EAAMuJ,MAAQhlB,KAAKghB,QAAQvB,EAAGhE,EAAMwJ,MAAQjlB,KAAKghB,QAAQtB,GACnE1f,KAAK0c,KAAK,OAAQ1c,MAClBse,EAAE2B,kBAGFjgB,KAAKihB,YAELjhB,KAAKinB,OACDxL,EAAMuJ,MAAQhlB,KAAKihB,UAAU1H,MAC7BkC,EAAMwJ,MAAQjlB,KAAKihB,UAAUzH,QAEjCxZ,KAAK6gB,UAAY,KACjB7gB,KAAK0c,KAAK,SAAU1c,MACpBse,EAAE2B,kBAIV9I,MAEQnX,KAAKghB,SAELhhB,KAAK+mB,YAET/mB,KAAKihB,WAAajhB,KAAKgnB,cAG3B7P,aAEInX,KAAKshB,IAAIxC,iBAAiB,YAAa,IAAM9e,KAAKuhB,SAClDvhB,KAAKshB,IAAIxC,iBAAiB,aAAc,IAAM9e,KAAKuhB,SAGvDpK,YAEInX,KAAKghB,QAAU,KACfhhB,KAAK0c,KAAK,WAAY1c,MAG1BmX,cAEInX,KAAK+gB,SAAW/gB,KAAKihB,UAAY,KACjCjhB,KAAK0c,KAAK,aAAc1c,MAG5BmX,cAAcmH,GAEV,QAASpJ,OAAOgS,YAAe5I,aAAapJ,OAAOgS,WAGvD/P,kBAAkBmH,GAEd,OAAOte,KAAK6mB,cAAcvI,GAAKA,EAAEgB,eAAe,GAAKhB,EAQzDnH,eAAegQ,EAAWC,GAEtBpnB,KAAKkhB,kBAAkBiG,GAAaC,EAOxCjQ,OAAOgL,EAAQD,GAEXliB,KAAKmiB,OAASA,EACdniB,KAAKkiB,WAAaA,EAClB,IAAIzC,EAAIzf,KAAKyf,EACTC,EAAI1f,KAAK0f,EACbD,EAA0C,UAAtCzf,KAAKkhB,kBAAkBE,WAAyBe,EAAOC,MAAQpiB,KAAKuZ,MAAQkG,EAChFA,EAA0C,SAAtCzf,KAAKkhB,kBAAkBmG,WAAwBlF,EAAOE,KAAO5C,EACjEC,EAAwC,WAApC1f,KAAKkhB,kBAAkBC,SAAwBgB,EAAOG,OAAStiB,KAAKwZ,OAASkG,EACjFA,EAAwC,QAApC1f,KAAKkhB,kBAAkBC,SAAqBgB,EAAOI,IAAM7C,EAC7D1f,KAAKqjB,KAAK5D,EAAGC,GAOjBvI,QAAQmQ,GAEJ,OAAQA,IAAiBtnB,KAAK8gB,UAAY9gB,KAAKuW,QAAQgR,MAI3DpQ,WAEI,OAAOnX,KAAK8gB,QAGhB0G,QAEI,OAAOhT,SAASxU,KAAKshB,IAAI/J,MAAMS,QAEnCwP,MAAMzgB,GAEF/G,KAAKshB,IAAI/J,MAAMS,OAASjR,GAIhCwZ,EAAO1I,GAAK,ECv1BL,MCkCM4P,EAAgB,CACzBhI,EAAG,EACHC,EAAG,EACHnG,WAAO2D,EACP1D,YAAQ0D,EACRqK,OAAO,EACPG,cAAc,EAEdvD,WAAY,GAEZP,SAAU,QACVE,UAAW,OACXL,aAAc,EACdjM,OAAQ,GAERwM,OAAQ,OACR+B,SAAS,EACTpB,WAAW,EACXnC,aAAa,EACbiE,UAAU,EAEVjF,UAAU,EACV6D,eAAgB,OAEhBsC,gBAAiB,qBACjBzD,iBAAkB,UAClBvC,yBAA0B,UAC1BC,2BAA4B,UAC5B2E,iBAAkB,UAClBX,gBAAiB,UAEjBc,YDjEe,6rBCkEf/D,eDlEkuB,2rBCmEluBE,cDnEg9F,+2BCqEh9F+D,iBDrEohE,w6BEKlhEgB,EAAqB,CACvBC,QAAQ,EACRC,SAAS,EACTC,KAAM,GACNjoB,MAPkB,UAQlBkoB,QAAS,EACTC,UARiB,IAWd,MAAMC,EAaT/Q,YAAYqJ,EAAIjK,EAAQ,IAEpBvW,KAAKwgB,GAAKA,EACVxgB,KAAKuW,QAAUZ,OAAOoF,OAAO,GAAI6M,EAAoBrR,GACrDvW,KAAKmoB,WAAaxN,EAAK,CAAEG,OAAQ9a,KAAKwgB,GAAGoC,QAASpL,OAAQ,CAAEO,SAAY,cACxE/X,KAAKqnB,WAAa1M,EAAK,CACnBG,OAAQ9a,KAAKmoB,WAAY3Q,OAAQ,CAC7B8B,QAAS,OACTvB,SAAU,WACVyB,OAAWxZ,KAAKuW,QAAQ0R,UAAhB,KACRxE,aAAiBzjB,KAAKuW,QAAQ0R,UAAhB,KACdvG,gBAAiB1hB,KAAKuW,QAAQzW,SAGtCE,KAAKmhB,SAAWxG,EAAK,CACjBG,OAAQ9a,KAAKmoB,WAAY3Q,OAAQ,CAC7B8B,QAAS,OACTvB,SAAU,WACVwB,MAAUvZ,KAAKuW,QAAQ0R,UAAhB,KACPxE,aAAiBzjB,KAAKuW,QAAQ0R,UAAhB,KACdvG,gBAAiB1hB,KAAKuW,QAAQzW,SAGtCE,KAAKqnB,WACLrnB,KAAKooB,QAAU,GAGnBjR,OAEInX,KAAKmoB,WAAWvP,SAChB5Y,KAAKqoB,SAAU,EAGnBlR,UAAUmK,GAENA,EAAIlE,GAAG,OAAQ,IAAMpd,KAAKqjB,KAAK/B,IAC/BA,EAAIlE,GAAG,WAAY,IAAMpd,KAAKsoB,QAAQhH,IAG1CnK,WAAWoR,EAAMlB,EAAYlG,GAEzB,MAAM5H,EAAQvC,SAASmB,KAAKqQ,YACtBhP,EAASxC,SAASmB,KAAKsQ,aACzBF,EAAKlG,KAAOriB,KAAKuW,QAAQwR,MAAQxO,GAASgP,EAAKnG,MAAQpiB,KAAKuW,QAAQwR,MAAQ,IAExE9oB,KAAKwV,IAAI8T,EAAKhG,IAAM,IAAMviB,KAAKuW,QAAQwR,KAEvCV,EAAWxhB,KAAK,CAAE6iB,SAAUzpB,KAAKwV,IAAI8T,EAAKhG,IAAM,GAAIF,KAAM,EAAG9I,MAAAA,EAAOgJ,IAAK,EAAGnL,KAAM,MAAOyQ,QAAQ,IAE5F5oB,KAAKwV,IAAI8T,EAAKjG,OAAS9I,IAAWxZ,KAAKuW,QAAQwR,MAEpDV,EAAWxhB,KAAK,CAAE6iB,SAAUzpB,KAAKwV,IAAI8T,EAAKjG,OAAS9I,GAAS6I,KAAM,EAAG9I,MAAAA,EAAOgJ,IAAK/I,EAAQpC,KAAM,SAAUyQ,QAAQ,KAGrHU,EAAKhG,IAAMviB,KAAKuW,QAAQwR,MAAQvO,GAAU+O,EAAKjG,OAAStiB,KAAKuW,QAAQwR,MAAQ,IAEzE9oB,KAAKwV,IAAI8T,EAAKlG,KAAO,IAAMriB,KAAKuW,QAAQwR,KAExC5G,EAAStb,KAAK,CAAE6iB,SAAUzpB,KAAKwV,IAAI8T,EAAKlG,KAAO,GAAIE,IAAK,EAAG/I,OAAAA,EAAQ6I,KAAM,EAAGjL,KAAM,OAAQyQ,QAAQ,IAE7F5oB,KAAKwV,IAAI8T,EAAKnG,MAAQ7I,IAAUvZ,KAAKuW,QAAQwR,MAElD5G,EAAStb,KAAK,CAAE6iB,SAAUzpB,KAAKwV,IAAI8T,EAAKnG,MAAQ7I,GAAQgJ,IAAK,EAAG/I,OAAAA,EAAQ6I,KAAM9I,EAAOnC,KAAM,QAASyQ,QAAQ,KAKxH1Q,YAAYwR,EAAUJ,EAAMlB,EAAYlG,GAEpC,IAAK,IAAIG,KAAOthB,KAAKwgB,GAAGsH,QAEpB,IAAKxG,EAAI/K,QAAQqS,QAAUtH,IAAQqH,EACnC,CACI,MAAME,EAAQvH,EAAIA,IAAIwH,wBAClBP,EAAKlG,KAAOriB,KAAKuW,QAAQwR,MAAQc,EAAMzG,OAASmG,EAAKnG,MAAQpiB,KAAKuW,QAAQwR,MAAQc,EAAMxG,OAEpFpjB,KAAKwV,IAAI8T,EAAKhG,IAAMsG,EAAMvG,SAAWtiB,KAAKuW,QAAQwR,MAElDV,EAAWxhB,KAAK,CAAE6iB,SAAUzpB,KAAKwV,IAAI8T,EAAKhG,IAAMsG,EAAMvG,QAASD,KAAMwG,EAAMxG,KAAM9I,MAAOsP,EAAMtP,MAAOgJ,IAAKsG,EAAMvG,OAAQlL,KAAM,QAC1HnY,KAAKwV,IAAI8T,EAAKlG,KAAOwG,EAAMxG,OAASriB,KAAKuW,QAAQwR,KAEjD5G,EAAStb,KAAK,CAAE6iB,SAAUzpB,KAAKwV,IAAI8T,EAAKlG,KAAOwG,EAAMxG,MAAOE,IAAKsG,EAAMtG,IAAK/I,OAAQqP,EAAMrP,OAAQ6I,KAAMwG,EAAMxG,KAAMjL,KAAM,OAAQ2R,WAAW,IAExI9pB,KAAKwV,IAAI8T,EAAKnG,MAAQyG,EAAMzG,QAAUpiB,KAAKuW,QAAQwR,MAExD5G,EAAStb,KAAK,CAAE6iB,SAAUzpB,KAAKwV,IAAI8T,EAAKnG,MAAQyG,EAAMzG,OAAQG,IAAKsG,EAAMtG,IAAK/I,OAAQqP,EAAMrP,OAAQ6I,KAAMwG,EAAMzG,MAAOhL,KAAM,QAAS2R,WAAW,KAGhJ9pB,KAAKwV,IAAI8T,EAAKjG,OAASuG,EAAMtG,MAAQviB,KAAKuW,QAAQwR,OAEvDV,EAAWxhB,KAAK,CAAE6iB,SAAUzpB,KAAKwV,IAAI8T,EAAKjG,OAASuG,EAAMtG,KAAMF,KAAMwG,EAAMxG,KAAM9I,MAAOsP,EAAMtP,MAAOgJ,IAAKsG,EAAMtG,IAAKnL,KAAM,WACvHnY,KAAKwV,IAAI8T,EAAKlG,KAAOwG,EAAMxG,OAASriB,KAAKuW,QAAQwR,KAEjD5G,EAAStb,KAAK,CAAE6iB,SAAUzpB,KAAKwV,IAAI8T,EAAKlG,KAAOwG,EAAMxG,MAAOE,IAAKsG,EAAMtG,IAAK/I,OAAQqP,EAAMrP,OAAQ6I,KAAMwG,EAAMxG,KAAMjL,KAAM,OAAQ2R,WAAW,IAExI9pB,KAAKwV,IAAI8T,EAAKnG,MAAQyG,EAAMzG,QAAUpiB,KAAKuW,QAAQwR,MAExD5G,EAAStb,KAAK,CAAE6iB,SAAUzpB,KAAKwV,IAAI8T,EAAKnG,MAAQyG,EAAMzG,OAAQG,IAAKsG,EAAMtG,IAAK/I,OAAQqP,EAAMrP,OAAQ6I,KAAMwG,EAAMzG,MAAOhL,KAAM,QAAS2R,WAAW,MAIzJR,EAAKhG,IAAMviB,KAAKuW,QAAQwR,MAAQc,EAAMvG,QAAUiG,EAAKjG,OAAStiB,KAAKuW,QAAQwR,MAAQc,EAAMtG,MAErFtjB,KAAKwV,IAAI8T,EAAKlG,KAAOwG,EAAMzG,QAAUpiB,KAAKuW,QAAQwR,MAElD5G,EAAStb,KAAK,CAAE6iB,SAAUzpB,KAAKwV,IAAI8T,EAAKlG,KAAOwG,EAAMzG,OAAQG,IAAKsG,EAAMtG,IAAK/I,OAAQqP,EAAMrP,OAAQ6I,KAAMwG,EAAMzG,MAAOhL,KAAM,SACxHnY,KAAKwV,IAAI8T,EAAKhG,IAAMsG,EAAMtG,MAAQviB,KAAKuW,QAAQwR,KAE/CV,EAAWxhB,KAAK,CAAE6iB,SAAUzpB,KAAKwV,IAAI8T,EAAKhG,IAAMsG,EAAMtG,KAAMF,KAAMwG,EAAMxG,KAAM9I,MAAOsP,EAAMtP,MAAOgJ,IAAKsG,EAAMtG,IAAKnL,KAAM,MAAO2R,WAAW,IAErI9pB,KAAKwV,IAAI8T,EAAKjG,OAASuG,EAAMvG,SAAWtiB,KAAKuW,QAAQwR,MAE1DV,EAAWxhB,KAAK,CAAE6iB,SAAUzpB,KAAKwV,IAAI8T,EAAKjG,OAASuG,EAAMvG,QAASD,KAAMwG,EAAMxG,KAAM9I,MAAOsP,EAAMtP,MAAOgJ,IAAKsG,EAAMvG,OAAQlL,KAAM,SAAU2R,WAAW,KAGrJ9pB,KAAKwV,IAAI8T,EAAKnG,MAAQyG,EAAMxG,OAASriB,KAAKuW,QAAQwR,OAEvD5G,EAAStb,KAAK,CAAE6iB,SAAUzpB,KAAKwV,IAAI8T,EAAKnG,MAAQyG,EAAMxG,MAAOE,IAAKsG,EAAMtG,IAAK/I,OAAQqP,EAAMrP,OAAQ6I,KAAMwG,EAAMxG,KAAMjL,KAAM,UACvHnY,KAAKwV,IAAI8T,EAAKhG,IAAMsG,EAAMtG,MAAQviB,KAAKuW,QAAQwR,KAE/CV,EAAWxhB,KAAK,CAAE6iB,SAAUzpB,KAAKwV,IAAI8T,EAAKhG,IAAMsG,EAAMtG,KAAMF,KAAMwG,EAAMxG,KAAM9I,MAAOsP,EAAMtP,MAAOgJ,IAAKsG,EAAMtG,IAAKnL,KAAM,MAAO2R,WAAW,IAErI9pB,KAAKwV,IAAI8T,EAAKjG,OAASuG,EAAMvG,SAAWtiB,KAAKuW,QAAQwR,MAE1DV,EAAWxhB,KAAK,CAAE6iB,SAAUzpB,KAAKwV,IAAI8T,EAAKjG,OAASuG,EAAMvG,QAASD,KAAMwG,EAAMxG,KAAM9I,MAAOsP,EAAMtP,MAAOgJ,IAAKsG,EAAMvG,OAAQlL,KAAM,SAAU2R,WAAW,OAQ9K5R,KAAKmK,GAED,GAAIthB,KAAKqoB,SAAW/G,EAAI/K,QAAQqS,QAAUtH,EAAI0H,UAE1C,OAEJhpB,KAAKqnB,WAAW9P,MAAM+B,QAAU,OAChCtZ,KAAKmhB,SAAS5J,MAAM+B,QAAU,OAC9B,MAAM+N,EAAa,GACblG,EAAW,GACXoH,EAAOjH,EAAIA,IAAIwH,wBASrB,GARI9oB,KAAKuW,QAAQsR,QAEb7nB,KAAKipB,WAAWV,EAAMlB,EAAYlG,GAElCnhB,KAAKuW,QAAQuR,SAEb9nB,KAAKkpB,YAAY5H,EAAKiH,EAAMlB,EAAYlG,GAExCkG,EAAW7c,OACf,CACI6c,EAAW8B,KAAK,CAAC9oB,EAAGD,IAAeC,EAAEqoB,SAAWtoB,EAAEsoB,UAClD,MAAMU,EAAO/B,EAAW,GACxBrnB,KAAKqnB,WAAW9P,MAAM+B,QAAU,QAChCtZ,KAAKqnB,WAAW9P,MAAMgC,MAAQ6P,EAAK7P,MAAQ,KAC3CvZ,KAAKqnB,WAAW3H,EAAI0J,EAAK7G,IAAMviB,KAAKuW,QAAQ0R,UAAY,EACxDjoB,KAAKqnB,WAAW9P,MAAMwK,UAAY,aAAaqH,EAAK/G,UAAUriB,KAAKqnB,WAAW3H,OAC9E1f,KAAKqnB,WAAWjQ,KAAOgS,EAAKhS,KAC5BpX,KAAKqnB,WAAW0B,UAAYK,EAAKL,UACjC/oB,KAAKqnB,WAAWQ,OAASuB,EAAKvB,OAElC,GAAI1G,EAAS3W,OACb,CACI2W,EAASgI,KAAK,CAAC9oB,EAAGD,IAAeC,EAAEqoB,SAAWtoB,EAAEsoB,UAChD,MAAMU,EAAOjI,EAAS,GACtBnhB,KAAKmhB,SAAS5J,MAAM+B,QAAW,QAC/BtZ,KAAKmhB,SAAS5J,MAAMiC,OAAS4P,EAAK5P,OAAS,KAC3CxZ,KAAKmhB,SAAS1B,EAAI2J,EAAK/G,KAAOriB,KAAKuW,QAAQ0R,UAAY,EACvDjoB,KAAKmhB,SAAS5J,MAAMwK,UAAY,aAAa/hB,KAAKmhB,SAAS1B,OAAO2J,EAAK7G,SACvEviB,KAAKmhB,SAAS/J,KAAOgS,EAAKhS,KAC1BpX,KAAKmhB,SAAS4H,UAAYK,EAAKL,UAC/B/oB,KAAKmhB,SAAS0G,OAASuB,EAAKvB,QAIpC1Q,QAAQmK,GAEJ,IAAIthB,KAAKqoB,QAAT,CAIA,GAAsC,UAAlCroB,KAAKqnB,WAAW9P,MAAM+B,QAC1B,CACI,MAAM0O,EAAUhoB,KAAKqnB,WAAW0B,UAAY,EAAI/oB,KAAKuW,QAAQyR,QACvDqB,EAAS/H,EAAIgI,WAAahI,EAAI9H,OAAS8H,EAAI9H,OAAS8H,EAAIgI,UAAUC,QAAU,EAAI,EACtF,OAAQvpB,KAAKqnB,WAAWjQ,MAEpB,IAAK,MACDkK,EAAI5B,EAAI1f,KAAKqnB,WAAW3H,EAAI2J,EAASrB,EAAUhoB,KAAKuW,QAAQ0R,UAAY,EACxE,MAEJ,IAAK,SACD3G,EAAIgB,OAASrjB,KAAKoD,MAAMrC,KAAKqnB,WAAW3H,EAAI2J,EAASrB,EAAUhoB,KAAKuW,QAAQ0R,UAAY,GAGhG3G,EAAIkI,eAAe,WAAYxpB,KAAKqnB,WAAWQ,OAAS7nB,KAAKqnB,WAAWjQ,KAAO,IAEnF,GAAoC,UAAhCpX,KAAKmhB,SAAS5J,MAAM+B,QACxB,CACI,MAAM0O,EAAUhoB,KAAKmhB,SAAS4H,UAAY,EAAI/oB,KAAKuW,QAAQyR,QACrDqB,EAAS/H,EAAIgI,WAAahI,EAAI/H,MAAQ+H,EAAI/H,MAAQ+H,EAAIgI,UAAUG,QAAU,EAAI,EACpF,OAAQzpB,KAAKmhB,SAAS/J,MAElB,IAAK,OACDkK,EAAI7B,EAAIzf,KAAKmhB,SAAS1B,EAAI4J,EAASrB,EAAUhoB,KAAKuW,QAAQ0R,UAAY,EACtE,MAEJ,IAAK,QACD3G,EAAIc,MAAQnjB,KAAKoD,MAAMrC,KAAKmhB,SAAS1B,EAAI4J,EAASrB,EAAUhoB,KAAKuW,QAAQ0R,UAAY,GAG7F3G,EAAIkI,eAAe,aAAcxpB,KAAKmhB,SAAS0G,OAAS7nB,KAAKmhB,SAAS/J,KAAO,IAEjFpX,KAAKqnB,WAAW9P,MAAM+B,QAAUtZ,KAAKmhB,SAAS5J,MAAM+B,QAAU,SC5OtE,MAAMoQ,EAAuB,CACzB5O,OAAQ9D,SAASmB,KACjBwR,OAAO,EACPzH,YAAY,EACZ6F,MAAM,GCFV,MAAMvH,EAAK,IDeJ,MAUHrJ,YAAYZ,EAAQ,GAAIiH,EAAe,IAEnCxd,KAAK8nB,QAAU,GACf9nB,KAAK4gB,OAAS,KACd5gB,KAAKuW,QAAUZ,OAAOoF,OAAO,GAAI2O,EAAsBnT,GACvDvW,KAAKwd,eAAiB7H,OAAOoF,OAAO,GAAI0M,EAAejK,GAClDxd,KAAKuW,QAAQoT,OAEd3K,QAAQ4K,IAAI,2CAA4C,kBAE5D5pB,KAAK6pB,WAAWtT,EAAQuE,QAAU9D,SAASmB,MACvCnY,KAAKuW,QAAQwR,MAEb/nB,KAAK+nB,MAA2B,IAAtB/nB,KAAKuW,QAAQwR,KAAgB,GAAK/nB,KAAKuW,QAAQwR,MAE7D7S,OAAO4J,iBAAiB,SAAU,IAAM9e,KAAKinB,UAajD9P,aAAaZ,EAAQ,IAEjB,MAAM+K,EAAM,IAAIf,EAAOvgB,KAAM2V,OAAOoF,OAAO,GAAI/a,KAAKwd,eAAgBjH,IAkBpE,OAjBA+K,EAAIlE,GAAG,OAAQ,IAAMpd,KAAK8pB,MAAMxI,IAChCA,EAAIlE,GAAG,QAAS,IAAMpd,KAAK+pB,OAAOzI,IAClCA,EAAIlE,GAAG,OAAQ,IAAMpd,KAAKgqB,MAAM1I,IAChCA,EAAIlE,GAAG,QAAS,IAAMpd,KAAKiqB,OAAO3I,IAClCA,EAAIA,IAAIxC,iBAAiB,YAAcR,GAAMte,KAAKkqB,MAAM5L,IACxDgD,EAAIA,IAAIxC,iBAAiB,YAAcR,GAAMte,KAAKkqB,MAAM5L,IACxDgD,EAAIA,IAAIxC,iBAAiB,UAAYR,GAAMte,KAAKmqB,IAAI7L,IACpDgD,EAAIA,IAAIxC,iBAAiB,WAAaR,GAAMte,KAAKmqB,IAAI7L,IACjDte,KAAKoqB,QAAU7T,EAAQqS,QAEvB5oB,KAAKoqB,MAAMC,UAAU/I,GAEzBA,EAAI2F,OAAOjnB,KAAKmiB,OAAQniB,KAAKuW,QAAQ2L,YACjCZ,EAAI/K,QAAQmR,cAEZpG,EAAI2B,OAED3B,EAUXnK,aAAamK,GAgBT,OAdAA,EAAIlE,GAAG,OAAQpd,KAAK8pB,MAAO9pB,MAC3BshB,EAAIlE,GAAG,QAASpd,KAAK+pB,OAAQ/pB,MAC7BshB,EAAIlE,GAAG,OAAQpd,KAAKgqB,MAAOhqB,MAC3BshB,EAAIlE,GAAG,QAASpd,KAAKiqB,OAAQjqB,MAC7BA,KAAKshB,IAAIhK,YAAYgK,EAAIA,KACzBA,EAAId,GAAKxgB,KACTshB,EAAIA,IAAIxC,iBAAiB,YAAcR,GAAMte,KAAKkqB,MAAM5L,IACxDgD,EAAIA,IAAIxC,iBAAiB,YAAcR,GAAMte,KAAKkqB,MAAM5L,IACxDgD,EAAIA,IAAIxC,iBAAiB,UAAYR,GAAMte,KAAKmqB,IAAI7L,IACpDgD,EAAIA,IAAIxC,iBAAiB,WAAaR,GAAMte,KAAKmqB,IAAI7L,IACjDte,KAAKoqB,QAAUpqB,KAAKwd,eAAeoL,QAEnC5oB,KAAKoqB,MAAMC,UAAU/I,GAElBA,EAOXnK,KAAKZ,GAEDvW,KAAKoqB,MAAQ,IAAIlC,EAAKloB,KAAMuW,GAC5B,IAAK,IAAI+K,KAAOthB,KAAK8nB,QAEZxG,EAAI/K,QAAQqS,QAEb5oB,KAAKoqB,MAAMC,UAAU/I,GASjCnK,YAAYmK,GAER,MAAMgJ,EAAQtqB,KAAK8nB,QAAQ1T,QAAQkN,GACnCtC,QAAQuL,QAAkB,IAAXD,EAAc,kDACzBA,IAAUtqB,KAAK8nB,QAAQtd,OAAS,IAEhCxK,KAAK8nB,QAAQ0C,OAAOF,EAAO,GAC3BtqB,KAAK8nB,QAAQjiB,KAAKyb,GAClBthB,KAAKyqB,YAQbtT,WAAWmK,GAEP,MAAMgJ,EAAQtqB,KAAK8nB,QAAQ1T,QAAQkN,GACnCtC,QAAQuL,QAAkB,IAAXD,EAAc,kDACf,IAAVA,IAEAtqB,KAAK8nB,QAAQ0C,OAAOF,EAAO,GAC3BtqB,KAAK8nB,QAAQ4C,QAAQpJ,GACrBthB,KAAKyqB,YAQbtT,OAEI,MAAM6C,EAAO,GACb,IAAK,IAAI5X,EAAI,EAAGA,EAAIpC,KAAK8nB,QAAQtd,OAAQpI,IACzC,CACI,MAAMuoB,EAAQ3qB,KAAK8nB,QAAQ1lB,GAC3B4X,EAAK2Q,EAAM9S,IAAM8S,EAAMC,OACvB5Q,EAAK2Q,EAAM9S,IAAIgT,MAAQzoB,EAE3B,OAAO4X,EAQX7C,KAAK6C,GAED,IAAK,IAAI5X,EAAI,EAAGA,EAAIpC,KAAK8nB,QAAQtd,OAAQpI,IACzC,CACI,MAAMuoB,EAAQ3qB,KAAK8nB,QAAQ1lB,GACvB4X,EAAK2Q,EAAM9S,KAEX8S,EAAMG,KAAK9Q,EAAK2Q,EAAM9S,MASlCV,WAEI,IAAK,IAAImK,KAAOthB,KAAK8nB,QAEjBxG,EAAI0B,QAERhjB,KAAK8nB,QAAU,GACf9nB,KAAK4gB,OAAS,KAQlBzJ,WAEI,IAAI/U,EAAI,EACR,IAAK,MAAMkf,KAAOthB,KAAK8nB,QAEdxG,EAAIyJ,aAELzJ,EAAIkG,EAAIplB,KAQpB+U,WAAW2D,GAOP9a,KAAKshB,IAAM3G,EAAK,CACZG,OAAAA,EAAQtD,OAAQ,CACZkM,cAAe,OACfnK,MAAS,OACTC,OAAU,OACV1B,SAAY,SACZkT,WAAY,EACZxF,OAAU,aASlBxlB,KAAK4iB,QAAUjI,EAAK,CAChBG,OAAQ9a,KAAKshB,IAAK9J,OAAQ,CACtBkM,cAAe,OACf3L,SAAY,WACZwK,IAAO,EACPF,KAAQ,EACR9I,MAAS,OACTC,OAAU,OACV1B,SAAY,YAGpB9X,KAAK4iB,QAAQ9D,iBAAiB,YAAcR,GAAMte,KAAKkqB,MAAM5L,IAC7Dte,KAAK4iB,QAAQ9D,iBAAiB,YAAcR,GAAMte,KAAKkqB,MAAM5L,IAC7Dte,KAAK4iB,QAAQ9D,iBAAiB,UAAYR,GAAMte,KAAKmqB,IAAI7L,IACzDte,KAAK4iB,QAAQ9D,iBAAiB,WAAaR,GAAMte,KAAKmqB,IAAI7L,IAE1Dte,KAAKirB,aAAetQ,EAAK,CACrBG,OAAQ9a,KAAKshB,IACb9J,OAAQ,CACJ8B,QAAW,OACXoK,cAAe,OACf3L,SAAY,WACZwK,IAAO,EACPF,KAAQ,EACR9I,MAAS,OACTC,OAAU,OACV1B,SAAY,SACZ5B,WAAclW,KAAKwd,eAAemK,mBAG1C3nB,KAAKirB,aAAanM,iBAAiB,YAAcR,IAAQte,KAAKkqB,MAAM5L,GAAIA,EAAE2B,iBAAkB3B,EAAEwG,oBAC9F9kB,KAAKirB,aAAanM,iBAAiB,YAAcR,IAAQte,KAAKkqB,MAAM5L,GAAIA,EAAE2B,iBAAkB3B,EAAEwG,oBAC9F9kB,KAAKirB,aAAanM,iBAAiB,UAAYR,IAAQte,KAAKmqB,IAAI7L,GAAIA,EAAE2B,iBAAkB3B,EAAEwG,oBAC1F9kB,KAAKirB,aAAanM,iBAAiB,WAAaR,IAAQte,KAAKmqB,IAAI7L,GAAIA,EAAE2B,iBAAkB3B,EAAEwG,oBAC3F9kB,KAAKirB,aAAanM,iBAAiB,YAAcR,IAAQA,EAAE2B,iBAAkB3B,EAAEwG,oBAC/E9kB,KAAKirB,aAAanM,iBAAiB,aAAeR,IAAQA,EAAE2B,iBAAkB3B,EAAEwG,oBAGpF3N,MAAMmK,GAEFthB,KAAK8nB,QAAQjiB,KAAKyb,GAClBthB,KAAKyqB,WACDnJ,EAAI/K,QAAQgR,OAEZvnB,KAAKirB,aAAa1T,MAAM+B,QAAU,QAClCtZ,KAAKirB,aAAa1T,MAAMS,OAASsJ,EAAIkG,GAIrCxnB,KAAKirB,aAAa1T,MAAM+B,QAAU,OAI1CnC,OAAOmK,GAEH,GAAIthB,KAAK4gB,SAAWU,EAEhB,OAEAthB,KAAK4gB,QAEL5gB,KAAK4gB,OAAOsK,OAEhB,MAAMZ,EAAQtqB,KAAK8nB,QAAQ1T,QAAQkN,GACnCtC,QAAQuL,QAAkB,IAAXD,EAAc,2DACzBA,IAAUtqB,KAAK8nB,QAAQtd,OAAS,IAEhCxK,KAAK8nB,QAAQ0C,OAAOF,EAAO,GAC3BtqB,KAAK8nB,QAAQjiB,KAAKyb,IAEtBthB,KAAKyqB,WACLzqB,KAAK4gB,OAAS5gB,KAAK8nB,QAAQ9nB,KAAK8nB,QAAQtd,OAAS,GAGrD2M,MAAMmK,GAEEthB,KAAK4gB,SAAWU,IAEhBthB,KAAK4gB,OAAS,MAItBzJ,OAAOmK,GAEH,MAAMgJ,EAAQtqB,KAAK8nB,QAAQ1T,QAAQkN,GACnCtC,QAAQuL,QAAkB,IAAXD,EAAc,2DAC7BtqB,KAAK8nB,QAAQ0C,OAAOF,EAAO,GAC3B,MAAMa,EAAOnrB,KAAK8nB,QAAQ9nB,KAAK8nB,QAAQtd,OAAS,GAE5C8W,EAAI0H,SAAQ,KAERmC,GAAQA,EAAKnC,UAEbhpB,KAAKirB,aAAa1T,MAAMS,OAASmT,EAAK3D,EAItCxnB,KAAKirB,aAAa1T,MAAM+B,QAAU,QAG1C6R,EAAK5J,QAGTpK,MAAMmH,GAEF,IAAK,MAAMzI,KAAO7V,KAAK8nB,QAEnB9nB,KAAK8nB,QAAQjS,GAAKqU,MAAM5L,GAIhCnH,IAAImH,GAEA,IAAK,MAAMzI,KAAO7V,KAAK8nB,QAEnB9nB,KAAK8nB,QAAQjS,GAAKsU,IAAI7L,GAI9BnH,WAAWmK,GAEP,OAAQthB,KAAKunB,OAASvnB,KAAKunB,QAAUjG,EAIzCa,aAEI,MAAO,CACHI,IAAKviB,KAAKshB,IAAI8J,UACd9I,OAAQtiB,KAAKshB,IAAI8J,UAAYprB,KAAKshB,IAAIW,aACtCI,KAAMriB,KAAKshB,IAAI+J,WACfjJ,MAAOpiB,KAAKshB,IAAI+J,WAAarrB,KAAKshB,IAAIU,aAI9C7K,SAEI,MAAMgL,EAASniB,KAAKmiB,OACpB,IAAK,MAAMtM,KAAO7V,KAAK8nB,QAEnB9nB,KAAK8nB,QAAQjS,GAAKoR,OAAO9E,EAAQniB,KAAKuW,QAAQ2L,cC3X1D1B,EAAGuH,KAAK,CAAEF,QAAQ,EAAMC,SAAS,EAAME,QAAS,IAEhD9S,OAAOoW,OAAS,MAehB,WAEI,MAAM5T,EAAO8I,EAAG+K,aAAa,CAAE9L,EAAG,GAAIC,EAJ9B,GAIsC8B,UAAU,EAAO0B,MAAO,cAAeyB,WAAW,EAAOnC,aAAa,EAAOgJ,aAAa,EAAO3F,aAAa,EAAMY,UAAU,IAC5K/O,EAAK6M,QAAQhN,MAAMnB,QAAU,MAC7BsB,EAAK6M,QAAQlM,UAAY,yBACzBX,EAAKuL,OAjBLvL,GAoBJ,WAEI,MAAMA,EAAO8I,EAAG+K,aAAa,CACzBhS,MAAO,IAAKC,OAAQ,IACpBiG,EAAG,IAAKC,EAAG,IACX2F,eAAgB,OAChB1D,yBAA0B,QAC1BC,2BAA4B,SAC5BsC,iBAAkB,qBAEtBxM,EAAK6M,QAAQhN,MAAMnB,QAAU,QAC7BsB,EAAK6M,QAAQlM,UAAY,sHACzBX,EAAKuL,OA/BLwI,GAkCJ,WAGI,MAAM/T,EAAO8I,EAAG+K,aAAa,CAAE9L,EAAG,IAAKC,EAAG,IAAKnG,MAAO,IAAK2J,MAAO,4BAClExL,EAAK6M,QAAQhN,MAAMnB,QAAU,MAC7BuE,EAAK,CAAEG,OAAQpD,EAAK6M,QAAS5J,KAAM,oMACnC,MAAM5D,EAAM4D,EAAK,CAAEG,OAAQpD,EAAK6M,QAAS/M,OAAQ,CAAEkU,UAAW,SAAUC,UAAW,SAC7EzF,EAASvL,EAAK,CAAEG,OAAQ/D,EAAK8D,KAAM,SAAUF,KAAM,sBAEzD,IAAI8E,EAAI,EACJC,EAAI,EA2BRwG,EAAO0F,QAAU,IA1BjB,SAASC,IAGL,MAAMtE,EAAQ/G,EAAG+K,aAAa,CAC1BhE,OAAO,EACPhO,MAAO,IACP2J,MAAO,eACPsI,aAAa,EACbhJ,aAAa,IAEXzL,EAAM4D,EAAK,CAAEG,OAAQyM,EAAMhD,QAAS/M,OAAQ,CAAEiO,OAAU,WAC9D9K,EAAK,CAAEG,OAAQ/D,EAAK4D,KAAM,wDAC1B,MAAMmR,EAAYnR,EAAK,CAAEG,OAAQ/D,EAAKS,OAAQ,CAAEuU,aAAc,SAAUtG,OAAQ,MAAOnM,QAAS,UAC1F0S,EAAYrR,EAAK,CAAEG,OAAQgR,EAAWjR,KAAM,SAAUF,KAAM,qBACnDA,EAAK,CAAEG,OAAQgR,EAAWjR,KAAM,SAAUF,KAAM,gBACxDiR,QAAU,IAAMrE,EAAMvE,QAC7BgJ,EAAUJ,QAAU,IAAMC,IAC1BtE,EAAMtE,OAGNsE,EAAM0E,OAAOvU,GACb6P,EAAMlE,KAAKkE,EAAM9H,EAAIA,EAAG8H,EAAM7H,EAAIA,GAClCD,GAAK,GACLC,GAAK,GAGcmM,GACvBnU,EAAKuL,OAvELiJ,GA0EJ,WAEI,MAAMxU,EAAO8I,EAAG+K,aAAa,CAAE9L,EAAG,IAAKC,EApE/B,GAoEuCwD,MAAO,yBAA2BV,aAAa,IAC9F9K,EAAK6M,QAAQlM,UAAY,kIACzBX,EAAKuL,OACLvL,EAAKoL,aA9ELqJ,GAiFJ,WAEI,MAAMzU,EAAO8I,EAAG+K,aAAa,CAAE9L,EAAG,GAAIC,EAAG,IAAKwD,MAAO,qBACrDvI,EAAK,CAAEG,OAAQpD,EAAK6M,QAAS5J,KAAM,gEAAiEnD,OAAQ,CAAEiO,OAAQ,WACtH,MAAMhD,EAAU9H,EAAK,CAAEG,OAAQpD,EAAK6M,QAAS/M,OAAQ,CAAEuU,aAAc,YAC/DnB,EAAOjQ,EAAK,CAAEG,OAAQ2H,EAAS9H,KAAM,oBAAqBE,KAAM,SAAUrD,OAAQ,CAAEiO,OAAQ,MAAOvP,WAAY,sBAC/G4U,EAAOnQ,EAAK,CAAEG,OAAQ2H,EAAS9H,KAAM,oBAAqBE,KAAM,SAAUrD,OAAQ,CAAEiO,OAAQ,MAAOvP,WAAY,sBAErH,IAAI8D,EADJtC,EAAKuL,OAEL2H,EAAKgB,QAAU,IAAM5R,EAAOwG,EAAGoK,OAC/BE,EAAKc,QAAU,KAAY5R,GAAMwG,EAAGsK,KAAK9Q,IA1FzCoS,GA6FJ,WAEI,MAAM1U,EAAO8I,EAAG+K,aAAa,CAAE9L,EAAG,IAAKC,EAAG,GAAInG,MAAO,IAAKC,OAAQ,IAAK0J,MAAO,oBAAqB1L,OAAQ,CAAEM,SAAU,YACvHJ,EAAK6M,QAAQlM,UAAY,sGACzBX,EAAKuL,OAhGLoJ,GAEAC,KAiGc3R,EAAK,CAAEG,OAAQ0F,EAAGoC,QAASpL,OAAQ,CAAEO,SAAU,WAAYwK,IAAK,MAAOF,KAAM,MAAON,UAAW,wBAAyBjiB,MAAO,WACvIuY,UAAY,0EAEtB,MAAMkU,EAAM,IAAIjW,EAChB,SAASgW,IAELC,EAAIC,OAAM,GAAO,GACjBC,sBAAsBH"}