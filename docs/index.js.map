{"version":3,"file":"index.js","sources":["../node_modules/tinycolor2/tinycolor.js","../node_modules/yy-fps/index.js","../node_modules/yy-counter/counter.js","../src/html.js","../node_modules/eventemitter3/index.js","../node_modules/clicked/clicked.js","../src/Menu/config.js","../src/accelerator.js","../src/Menu/MenuItem.js","../src/Menu/Menu.js","../src/Window.js","../src/images.js","../src/defaults.js","../src/Snap.js","../src/WindowManager.js","src/menu.js","src/code.js"],"sourcesContent":["// TinyColor v1.4.1\n// https://github.com/bgrins/TinyColor\n// Brian Grinstead, MIT License\n\n(function(Math) {\n\nvar trimLeft = /^\\s+/,\n    trimRight = /\\s+$/,\n    tinyCounter = 0,\n    mathRound = Math.round,\n    mathMin = Math.min,\n    mathMax = Math.max,\n    mathRandom = Math.random;\n\nfunction tinycolor (color, opts) {\n\n    color = (color) ? color : '';\n    opts = opts || { };\n\n    // If input is already a tinycolor, return itself\n    if (color instanceof tinycolor) {\n       return color;\n    }\n    // If we are called as a function, call using new instead\n    if (!(this instanceof tinycolor)) {\n        return new tinycolor(color, opts);\n    }\n\n    var rgb = inputToRGB(color);\n    this._originalInput = color,\n    this._r = rgb.r,\n    this._g = rgb.g,\n    this._b = rgb.b,\n    this._a = rgb.a,\n    this._roundA = mathRound(100*this._a) / 100,\n    this._format = opts.format || rgb.format;\n    this._gradientType = opts.gradientType;\n\n    // Don't let the range of [0,255] come back in [0,1].\n    // Potentially lose a little bit of precision here, but will fix issues where\n    // .5 gets interpreted as half of the total, instead of half of 1\n    // If it was supposed to be 128, this was already taken care of by `inputToRgb`\n    if (this._r < 1) { this._r = mathRound(this._r); }\n    if (this._g < 1) { this._g = mathRound(this._g); }\n    if (this._b < 1) { this._b = mathRound(this._b); }\n\n    this._ok = rgb.ok;\n    this._tc_id = tinyCounter++;\n}\n\ntinycolor.prototype = {\n    isDark: function() {\n        return this.getBrightness() < 128;\n    },\n    isLight: function() {\n        return !this.isDark();\n    },\n    isValid: function() {\n        return this._ok;\n    },\n    getOriginalInput: function() {\n      return this._originalInput;\n    },\n    getFormat: function() {\n        return this._format;\n    },\n    getAlpha: function() {\n        return this._a;\n    },\n    getBrightness: function() {\n        //http://www.w3.org/TR/AERT#color-contrast\n        var rgb = this.toRgb();\n        return (rgb.r * 299 + rgb.g * 587 + rgb.b * 114) / 1000;\n    },\n    getLuminance: function() {\n        //http://www.w3.org/TR/2008/REC-WCAG20-20081211/#relativeluminancedef\n        var rgb = this.toRgb();\n        var RsRGB, GsRGB, BsRGB, R, G, B;\n        RsRGB = rgb.r/255;\n        GsRGB = rgb.g/255;\n        BsRGB = rgb.b/255;\n\n        if (RsRGB <= 0.03928) {R = RsRGB / 12.92;} else {R = Math.pow(((RsRGB + 0.055) / 1.055), 2.4);}\n        if (GsRGB <= 0.03928) {G = GsRGB / 12.92;} else {G = Math.pow(((GsRGB + 0.055) / 1.055), 2.4);}\n        if (BsRGB <= 0.03928) {B = BsRGB / 12.92;} else {B = Math.pow(((BsRGB + 0.055) / 1.055), 2.4);}\n        return (0.2126 * R) + (0.7152 * G) + (0.0722 * B);\n    },\n    setAlpha: function(value) {\n        this._a = boundAlpha(value);\n        this._roundA = mathRound(100*this._a) / 100;\n        return this;\n    },\n    toHsv: function() {\n        var hsv = rgbToHsv(this._r, this._g, this._b);\n        return { h: hsv.h * 360, s: hsv.s, v: hsv.v, a: this._a };\n    },\n    toHsvString: function() {\n        var hsv = rgbToHsv(this._r, this._g, this._b);\n        var h = mathRound(hsv.h * 360), s = mathRound(hsv.s * 100), v = mathRound(hsv.v * 100);\n        return (this._a == 1) ?\n          \"hsv(\"  + h + \", \" + s + \"%, \" + v + \"%)\" :\n          \"hsva(\" + h + \", \" + s + \"%, \" + v + \"%, \"+ this._roundA + \")\";\n    },\n    toHsl: function() {\n        var hsl = rgbToHsl(this._r, this._g, this._b);\n        return { h: hsl.h * 360, s: hsl.s, l: hsl.l, a: this._a };\n    },\n    toHslString: function() {\n        var hsl = rgbToHsl(this._r, this._g, this._b);\n        var h = mathRound(hsl.h * 360), s = mathRound(hsl.s * 100), l = mathRound(hsl.l * 100);\n        return (this._a == 1) ?\n          \"hsl(\"  + h + \", \" + s + \"%, \" + l + \"%)\" :\n          \"hsla(\" + h + \", \" + s + \"%, \" + l + \"%, \"+ this._roundA + \")\";\n    },\n    toHex: function(allow3Char) {\n        return rgbToHex(this._r, this._g, this._b, allow3Char);\n    },\n    toHexString: function(allow3Char) {\n        return '#' + this.toHex(allow3Char);\n    },\n    toHex8: function(allow4Char) {\n        return rgbaToHex(this._r, this._g, this._b, this._a, allow4Char);\n    },\n    toHex8String: function(allow4Char) {\n        return '#' + this.toHex8(allow4Char);\n    },\n    toRgb: function() {\n        return { r: mathRound(this._r), g: mathRound(this._g), b: mathRound(this._b), a: this._a };\n    },\n    toRgbString: function() {\n        return (this._a == 1) ?\n          \"rgb(\"  + mathRound(this._r) + \", \" + mathRound(this._g) + \", \" + mathRound(this._b) + \")\" :\n          \"rgba(\" + mathRound(this._r) + \", \" + mathRound(this._g) + \", \" + mathRound(this._b) + \", \" + this._roundA + \")\";\n    },\n    toPercentageRgb: function() {\n        return { r: mathRound(bound01(this._r, 255) * 100) + \"%\", g: mathRound(bound01(this._g, 255) * 100) + \"%\", b: mathRound(bound01(this._b, 255) * 100) + \"%\", a: this._a };\n    },\n    toPercentageRgbString: function() {\n        return (this._a == 1) ?\n          \"rgb(\"  + mathRound(bound01(this._r, 255) * 100) + \"%, \" + mathRound(bound01(this._g, 255) * 100) + \"%, \" + mathRound(bound01(this._b, 255) * 100) + \"%)\" :\n          \"rgba(\" + mathRound(bound01(this._r, 255) * 100) + \"%, \" + mathRound(bound01(this._g, 255) * 100) + \"%, \" + mathRound(bound01(this._b, 255) * 100) + \"%, \" + this._roundA + \")\";\n    },\n    toName: function() {\n        if (this._a === 0) {\n            return \"transparent\";\n        }\n\n        if (this._a < 1) {\n            return false;\n        }\n\n        return hexNames[rgbToHex(this._r, this._g, this._b, true)] || false;\n    },\n    toFilter: function(secondColor) {\n        var hex8String = '#' + rgbaToArgbHex(this._r, this._g, this._b, this._a);\n        var secondHex8String = hex8String;\n        var gradientType = this._gradientType ? \"GradientType = 1, \" : \"\";\n\n        if (secondColor) {\n            var s = tinycolor(secondColor);\n            secondHex8String = '#' + rgbaToArgbHex(s._r, s._g, s._b, s._a);\n        }\n\n        return \"progid:DXImageTransform.Microsoft.gradient(\"+gradientType+\"startColorstr=\"+hex8String+\",endColorstr=\"+secondHex8String+\")\";\n    },\n    toString: function(format) {\n        var formatSet = !!format;\n        format = format || this._format;\n\n        var formattedString = false;\n        var hasAlpha = this._a < 1 && this._a >= 0;\n        var needsAlphaFormat = !formatSet && hasAlpha && (format === \"hex\" || format === \"hex6\" || format === \"hex3\" || format === \"hex4\" || format === \"hex8\" || format === \"name\");\n\n        if (needsAlphaFormat) {\n            // Special case for \"transparent\", all other non-alpha formats\n            // will return rgba when there is transparency.\n            if (format === \"name\" && this._a === 0) {\n                return this.toName();\n            }\n            return this.toRgbString();\n        }\n        if (format === \"rgb\") {\n            formattedString = this.toRgbString();\n        }\n        if (format === \"prgb\") {\n            formattedString = this.toPercentageRgbString();\n        }\n        if (format === \"hex\" || format === \"hex6\") {\n            formattedString = this.toHexString();\n        }\n        if (format === \"hex3\") {\n            formattedString = this.toHexString(true);\n        }\n        if (format === \"hex4\") {\n            formattedString = this.toHex8String(true);\n        }\n        if (format === \"hex8\") {\n            formattedString = this.toHex8String();\n        }\n        if (format === \"name\") {\n            formattedString = this.toName();\n        }\n        if (format === \"hsl\") {\n            formattedString = this.toHslString();\n        }\n        if (format === \"hsv\") {\n            formattedString = this.toHsvString();\n        }\n\n        return formattedString || this.toHexString();\n    },\n    clone: function() {\n        return tinycolor(this.toString());\n    },\n\n    _applyModification: function(fn, args) {\n        var color = fn.apply(null, [this].concat([].slice.call(args)));\n        this._r = color._r;\n        this._g = color._g;\n        this._b = color._b;\n        this.setAlpha(color._a);\n        return this;\n    },\n    lighten: function() {\n        return this._applyModification(lighten, arguments);\n    },\n    brighten: function() {\n        return this._applyModification(brighten, arguments);\n    },\n    darken: function() {\n        return this._applyModification(darken, arguments);\n    },\n    desaturate: function() {\n        return this._applyModification(desaturate, arguments);\n    },\n    saturate: function() {\n        return this._applyModification(saturate, arguments);\n    },\n    greyscale: function() {\n        return this._applyModification(greyscale, arguments);\n    },\n    spin: function() {\n        return this._applyModification(spin, arguments);\n    },\n\n    _applyCombination: function(fn, args) {\n        return fn.apply(null, [this].concat([].slice.call(args)));\n    },\n    analogous: function() {\n        return this._applyCombination(analogous, arguments);\n    },\n    complement: function() {\n        return this._applyCombination(complement, arguments);\n    },\n    monochromatic: function() {\n        return this._applyCombination(monochromatic, arguments);\n    },\n    splitcomplement: function() {\n        return this._applyCombination(splitcomplement, arguments);\n    },\n    triad: function() {\n        return this._applyCombination(triad, arguments);\n    },\n    tetrad: function() {\n        return this._applyCombination(tetrad, arguments);\n    }\n};\n\n// If input is an object, force 1 into \"1.0\" to handle ratios properly\n// String input requires \"1.0\" as input, so 1 will be treated as 1\ntinycolor.fromRatio = function(color, opts) {\n    if (typeof color == \"object\") {\n        var newColor = {};\n        for (var i in color) {\n            if (color.hasOwnProperty(i)) {\n                if (i === \"a\") {\n                    newColor[i] = color[i];\n                }\n                else {\n                    newColor[i] = convertToPercentage(color[i]);\n                }\n            }\n        }\n        color = newColor;\n    }\n\n    return tinycolor(color, opts);\n};\n\n// Given a string or object, convert that input to RGB\n// Possible string inputs:\n//\n//     \"red\"\n//     \"#f00\" or \"f00\"\n//     \"#ff0000\" or \"ff0000\"\n//     \"#ff000000\" or \"ff000000\"\n//     \"rgb 255 0 0\" or \"rgb (255, 0, 0)\"\n//     \"rgb 1.0 0 0\" or \"rgb (1, 0, 0)\"\n//     \"rgba (255, 0, 0, 1)\" or \"rgba 255, 0, 0, 1\"\n//     \"rgba (1.0, 0, 0, 1)\" or \"rgba 1.0, 0, 0, 1\"\n//     \"hsl(0, 100%, 50%)\" or \"hsl 0 100% 50%\"\n//     \"hsla(0, 100%, 50%, 1)\" or \"hsla 0 100% 50%, 1\"\n//     \"hsv(0, 100%, 100%)\" or \"hsv 0 100% 100%\"\n//\nfunction inputToRGB(color) {\n\n    var rgb = { r: 0, g: 0, b: 0 };\n    var a = 1;\n    var s = null;\n    var v = null;\n    var l = null;\n    var ok = false;\n    var format = false;\n\n    if (typeof color == \"string\") {\n        color = stringInputToObject(color);\n    }\n\n    if (typeof color == \"object\") {\n        if (isValidCSSUnit(color.r) && isValidCSSUnit(color.g) && isValidCSSUnit(color.b)) {\n            rgb = rgbToRgb(color.r, color.g, color.b);\n            ok = true;\n            format = String(color.r).substr(-1) === \"%\" ? \"prgb\" : \"rgb\";\n        }\n        else if (isValidCSSUnit(color.h) && isValidCSSUnit(color.s) && isValidCSSUnit(color.v)) {\n            s = convertToPercentage(color.s);\n            v = convertToPercentage(color.v);\n            rgb = hsvToRgb(color.h, s, v);\n            ok = true;\n            format = \"hsv\";\n        }\n        else if (isValidCSSUnit(color.h) && isValidCSSUnit(color.s) && isValidCSSUnit(color.l)) {\n            s = convertToPercentage(color.s);\n            l = convertToPercentage(color.l);\n            rgb = hslToRgb(color.h, s, l);\n            ok = true;\n            format = \"hsl\";\n        }\n\n        if (color.hasOwnProperty(\"a\")) {\n            a = color.a;\n        }\n    }\n\n    a = boundAlpha(a);\n\n    return {\n        ok: ok,\n        format: color.format || format,\n        r: mathMin(255, mathMax(rgb.r, 0)),\n        g: mathMin(255, mathMax(rgb.g, 0)),\n        b: mathMin(255, mathMax(rgb.b, 0)),\n        a: a\n    };\n}\n\n\n// Conversion Functions\n// --------------------\n\n// `rgbToHsl`, `rgbToHsv`, `hslToRgb`, `hsvToRgb` modified from:\n// <http://mjijackson.com/2008/02/rgb-to-hsl-and-rgb-to-hsv-color-model-conversion-algorithms-in-javascript>\n\n// `rgbToRgb`\n// Handle bounds / percentage checking to conform to CSS color spec\n// <http://www.w3.org/TR/css3-color/>\n// *Assumes:* r, g, b in [0, 255] or [0, 1]\n// *Returns:* { r, g, b } in [0, 255]\nfunction rgbToRgb(r, g, b){\n    return {\n        r: bound01(r, 255) * 255,\n        g: bound01(g, 255) * 255,\n        b: bound01(b, 255) * 255\n    };\n}\n\n// `rgbToHsl`\n// Converts an RGB color value to HSL.\n// *Assumes:* r, g, and b are contained in [0, 255] or [0, 1]\n// *Returns:* { h, s, l } in [0,1]\nfunction rgbToHsl(r, g, b) {\n\n    r = bound01(r, 255);\n    g = bound01(g, 255);\n    b = bound01(b, 255);\n\n    var max = mathMax(r, g, b), min = mathMin(r, g, b);\n    var h, s, l = (max + min) / 2;\n\n    if(max == min) {\n        h = s = 0; // achromatic\n    }\n    else {\n        var d = max - min;\n        s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n        switch(max) {\n            case r: h = (g - b) / d + (g < b ? 6 : 0); break;\n            case g: h = (b - r) / d + 2; break;\n            case b: h = (r - g) / d + 4; break;\n        }\n\n        h /= 6;\n    }\n\n    return { h: h, s: s, l: l };\n}\n\n// `hslToRgb`\n// Converts an HSL color value to RGB.\n// *Assumes:* h is contained in [0, 1] or [0, 360] and s and l are contained [0, 1] or [0, 100]\n// *Returns:* { r, g, b } in the set [0, 255]\nfunction hslToRgb(h, s, l) {\n    var r, g, b;\n\n    h = bound01(h, 360);\n    s = bound01(s, 100);\n    l = bound01(l, 100);\n\n    function hue2rgb(p, q, t) {\n        if(t < 0) t += 1;\n        if(t > 1) t -= 1;\n        if(t < 1/6) return p + (q - p) * 6 * t;\n        if(t < 1/2) return q;\n        if(t < 2/3) return p + (q - p) * (2/3 - t) * 6;\n        return p;\n    }\n\n    if(s === 0) {\n        r = g = b = l; // achromatic\n    }\n    else {\n        var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n        var p = 2 * l - q;\n        r = hue2rgb(p, q, h + 1/3);\n        g = hue2rgb(p, q, h);\n        b = hue2rgb(p, q, h - 1/3);\n    }\n\n    return { r: r * 255, g: g * 255, b: b * 255 };\n}\n\n// `rgbToHsv`\n// Converts an RGB color value to HSV\n// *Assumes:* r, g, and b are contained in the set [0, 255] or [0, 1]\n// *Returns:* { h, s, v } in [0,1]\nfunction rgbToHsv(r, g, b) {\n\n    r = bound01(r, 255);\n    g = bound01(g, 255);\n    b = bound01(b, 255);\n\n    var max = mathMax(r, g, b), min = mathMin(r, g, b);\n    var h, s, v = max;\n\n    var d = max - min;\n    s = max === 0 ? 0 : d / max;\n\n    if(max == min) {\n        h = 0; // achromatic\n    }\n    else {\n        switch(max) {\n            case r: h = (g - b) / d + (g < b ? 6 : 0); break;\n            case g: h = (b - r) / d + 2; break;\n            case b: h = (r - g) / d + 4; break;\n        }\n        h /= 6;\n    }\n    return { h: h, s: s, v: v };\n}\n\n// `hsvToRgb`\n// Converts an HSV color value to RGB.\n// *Assumes:* h is contained in [0, 1] or [0, 360] and s and v are contained in [0, 1] or [0, 100]\n// *Returns:* { r, g, b } in the set [0, 255]\n function hsvToRgb(h, s, v) {\n\n    h = bound01(h, 360) * 6;\n    s = bound01(s, 100);\n    v = bound01(v, 100);\n\n    var i = Math.floor(h),\n        f = h - i,\n        p = v * (1 - s),\n        q = v * (1 - f * s),\n        t = v * (1 - (1 - f) * s),\n        mod = i % 6,\n        r = [v, q, p, p, t, v][mod],\n        g = [t, v, v, q, p, p][mod],\n        b = [p, p, t, v, v, q][mod];\n\n    return { r: r * 255, g: g * 255, b: b * 255 };\n}\n\n// `rgbToHex`\n// Converts an RGB color to hex\n// Assumes r, g, and b are contained in the set [0, 255]\n// Returns a 3 or 6 character hex\nfunction rgbToHex(r, g, b, allow3Char) {\n\n    var hex = [\n        pad2(mathRound(r).toString(16)),\n        pad2(mathRound(g).toString(16)),\n        pad2(mathRound(b).toString(16))\n    ];\n\n    // Return a 3 character hex if possible\n    if (allow3Char && hex[0].charAt(0) == hex[0].charAt(1) && hex[1].charAt(0) == hex[1].charAt(1) && hex[2].charAt(0) == hex[2].charAt(1)) {\n        return hex[0].charAt(0) + hex[1].charAt(0) + hex[2].charAt(0);\n    }\n\n    return hex.join(\"\");\n}\n\n// `rgbaToHex`\n// Converts an RGBA color plus alpha transparency to hex\n// Assumes r, g, b are contained in the set [0, 255] and\n// a in [0, 1]. Returns a 4 or 8 character rgba hex\nfunction rgbaToHex(r, g, b, a, allow4Char) {\n\n    var hex = [\n        pad2(mathRound(r).toString(16)),\n        pad2(mathRound(g).toString(16)),\n        pad2(mathRound(b).toString(16)),\n        pad2(convertDecimalToHex(a))\n    ];\n\n    // Return a 4 character hex if possible\n    if (allow4Char && hex[0].charAt(0) == hex[0].charAt(1) && hex[1].charAt(0) == hex[1].charAt(1) && hex[2].charAt(0) == hex[2].charAt(1) && hex[3].charAt(0) == hex[3].charAt(1)) {\n        return hex[0].charAt(0) + hex[1].charAt(0) + hex[2].charAt(0) + hex[3].charAt(0);\n    }\n\n    return hex.join(\"\");\n}\n\n// `rgbaToArgbHex`\n// Converts an RGBA color to an ARGB Hex8 string\n// Rarely used, but required for \"toFilter()\"\nfunction rgbaToArgbHex(r, g, b, a) {\n\n    var hex = [\n        pad2(convertDecimalToHex(a)),\n        pad2(mathRound(r).toString(16)),\n        pad2(mathRound(g).toString(16)),\n        pad2(mathRound(b).toString(16))\n    ];\n\n    return hex.join(\"\");\n}\n\n// `equals`\n// Can be called with any tinycolor input\ntinycolor.equals = function (color1, color2) {\n    if (!color1 || !color2) { return false; }\n    return tinycolor(color1).toRgbString() == tinycolor(color2).toRgbString();\n};\n\ntinycolor.random = function() {\n    return tinycolor.fromRatio({\n        r: mathRandom(),\n        g: mathRandom(),\n        b: mathRandom()\n    });\n};\n\n\n// Modification Functions\n// ----------------------\n// Thanks to less.js for some of the basics here\n// <https://github.com/cloudhead/less.js/blob/master/lib/less/functions.js>\n\nfunction desaturate(color, amount) {\n    amount = (amount === 0) ? 0 : (amount || 10);\n    var hsl = tinycolor(color).toHsl();\n    hsl.s -= amount / 100;\n    hsl.s = clamp01(hsl.s);\n    return tinycolor(hsl);\n}\n\nfunction saturate(color, amount) {\n    amount = (amount === 0) ? 0 : (amount || 10);\n    var hsl = tinycolor(color).toHsl();\n    hsl.s += amount / 100;\n    hsl.s = clamp01(hsl.s);\n    return tinycolor(hsl);\n}\n\nfunction greyscale(color) {\n    return tinycolor(color).desaturate(100);\n}\n\nfunction lighten (color, amount) {\n    amount = (amount === 0) ? 0 : (amount || 10);\n    var hsl = tinycolor(color).toHsl();\n    hsl.l += amount / 100;\n    hsl.l = clamp01(hsl.l);\n    return tinycolor(hsl);\n}\n\nfunction brighten(color, amount) {\n    amount = (amount === 0) ? 0 : (amount || 10);\n    var rgb = tinycolor(color).toRgb();\n    rgb.r = mathMax(0, mathMin(255, rgb.r - mathRound(255 * - (amount / 100))));\n    rgb.g = mathMax(0, mathMin(255, rgb.g - mathRound(255 * - (amount / 100))));\n    rgb.b = mathMax(0, mathMin(255, rgb.b - mathRound(255 * - (amount / 100))));\n    return tinycolor(rgb);\n}\n\nfunction darken (color, amount) {\n    amount = (amount === 0) ? 0 : (amount || 10);\n    var hsl = tinycolor(color).toHsl();\n    hsl.l -= amount / 100;\n    hsl.l = clamp01(hsl.l);\n    return tinycolor(hsl);\n}\n\n// Spin takes a positive or negative amount within [-360, 360] indicating the change of hue.\n// Values outside of this range will be wrapped into this range.\nfunction spin(color, amount) {\n    var hsl = tinycolor(color).toHsl();\n    var hue = (hsl.h + amount) % 360;\n    hsl.h = hue < 0 ? 360 + hue : hue;\n    return tinycolor(hsl);\n}\n\n// Combination Functions\n// ---------------------\n// Thanks to jQuery xColor for some of the ideas behind these\n// <https://github.com/infusion/jQuery-xcolor/blob/master/jquery.xcolor.js>\n\nfunction complement(color) {\n    var hsl = tinycolor(color).toHsl();\n    hsl.h = (hsl.h + 180) % 360;\n    return tinycolor(hsl);\n}\n\nfunction triad(color) {\n    var hsl = tinycolor(color).toHsl();\n    var h = hsl.h;\n    return [\n        tinycolor(color),\n        tinycolor({ h: (h + 120) % 360, s: hsl.s, l: hsl.l }),\n        tinycolor({ h: (h + 240) % 360, s: hsl.s, l: hsl.l })\n    ];\n}\n\nfunction tetrad(color) {\n    var hsl = tinycolor(color).toHsl();\n    var h = hsl.h;\n    return [\n        tinycolor(color),\n        tinycolor({ h: (h + 90) % 360, s: hsl.s, l: hsl.l }),\n        tinycolor({ h: (h + 180) % 360, s: hsl.s, l: hsl.l }),\n        tinycolor({ h: (h + 270) % 360, s: hsl.s, l: hsl.l })\n    ];\n}\n\nfunction splitcomplement(color) {\n    var hsl = tinycolor(color).toHsl();\n    var h = hsl.h;\n    return [\n        tinycolor(color),\n        tinycolor({ h: (h + 72) % 360, s: hsl.s, l: hsl.l}),\n        tinycolor({ h: (h + 216) % 360, s: hsl.s, l: hsl.l})\n    ];\n}\n\nfunction analogous(color, results, slices) {\n    results = results || 6;\n    slices = slices || 30;\n\n    var hsl = tinycolor(color).toHsl();\n    var part = 360 / slices;\n    var ret = [tinycolor(color)];\n\n    for (hsl.h = ((hsl.h - (part * results >> 1)) + 720) % 360; --results; ) {\n        hsl.h = (hsl.h + part) % 360;\n        ret.push(tinycolor(hsl));\n    }\n    return ret;\n}\n\nfunction monochromatic(color, results) {\n    results = results || 6;\n    var hsv = tinycolor(color).toHsv();\n    var h = hsv.h, s = hsv.s, v = hsv.v;\n    var ret = [];\n    var modification = 1 / results;\n\n    while (results--) {\n        ret.push(tinycolor({ h: h, s: s, v: v}));\n        v = (v + modification) % 1;\n    }\n\n    return ret;\n}\n\n// Utility Functions\n// ---------------------\n\ntinycolor.mix = function(color1, color2, amount) {\n    amount = (amount === 0) ? 0 : (amount || 50);\n\n    var rgb1 = tinycolor(color1).toRgb();\n    var rgb2 = tinycolor(color2).toRgb();\n\n    var p = amount / 100;\n\n    var rgba = {\n        r: ((rgb2.r - rgb1.r) * p) + rgb1.r,\n        g: ((rgb2.g - rgb1.g) * p) + rgb1.g,\n        b: ((rgb2.b - rgb1.b) * p) + rgb1.b,\n        a: ((rgb2.a - rgb1.a) * p) + rgb1.a\n    };\n\n    return tinycolor(rgba);\n};\n\n\n// Readability Functions\n// ---------------------\n// <http://www.w3.org/TR/2008/REC-WCAG20-20081211/#contrast-ratiodef (WCAG Version 2)\n\n// `contrast`\n// Analyze the 2 colors and returns the color contrast defined by (WCAG Version 2)\ntinycolor.readability = function(color1, color2) {\n    var c1 = tinycolor(color1);\n    var c2 = tinycolor(color2);\n    return (Math.max(c1.getLuminance(),c2.getLuminance())+0.05) / (Math.min(c1.getLuminance(),c2.getLuminance())+0.05);\n};\n\n// `isReadable`\n// Ensure that foreground and background color combinations meet WCAG2 guidelines.\n// The third argument is an optional Object.\n//      the 'level' property states 'AA' or 'AAA' - if missing or invalid, it defaults to 'AA';\n//      the 'size' property states 'large' or 'small' - if missing or invalid, it defaults to 'small'.\n// If the entire object is absent, isReadable defaults to {level:\"AA\",size:\"small\"}.\n\n// *Example*\n//    tinycolor.isReadable(\"#000\", \"#111\") => false\n//    tinycolor.isReadable(\"#000\", \"#111\",{level:\"AA\",size:\"large\"}) => false\ntinycolor.isReadable = function(color1, color2, wcag2) {\n    var readability = tinycolor.readability(color1, color2);\n    var wcag2Parms, out;\n\n    out = false;\n\n    wcag2Parms = validateWCAG2Parms(wcag2);\n    switch (wcag2Parms.level + wcag2Parms.size) {\n        case \"AAsmall\":\n        case \"AAAlarge\":\n            out = readability >= 4.5;\n            break;\n        case \"AAlarge\":\n            out = readability >= 3;\n            break;\n        case \"AAAsmall\":\n            out = readability >= 7;\n            break;\n    }\n    return out;\n\n};\n\n// `mostReadable`\n// Given a base color and a list of possible foreground or background\n// colors for that base, returns the most readable color.\n// Optionally returns Black or White if the most readable color is unreadable.\n// *Example*\n//    tinycolor.mostReadable(tinycolor.mostReadable(\"#123\", [\"#124\", \"#125\"],{includeFallbackColors:false}).toHexString(); // \"#112255\"\n//    tinycolor.mostReadable(tinycolor.mostReadable(\"#123\", [\"#124\", \"#125\"],{includeFallbackColors:true}).toHexString();  // \"#ffffff\"\n//    tinycolor.mostReadable(\"#a8015a\", [\"#faf3f3\"],{includeFallbackColors:true,level:\"AAA\",size:\"large\"}).toHexString(); // \"#faf3f3\"\n//    tinycolor.mostReadable(\"#a8015a\", [\"#faf3f3\"],{includeFallbackColors:true,level:\"AAA\",size:\"small\"}).toHexString(); // \"#ffffff\"\ntinycolor.mostReadable = function(baseColor, colorList, args) {\n    var bestColor = null;\n    var bestScore = 0;\n    var readability;\n    var includeFallbackColors, level, size ;\n    args = args || {};\n    includeFallbackColors = args.includeFallbackColors ;\n    level = args.level;\n    size = args.size;\n\n    for (var i= 0; i < colorList.length ; i++) {\n        readability = tinycolor.readability(baseColor, colorList[i]);\n        if (readability > bestScore) {\n            bestScore = readability;\n            bestColor = tinycolor(colorList[i]);\n        }\n    }\n\n    if (tinycolor.isReadable(baseColor, bestColor, {\"level\":level,\"size\":size}) || !includeFallbackColors) {\n        return bestColor;\n    }\n    else {\n        args.includeFallbackColors=false;\n        return tinycolor.mostReadable(baseColor,[\"#fff\", \"#000\"],args);\n    }\n};\n\n\n// Big List of Colors\n// ------------------\n// <http://www.w3.org/TR/css3-color/#svg-color>\nvar names = tinycolor.names = {\n    aliceblue: \"f0f8ff\",\n    antiquewhite: \"faebd7\",\n    aqua: \"0ff\",\n    aquamarine: \"7fffd4\",\n    azure: \"f0ffff\",\n    beige: \"f5f5dc\",\n    bisque: \"ffe4c4\",\n    black: \"000\",\n    blanchedalmond: \"ffebcd\",\n    blue: \"00f\",\n    blueviolet: \"8a2be2\",\n    brown: \"a52a2a\",\n    burlywood: \"deb887\",\n    burntsienna: \"ea7e5d\",\n    cadetblue: \"5f9ea0\",\n    chartreuse: \"7fff00\",\n    chocolate: \"d2691e\",\n    coral: \"ff7f50\",\n    cornflowerblue: \"6495ed\",\n    cornsilk: \"fff8dc\",\n    crimson: \"dc143c\",\n    cyan: \"0ff\",\n    darkblue: \"00008b\",\n    darkcyan: \"008b8b\",\n    darkgoldenrod: \"b8860b\",\n    darkgray: \"a9a9a9\",\n    darkgreen: \"006400\",\n    darkgrey: \"a9a9a9\",\n    darkkhaki: \"bdb76b\",\n    darkmagenta: \"8b008b\",\n    darkolivegreen: \"556b2f\",\n    darkorange: \"ff8c00\",\n    darkorchid: \"9932cc\",\n    darkred: \"8b0000\",\n    darksalmon: \"e9967a\",\n    darkseagreen: \"8fbc8f\",\n    darkslateblue: \"483d8b\",\n    darkslategray: \"2f4f4f\",\n    darkslategrey: \"2f4f4f\",\n    darkturquoise: \"00ced1\",\n    darkviolet: \"9400d3\",\n    deeppink: \"ff1493\",\n    deepskyblue: \"00bfff\",\n    dimgray: \"696969\",\n    dimgrey: \"696969\",\n    dodgerblue: \"1e90ff\",\n    firebrick: \"b22222\",\n    floralwhite: \"fffaf0\",\n    forestgreen: \"228b22\",\n    fuchsia: \"f0f\",\n    gainsboro: \"dcdcdc\",\n    ghostwhite: \"f8f8ff\",\n    gold: \"ffd700\",\n    goldenrod: \"daa520\",\n    gray: \"808080\",\n    green: \"008000\",\n    greenyellow: \"adff2f\",\n    grey: \"808080\",\n    honeydew: \"f0fff0\",\n    hotpink: \"ff69b4\",\n    indianred: \"cd5c5c\",\n    indigo: \"4b0082\",\n    ivory: \"fffff0\",\n    khaki: \"f0e68c\",\n    lavender: \"e6e6fa\",\n    lavenderblush: \"fff0f5\",\n    lawngreen: \"7cfc00\",\n    lemonchiffon: \"fffacd\",\n    lightblue: \"add8e6\",\n    lightcoral: \"f08080\",\n    lightcyan: \"e0ffff\",\n    lightgoldenrodyellow: \"fafad2\",\n    lightgray: \"d3d3d3\",\n    lightgreen: \"90ee90\",\n    lightgrey: \"d3d3d3\",\n    lightpink: \"ffb6c1\",\n    lightsalmon: \"ffa07a\",\n    lightseagreen: \"20b2aa\",\n    lightskyblue: \"87cefa\",\n    lightslategray: \"789\",\n    lightslategrey: \"789\",\n    lightsteelblue: \"b0c4de\",\n    lightyellow: \"ffffe0\",\n    lime: \"0f0\",\n    limegreen: \"32cd32\",\n    linen: \"faf0e6\",\n    magenta: \"f0f\",\n    maroon: \"800000\",\n    mediumaquamarine: \"66cdaa\",\n    mediumblue: \"0000cd\",\n    mediumorchid: \"ba55d3\",\n    mediumpurple: \"9370db\",\n    mediumseagreen: \"3cb371\",\n    mediumslateblue: \"7b68ee\",\n    mediumspringgreen: \"00fa9a\",\n    mediumturquoise: \"48d1cc\",\n    mediumvioletred: \"c71585\",\n    midnightblue: \"191970\",\n    mintcream: \"f5fffa\",\n    mistyrose: \"ffe4e1\",\n    moccasin: \"ffe4b5\",\n    navajowhite: \"ffdead\",\n    navy: \"000080\",\n    oldlace: \"fdf5e6\",\n    olive: \"808000\",\n    olivedrab: \"6b8e23\",\n    orange: \"ffa500\",\n    orangered: \"ff4500\",\n    orchid: \"da70d6\",\n    palegoldenrod: \"eee8aa\",\n    palegreen: \"98fb98\",\n    paleturquoise: \"afeeee\",\n    palevioletred: \"db7093\",\n    papayawhip: \"ffefd5\",\n    peachpuff: \"ffdab9\",\n    peru: \"cd853f\",\n    pink: \"ffc0cb\",\n    plum: \"dda0dd\",\n    powderblue: \"b0e0e6\",\n    purple: \"800080\",\n    rebeccapurple: \"663399\",\n    red: \"f00\",\n    rosybrown: \"bc8f8f\",\n    royalblue: \"4169e1\",\n    saddlebrown: \"8b4513\",\n    salmon: \"fa8072\",\n    sandybrown: \"f4a460\",\n    seagreen: \"2e8b57\",\n    seashell: \"fff5ee\",\n    sienna: \"a0522d\",\n    silver: \"c0c0c0\",\n    skyblue: \"87ceeb\",\n    slateblue: \"6a5acd\",\n    slategray: \"708090\",\n    slategrey: \"708090\",\n    snow: \"fffafa\",\n    springgreen: \"00ff7f\",\n    steelblue: \"4682b4\",\n    tan: \"d2b48c\",\n    teal: \"008080\",\n    thistle: \"d8bfd8\",\n    tomato: \"ff6347\",\n    turquoise: \"40e0d0\",\n    violet: \"ee82ee\",\n    wheat: \"f5deb3\",\n    white: \"fff\",\n    whitesmoke: \"f5f5f5\",\n    yellow: \"ff0\",\n    yellowgreen: \"9acd32\"\n};\n\n// Make it easy to access colors via `hexNames[hex]`\nvar hexNames = tinycolor.hexNames = flip(names);\n\n\n// Utilities\n// ---------\n\n// `{ 'name1': 'val1' }` becomes `{ 'val1': 'name1' }`\nfunction flip(o) {\n    var flipped = { };\n    for (var i in o) {\n        if (o.hasOwnProperty(i)) {\n            flipped[o[i]] = i;\n        }\n    }\n    return flipped;\n}\n\n// Return a valid alpha value [0,1] with all invalid values being set to 1\nfunction boundAlpha(a) {\n    a = parseFloat(a);\n\n    if (isNaN(a) || a < 0 || a > 1) {\n        a = 1;\n    }\n\n    return a;\n}\n\n// Take input from [0, n] and return it as [0, 1]\nfunction bound01(n, max) {\n    if (isOnePointZero(n)) { n = \"100%\"; }\n\n    var processPercent = isPercentage(n);\n    n = mathMin(max, mathMax(0, parseFloat(n)));\n\n    // Automatically convert percentage into number\n    if (processPercent) {\n        n = parseInt(n * max, 10) / 100;\n    }\n\n    // Handle floating point rounding errors\n    if ((Math.abs(n - max) < 0.000001)) {\n        return 1;\n    }\n\n    // Convert into [0, 1] range if it isn't already\n    return (n % max) / parseFloat(max);\n}\n\n// Force a number between 0 and 1\nfunction clamp01(val) {\n    return mathMin(1, mathMax(0, val));\n}\n\n// Parse a base-16 hex value into a base-10 integer\nfunction parseIntFromHex(val) {\n    return parseInt(val, 16);\n}\n\n// Need to handle 1.0 as 100%, since once it is a number, there is no difference between it and 1\n// <http://stackoverflow.com/questions/7422072/javascript-how-to-detect-number-as-a-decimal-including-1-0>\nfunction isOnePointZero(n) {\n    return typeof n == \"string\" && n.indexOf('.') != -1 && parseFloat(n) === 1;\n}\n\n// Check to see if string passed in is a percentage\nfunction isPercentage(n) {\n    return typeof n === \"string\" && n.indexOf('%') != -1;\n}\n\n// Force a hex value to have 2 characters\nfunction pad2(c) {\n    return c.length == 1 ? '0' + c : '' + c;\n}\n\n// Replace a decimal with it's percentage value\nfunction convertToPercentage(n) {\n    if (n <= 1) {\n        n = (n * 100) + \"%\";\n    }\n\n    return n;\n}\n\n// Converts a decimal to a hex value\nfunction convertDecimalToHex(d) {\n    return Math.round(parseFloat(d) * 255).toString(16);\n}\n// Converts a hex value to a decimal\nfunction convertHexToDecimal(h) {\n    return (parseIntFromHex(h) / 255);\n}\n\nvar matchers = (function() {\n\n    // <http://www.w3.org/TR/css3-values/#integers>\n    var CSS_INTEGER = \"[-\\\\+]?\\\\d+%?\";\n\n    // <http://www.w3.org/TR/css3-values/#number-value>\n    var CSS_NUMBER = \"[-\\\\+]?\\\\d*\\\\.\\\\d+%?\";\n\n    // Allow positive/negative integer/number.  Don't capture the either/or, just the entire outcome.\n    var CSS_UNIT = \"(?:\" + CSS_NUMBER + \")|(?:\" + CSS_INTEGER + \")\";\n\n    // Actual matching.\n    // Parentheses and commas are optional, but not required.\n    // Whitespace can take the place of commas or opening paren\n    var PERMISSIVE_MATCH3 = \"[\\\\s|\\\\(]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")\\\\s*\\\\)?\";\n    var PERMISSIVE_MATCH4 = \"[\\\\s|\\\\(]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")\\\\s*\\\\)?\";\n\n    return {\n        CSS_UNIT: new RegExp(CSS_UNIT),\n        rgb: new RegExp(\"rgb\" + PERMISSIVE_MATCH3),\n        rgba: new RegExp(\"rgba\" + PERMISSIVE_MATCH4),\n        hsl: new RegExp(\"hsl\" + PERMISSIVE_MATCH3),\n        hsla: new RegExp(\"hsla\" + PERMISSIVE_MATCH4),\n        hsv: new RegExp(\"hsv\" + PERMISSIVE_MATCH3),\n        hsva: new RegExp(\"hsva\" + PERMISSIVE_MATCH4),\n        hex3: /^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,\n        hex6: /^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,\n        hex4: /^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,\n        hex8: /^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/\n    };\n})();\n\n// `isValidCSSUnit`\n// Take in a single string / number and check to see if it looks like a CSS unit\n// (see `matchers` above for definition).\nfunction isValidCSSUnit(color) {\n    return !!matchers.CSS_UNIT.exec(color);\n}\n\n// `stringInputToObject`\n// Permissive string parsing.  Take in a number of formats, and output an object\n// based on detected format.  Returns `{ r, g, b }` or `{ h, s, l }` or `{ h, s, v}`\nfunction stringInputToObject(color) {\n\n    color = color.replace(trimLeft,'').replace(trimRight, '').toLowerCase();\n    var named = false;\n    if (names[color]) {\n        color = names[color];\n        named = true;\n    }\n    else if (color == 'transparent') {\n        return { r: 0, g: 0, b: 0, a: 0, format: \"name\" };\n    }\n\n    // Try to match string input using regular expressions.\n    // Keep most of the number bounding out of this function - don't worry about [0,1] or [0,100] or [0,360]\n    // Just return an object and let the conversion functions handle that.\n    // This way the result will be the same whether the tinycolor is initialized with string or object.\n    var match;\n    if ((match = matchers.rgb.exec(color))) {\n        return { r: match[1], g: match[2], b: match[3] };\n    }\n    if ((match = matchers.rgba.exec(color))) {\n        return { r: match[1], g: match[2], b: match[3], a: match[4] };\n    }\n    if ((match = matchers.hsl.exec(color))) {\n        return { h: match[1], s: match[2], l: match[3] };\n    }\n    if ((match = matchers.hsla.exec(color))) {\n        return { h: match[1], s: match[2], l: match[3], a: match[4] };\n    }\n    if ((match = matchers.hsv.exec(color))) {\n        return { h: match[1], s: match[2], v: match[3] };\n    }\n    if ((match = matchers.hsva.exec(color))) {\n        return { h: match[1], s: match[2], v: match[3], a: match[4] };\n    }\n    if ((match = matchers.hex8.exec(color))) {\n        return {\n            r: parseIntFromHex(match[1]),\n            g: parseIntFromHex(match[2]),\n            b: parseIntFromHex(match[3]),\n            a: convertHexToDecimal(match[4]),\n            format: named ? \"name\" : \"hex8\"\n        };\n    }\n    if ((match = matchers.hex6.exec(color))) {\n        return {\n            r: parseIntFromHex(match[1]),\n            g: parseIntFromHex(match[2]),\n            b: parseIntFromHex(match[3]),\n            format: named ? \"name\" : \"hex\"\n        };\n    }\n    if ((match = matchers.hex4.exec(color))) {\n        return {\n            r: parseIntFromHex(match[1] + '' + match[1]),\n            g: parseIntFromHex(match[2] + '' + match[2]),\n            b: parseIntFromHex(match[3] + '' + match[3]),\n            a: convertHexToDecimal(match[4] + '' + match[4]),\n            format: named ? \"name\" : \"hex8\"\n        };\n    }\n    if ((match = matchers.hex3.exec(color))) {\n        return {\n            r: parseIntFromHex(match[1] + '' + match[1]),\n            g: parseIntFromHex(match[2] + '' + match[2]),\n            b: parseIntFromHex(match[3] + '' + match[3]),\n            format: named ? \"name\" : \"hex\"\n        };\n    }\n\n    return false;\n}\n\nfunction validateWCAG2Parms(parms) {\n    // return valid WCAG2 parms for isReadable.\n    // If input parms are invalid, return {\"level\":\"AA\", \"size\":\"small\"}\n    var level, size;\n    parms = parms || {\"level\":\"AA\", \"size\":\"small\"};\n    level = (parms.level || \"AA\").toUpperCase();\n    size = (parms.size || \"small\").toLowerCase();\n    if (level !== \"AA\" && level !== \"AAA\") {\n        level = \"AA\";\n    }\n    if (size !== \"small\" && size !== \"large\") {\n        size = \"small\";\n    }\n    return {\"level\":level, \"size\":size};\n}\n\n// Node: Export function\nif (typeof module !== \"undefined\" && module.exports) {\n    module.exports = tinycolor;\n}\n// AMD/requirejs: Define the module\nelse if (typeof define === 'function' && define.amd) {\n    define(function () {return tinycolor;});\n}\n// Browser: Expose to window\nelse {\n    window.tinycolor = tinycolor;\n}\n\n})(Math);\n","'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Color = require('tinycolor2');\nvar Counter = require('yy-counter');\n\nvar STYLES = {\n    'background': 'rgba(0, 0, 0, 0.5)',\n    'color': 'white'\n};\n\nvar STYLES_FPS = {\n    'padding': '0.1em 0.5em'\n};\n\nvar STYLES_METER = {};\n\nmodule.exports = function () {\n    /**\r\n     * @param {object} [options]\r\n     * @param {boolean} [options.meter=true] include a meter with the FPS\r\n     * @param {string} [options.side=bottom-right] include any combination of left/right and top/bottom\r\n     * @param {number} [options.FPS=60] desired FPS\r\n     * @param {number} [options.tolerance=1] minimum tolerance for fluctuations in FPS number\r\n     * @param {number} [options.meterWidth=100] width of meter div\r\n     * @param {number} [options.meterHeight=25] height of meter div\r\n     * @param {number} [options.meterLineHeight=4] height of meter line\r\n     * @param {styles[]} [options.styles] CSS styles to apply to the div (in javascript format)\r\n     * @param {styles[]} [options.stylesFPS] CSS styles to apply to the FPS text (in javascript format)\r\n     * @param {styles[]} [options.stylesMeter] CSS styles to apply to the FPS meter (in javascript format)\r\n     * @param {string} [options.text=\" FPS\"] change the text to the right of the FPS\r\n     */\n    function FPS(options) {\n        _classCallCheck(this, FPS);\n\n        this.options = options || {};\n        this.tolerance = this.options.tolerance || 1;\n        this.FPS = this.options.FPS || 60;\n        this.meterWidth = this.options.meterWidth || 100;\n        this.meterHeight = this.options.meterHeight || 25;\n        this.meterLineHeight = this.options.meterLineHeight || 4;\n        this.div = document.createElement('div');\n        Counter.findParent(this.options.side || 'bottom-right').appendChild(this.div);\n        this.style(this.div, STYLES, this.options.styles);\n        this.divFPS();\n        this.meter = typeof this.options.meter === 'undefined' || this.options.meter;\n        this.lastTime = 0;\n        this.frameNumber = 0;\n        this.lastUpdate = 0;\n        this.lastFPS = '--';\n    }\n\n    /**\r\n     * change desired FPS\r\n     * @type {number}\r\n     */\n\n\n    _createClass(FPS, [{\n        key: 'remove',\n\n\n        /**\r\n         * remove meter from DOM\r\n         */\n        value: function remove() {\n            this.div.remove();\n        }\n\n        /**\r\n         * @type {boolean} meter (the FPS graph) is on or off\r\n         */\n\n    }, {\n        key: 'style',\n        value: function style(div, style1, style2) {\n            for (var style in style1) {\n                div.style[style] = style1[style];\n            }\n            if (style2) {\n                for (var _style in style2) {\n                    div.style[_style] = style2[_style];\n                }\n            }\n        }\n\n        /**\r\n         * create div for text FPS\r\n         * @private\r\n         * @param {HTMLElement} div\r\n         * @param {object} options (see contructor)\r\n         */\n\n    }, {\n        key: 'divFPS',\n        value: function divFPS() {\n            var div = this.div;\n            var options = this.options;\n            var divFPS = document.createElement('div');\n            div.appendChild(divFPS);\n            this.fpsSpan = document.createElement('span');\n            divFPS.appendChild(this.fpsSpan);\n            var span = document.createElement('span');\n            divFPS.appendChild(span);\n            span.innerText = typeof options.text !== 'undefined' ? options.text : ' FPS';\n            this.style(div, STYLES_FPS, options.stylesFPS);\n        }\n\n        /**\r\n         * create div for FPS meter\r\n         * @private\r\n         * @param {HTMLElement} div\r\n         * @param {object} options (see contructor)\r\n         */\n\n    }, {\n        key: 'divMeter',\n        value: function divMeter() {\n            var div = this.div;\n            var options = this.options;\n            if (!this.meterCanvas) {\n                this.meterCanvas = document.createElement('canvas');\n                div.appendChild(this.meterCanvas);\n                this.meterCanvas.width = this.meterWidth;\n                this.meterCanvas.height = this.meterHeight;\n                this.meterCanvas.style.width = div.width + 'px';\n                this.meterCanvas.style.height = div.height + 'px';\n                this.style(this.meterCanvas, STYLES_METER, options.stylesMeter);\n            } else {\n                this.meterCanvas.style.display = 'block';\n            }\n        }\n\n        /**\r\n         * call this at the start of the frame to calculate FPS\r\n         */\n\n    }, {\n        key: 'frame',\n        value: function frame() {\n            this.frameNumber++;\n            var currentTime = performance.now() - this.lastTime;\n\n            // skip large differences to remove garbage\n            if (currentTime > 500) {\n                if (this.lastTime !== 0) {\n                    this.lastFPS = Math.floor(this.frameNumber / (currentTime / 1000));\n                    if (this.lastFPS >= this.FPS - this.tolerance && this.lastFPS <= this.FPS + this.tolerance) {\n                        this.lastFPS = this.FPS;\n                    }\n                }\n                this.lastTime = performance.now();\n                this.frameNumber = 0;\n            }\n            this.fpsSpan.innerText = this.lastFPS;\n            if (this.meterCanvas && this.lastFPS !== '--') {\n                this.meterUpdate(this.lastFPS / this.FPS);\n            }\n        }\n    }, {\n        key: 'meterUpdate',\n        value: function meterUpdate(percent) {\n            var c = this.meterCanvas.getContext('2d');\n            var data = c.getImageData(0, 0, this.meterCanvas.width, this.meterCanvas.height);\n            c.putImageData(data, -1, 0);\n            c.clearRect(this.meterCanvas.width - 1, 0, 1, this.meterCanvas.height);\n            if (percent < 0.5) {\n                c.fillStyle = Color.mix('#ff0000', '0xffa500', percent * 200).toHexString();\n            } else {\n                c.fillStyle = Color.mix('#ffa500', '#00ff00', (percent - 0.5) * 200).toHexString();\n            }\n            var height = (this.meterCanvas.height - this.meterLineHeight) * (1 - percent);\n            c.fillRect(this.meterCanvas.width - 1, height, 1, this.meterLineHeight);\n        }\n    }, {\n        key: 'side',\n        value: function side(options) {\n            if (options.side) {\n                options.side = options.side.toLowerCase();\n                if (options.side.indexOf('left') !== -1) {\n                    STYLES['left'] = 0;\n                    delete STYLES['right'];\n                } else {\n                    STYLES['right'] = 0;\n                    delete STYLES['left'];\n                }\n                if (options.side.indexOf('top') !== -1) {\n                    STYLES['top'] = 0;\n                    delete STYLES['bottom'];\n                } else {\n                    STYLES['bottom'] = 0;\n                    delete STYLES['top'];\n                }\n            } else {\n                STYLES['right'] = 0;\n                STYLES['bottom'] = 0;\n            }\n        }\n    }, {\n        key: 'fps',\n        get: function get() {\n            return this.FPS;\n        },\n        set: function set(value) {\n            this.FPS = value;\n        }\n    }, {\n        key: 'meter',\n        get: function get() {\n            return this._meter;\n        },\n        set: function set(value) {\n            if (value) {\n                this.divMeter();\n            } else if (this.meterCanvas) {\n                this.meterCanvas.style.display = 'none';\n            }\n        }\n    }]);\n\n    return FPS;\n}();\n\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SCxTQTlETDtBQUFBLDBCQStEYyxLQS9EZCxFQWdFSTtBQUNJLGdCQUFJLEtBQUosRUFDQTtBQUNJLHFCQUFLLFFBQUw7QUFDSCxhQUhELE1BSUssSUFBSSxLQUFLLFdBQVQsRUFDTDtBQUNJLHFCQUFLLFdBQUwsQ0FBaUIsS0FBakIsQ0FBdUIsT0FBdkIsR0FBaUMsTUFBakM7QUFDSDtBQUNKO0FBekVMOztBQUFBO0FBQUEiLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBDb2xvciA9IHJlcXVpcmUoJ3Rpbnljb2xvcjInKVxyXG5jb25zdCBDb3VudGVyID0gcmVxdWlyZSgneXktY291bnRlcicpXHJcblxyXG5jb25zdCBTVFlMRVMgPSB7XHJcbiAgICAnYmFja2dyb3VuZCc6ICdyZ2JhKDAsIDAsIDAsIDAuNSknLFxyXG4gICAgJ2NvbG9yJzogJ3doaXRlJyxcclxufVxyXG5cclxuY29uc3QgU1RZTEVTX0ZQUyA9IHtcclxuICAgICdwYWRkaW5nJzogJzAuMWVtIDAuNWVtJ1xyXG59XHJcblxyXG5jb25zdCBTVFlMRVNfTUVURVIgPSB7XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gY2xhc3MgRlBTXHJcbntcclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHtvYmplY3R9IFtvcHRpb25zXVxyXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5tZXRlcj10cnVlXSBpbmNsdWRlIGEgbWV0ZXIgd2l0aCB0aGUgRlBTXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMuc2lkZT1ib3R0b20tcmlnaHRdIGluY2x1ZGUgYW55IGNvbWJpbmF0aW9uIG9mIGxlZnQvcmlnaHQgYW5kIHRvcC9ib3R0b21cclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5GUFM9NjBdIGRlc2lyZWQgRlBTXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMudG9sZXJhbmNlPTFdIG1pbmltdW0gdG9sZXJhbmNlIGZvciBmbHVjdHVhdGlvbnMgaW4gRlBTIG51bWJlclxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLm1ldGVyV2lkdGg9MTAwXSB3aWR0aCBvZiBtZXRlciBkaXZcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5tZXRlckhlaWdodD0yNV0gaGVpZ2h0IG9mIG1ldGVyIGRpdlxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLm1ldGVyTGluZUhlaWdodD00XSBoZWlnaHQgb2YgbWV0ZXIgbGluZVxyXG4gICAgICogQHBhcmFtIHtzdHlsZXNbXX0gW29wdGlvbnMuc3R5bGVzXSBDU1Mgc3R5bGVzIHRvIGFwcGx5IHRvIHRoZSBkaXYgKGluIGphdmFzY3JpcHQgZm9ybWF0KVxyXG4gICAgICogQHBhcmFtIHtzdHlsZXNbXX0gW29wdGlvbnMuc3R5bGVzRlBTXSBDU1Mgc3R5bGVzIHRvIGFwcGx5IHRvIHRoZSBGUFMgdGV4dCAoaW4gamF2YXNjcmlwdCBmb3JtYXQpXHJcbiAgICAgKiBAcGFyYW0ge3N0eWxlc1tdfSBbb3B0aW9ucy5zdHlsZXNNZXRlcl0gQ1NTIHN0eWxlcyB0byBhcHBseSB0byB0aGUgRlBTIG1ldGVyIChpbiBqYXZhc2NyaXB0IGZvcm1hdClcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy50ZXh0PVwiIEZQU1wiXSBjaGFuZ2UgdGhlIHRleHQgdG8gdGhlIHJpZ2h0IG9mIHRoZSBGUFNcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3Iob3B0aW9ucylcclxuICAgIHtcclxuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zIHx8IHt9XHJcbiAgICAgICAgdGhpcy50b2xlcmFuY2UgPSB0aGlzLm9wdGlvbnMudG9sZXJhbmNlIHx8IDFcclxuICAgICAgICB0aGlzLkZQUyA9IHRoaXMub3B0aW9ucy5GUFMgfHwgNjBcclxuICAgICAgICB0aGlzLm1ldGVyV2lkdGggPSB0aGlzLm9wdGlvbnMubWV0ZXJXaWR0aCB8fCAxMDBcclxuICAgICAgICB0aGlzLm1ldGVySGVpZ2h0ID0gdGhpcy5vcHRpb25zLm1ldGVySGVpZ2h0IHx8IDI1XHJcbiAgICAgICAgdGhpcy5tZXRlckxpbmVIZWlnaHQgPSB0aGlzLm9wdGlvbnMubWV0ZXJMaW5lSGVpZ2h0IHx8IDRcclxuICAgICAgICB0aGlzLmRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXHJcbiAgICAgICAgQ291bnRlci5maW5kUGFyZW50KHRoaXMub3B0aW9ucy5zaWRlIHx8ICdib3R0b20tcmlnaHQnKS5hcHBlbmRDaGlsZCh0aGlzLmRpdilcclxuICAgICAgICB0aGlzLnN0eWxlKHRoaXMuZGl2LCBTVFlMRVMsIHRoaXMub3B0aW9ucy5zdHlsZXMpXHJcbiAgICAgICAgdGhpcy5kaXZGUFMoKVxyXG4gICAgICAgIHRoaXMubWV0ZXIgPSB0eXBlb2YgdGhpcy5vcHRpb25zLm1ldGVyID09PSAndW5kZWZpbmVkJyB8fCB0aGlzLm9wdGlvbnMubWV0ZXJcclxuICAgICAgICB0aGlzLmxhc3RUaW1lID0gMFxyXG4gICAgICAgIHRoaXMuZnJhbWVOdW1iZXIgPSAwXHJcbiAgICAgICAgdGhpcy5sYXN0VXBkYXRlID0gMFxyXG4gICAgICAgIHRoaXMubGFzdEZQUyA9ICctLSdcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIGNoYW5nZSBkZXNpcmVkIEZQU1xyXG4gICAgICogQHR5cGUge251bWJlcn1cclxuICAgICAqL1xyXG4gICAgZ2V0IGZwcygpXHJcbiAgICB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuRlBTXHJcbiAgICB9XHJcbiAgICBzZXQgZnBzKHZhbHVlKVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMuRlBTID0gdmFsdWVcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIHJlbW92ZSBtZXRlciBmcm9tIERPTVxyXG4gICAgICovXHJcbiAgICByZW1vdmUoKVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMuZGl2LnJlbW92ZSgpXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn0gbWV0ZXIgKHRoZSBGUFMgZ3JhcGgpIGlzIG9uIG9yIG9mZlxyXG4gICAgICovXHJcbiAgICBnZXQgbWV0ZXIoKVxyXG4gICAge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9tZXRlclxyXG4gICAgfVxyXG4gICAgc2V0IG1ldGVyKHZhbHVlKVxyXG4gICAge1xyXG4gICAgICAgIGlmICh2YWx1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuZGl2TWV0ZXIoKVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0aGlzLm1ldGVyQ2FudmFzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5tZXRlckNhbnZhcy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHN0eWxlKGRpdiwgc3R5bGUxLCBzdHlsZTIpXHJcbiAgICB7XHJcbiAgICAgICAgZm9yIChsZXQgc3R5bGUgaW4gc3R5bGUxKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZGl2LnN0eWxlW3N0eWxlXSA9IHN0eWxlMVtzdHlsZV1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHN0eWxlMilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IHN0eWxlIGluIHN0eWxlMilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZGl2LnN0eWxlW3N0eWxlXSA9IHN0eWxlMltzdHlsZV1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIGNyZWF0ZSBkaXYgZm9yIHRleHQgRlBTXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZGl2XHJcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gb3B0aW9ucyAoc2VlIGNvbnRydWN0b3IpXHJcbiAgICAgKi9cclxuICAgIGRpdkZQUygpXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3QgZGl2ID0gdGhpcy5kaXZcclxuICAgICAgICBjb25zdCBvcHRpb25zID0gdGhpcy5vcHRpb25zXHJcbiAgICAgICAgY29uc3QgZGl2RlBTID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcclxuICAgICAgICBkaXYuYXBwZW5kQ2hpbGQoZGl2RlBTKVxyXG4gICAgICAgIHRoaXMuZnBzU3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKVxyXG4gICAgICAgIGRpdkZQUy5hcHBlbmRDaGlsZCh0aGlzLmZwc1NwYW4pXHJcbiAgICAgICAgY29uc3Qgc3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKVxyXG4gICAgICAgIGRpdkZQUy5hcHBlbmRDaGlsZChzcGFuKVxyXG4gICAgICAgIHNwYW4uaW5uZXJUZXh0ID0gdHlwZW9mIG9wdGlvbnMudGV4dCAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLnRleHQgOiAnIEZQUydcclxuICAgICAgICB0aGlzLnN0eWxlKGRpdiwgU1RZTEVTX0ZQUywgb3B0aW9ucy5zdHlsZXNGUFMpXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBjcmVhdGUgZGl2IGZvciBGUFMgbWV0ZXJcclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBkaXZcclxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zIChzZWUgY29udHJ1Y3RvcilcclxuICAgICAqL1xyXG4gICAgZGl2TWV0ZXIoKVxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IGRpdiA9IHRoaXMuZGl2XHJcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHRoaXMub3B0aW9uc1xyXG4gICAgICAgIGlmICghdGhpcy5tZXRlckNhbnZhcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMubWV0ZXJDYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKVxyXG4gICAgICAgICAgICBkaXYuYXBwZW5kQ2hpbGQodGhpcy5tZXRlckNhbnZhcylcclxuICAgICAgICAgICAgdGhpcy5tZXRlckNhbnZhcy53aWR0aCA9IHRoaXMubWV0ZXJXaWR0aFxyXG4gICAgICAgICAgICB0aGlzLm1ldGVyQ2FudmFzLmhlaWdodCA9IHRoaXMubWV0ZXJIZWlnaHRcclxuICAgICAgICAgICAgdGhpcy5tZXRlckNhbnZhcy5zdHlsZS53aWR0aCA9IGRpdi53aWR0aCArICdweCdcclxuICAgICAgICAgICAgdGhpcy5tZXRlckNhbnZhcy5zdHlsZS5oZWlnaHQgPSBkaXYuaGVpZ2h0ICsgJ3B4J1xyXG4gICAgICAgICAgICB0aGlzLnN0eWxlKHRoaXMubWV0ZXJDYW52YXMsIFNUWUxFU19NRVRFUiwgb3B0aW9ucy5zdHlsZXNNZXRlcilcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5tZXRlckNhbnZhcy5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJ1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIGNhbGwgdGhpcyBhdCB0aGUgc3RhcnQgb2YgdGhlIGZyYW1lIHRvIGNhbGN1bGF0ZSBGUFNcclxuICAgICAqL1xyXG4gICAgZnJhbWUoKVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMuZnJhbWVOdW1iZXIrK1xyXG4gICAgICAgIGNvbnN0IGN1cnJlbnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCkgLSB0aGlzLmxhc3RUaW1lXHJcblxyXG4gICAgICAgIC8vIHNraXAgbGFyZ2UgZGlmZmVyZW5jZXMgdG8gcmVtb3ZlIGdhcmJhZ2VcclxuICAgICAgICBpZiAoY3VycmVudFRpbWUgPiA1MDApXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5sYXN0VGltZSAhPT0gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5sYXN0RlBTID0gTWF0aC5mbG9vcih0aGlzLmZyYW1lTnVtYmVyIC8gKGN1cnJlbnRUaW1lIC8gMTAwMCkpXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5sYXN0RlBTID49IHRoaXMuRlBTIC0gdGhpcy50b2xlcmFuY2UgJiYgdGhpcy5sYXN0RlBTIDw9IHRoaXMuRlBTICsgdGhpcy50b2xlcmFuY2UpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sYXN0RlBTID0gdGhpcy5GUFNcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmxhc3RUaW1lID0gcGVyZm9ybWFuY2Uubm93KClcclxuICAgICAgICAgICAgdGhpcy5mcmFtZU51bWJlciA9IDBcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5mcHNTcGFuLmlubmVyVGV4dCA9IHRoaXMubGFzdEZQU1xyXG4gICAgICAgIGlmICh0aGlzLm1ldGVyQ2FudmFzICYmIHRoaXMubGFzdEZQUyAhPT0gJy0tJylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMubWV0ZXJVcGRhdGUodGhpcy5sYXN0RlBTIC8gdGhpcy5GUFMpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG1ldGVyVXBkYXRlKHBlcmNlbnQpXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3QgYyA9IHRoaXMubWV0ZXJDYW52YXMuZ2V0Q29udGV4dCgnMmQnKVxyXG4gICAgICAgIGNvbnN0IGRhdGEgPSBjLmdldEltYWdlRGF0YSgwLCAwLCB0aGlzLm1ldGVyQ2FudmFzLndpZHRoLCB0aGlzLm1ldGVyQ2FudmFzLmhlaWdodClcclxuICAgICAgICBjLnB1dEltYWdlRGF0YShkYXRhLCAtMSwgMClcclxuICAgICAgICBjLmNsZWFyUmVjdCh0aGlzLm1ldGVyQ2FudmFzLndpZHRoIC0gMSwgMCwgMSwgdGhpcy5tZXRlckNhbnZhcy5oZWlnaHQpXHJcbiAgICAgICAgaWYgKHBlcmNlbnQgPCAwLjUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjLmZpbGxTdHlsZSA9IENvbG9yLm1peCgnI2ZmMDAwMCcsICcweGZmYTUwMCcsIHBlcmNlbnQgKiAyMDApLnRvSGV4U3RyaW5nKClcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYy5maWxsU3R5bGUgPSBDb2xvci5taXgoJyNmZmE1MDAnLCAnIzAwZmYwMCcsIChwZXJjZW50IC0gMC41KSAqIDIwMCkudG9IZXhTdHJpbmcoKVxyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBoZWlnaHQgPSAodGhpcy5tZXRlckNhbnZhcy5oZWlnaHQgLSB0aGlzLm1ldGVyTGluZUhlaWdodCkgKiAoMSAtIHBlcmNlbnQpXHJcbiAgICAgICAgYy5maWxsUmVjdCh0aGlzLm1ldGVyQ2FudmFzLndpZHRoIC0gMSwgaGVpZ2h0LCAxLCB0aGlzLm1ldGVyTGluZUhlaWdodClcclxuICAgIH1cclxuXHJcbiAgICBzaWRlKG9wdGlvbnMpXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKG9wdGlvbnMuc2lkZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG9wdGlvbnMuc2lkZSA9IG9wdGlvbnMuc2lkZS50b0xvd2VyQ2FzZSgpXHJcbiAgICAgICAgICAgIGlmIChvcHRpb25zLnNpZGUuaW5kZXhPZignbGVmdCcpICE9PSAtMSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgU1RZTEVTWydsZWZ0J10gPSAwXHJcbiAgICAgICAgICAgICAgICBkZWxldGUgU1RZTEVTWydyaWdodCddXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBTVFlMRVNbJ3JpZ2h0J10gPSAwXHJcbiAgICAgICAgICAgICAgICBkZWxldGUgU1RZTEVTWydsZWZ0J11cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5zaWRlLmluZGV4T2YoJ3RvcCcpICE9PSAtMSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgU1RZTEVTWyd0b3AnXSA9IDBcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSBTVFlMRVNbJ2JvdHRvbSddXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBTVFlMRVNbJ2JvdHRvbSddID0gMFxyXG4gICAgICAgICAgICAgICAgZGVsZXRlIFNUWUxFU1sndG9wJ11cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBTVFlMRVNbJ3JpZ2h0J10gPSAwXHJcbiAgICAgICAgICAgIFNUWUxFU1snYm90dG9tJ10gPSAwXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59Il19","// yy-counter\n// In-browser counter to watch changeable values like counters or FPS\n// David Figatner\n// (c) YOPEY YOPEY LLC 2017\n// MIT License\n// https://github.com/davidfig/counter\n\nmodule.exports = class Counter\n{\n    /**\n     * @param {object} [options]\n     * @param {string} [options.side=rightbottom] side to place the panel (combination of right/left and bottom/top)\n     * @param {number} [options.padding=7px]\n     * @param {string} [options.color=white]\n     * @param {string} [options.background=rgba(0,0,0,0.5)]\n     * @param {*} {options.xxx} where xxx is a CSS style for the div\n     */\n    constructor(options)\n    {\n        options = options || {}\n        options.side = options.side || 'rightbottom'\n        options.side.toLowerCase()\n        options.padding = options.padding || '7px'\n        options.color = options.color || 'white'\n        options.background = options.background || 'rgba(0,0,0,0.5)'\n        this.div = document.createElement('div')\n        Counter.findParent(options.side).appendChild(this.div)\n        for (let style in options)\n        {\n            if (style !== 'parent' && style !== 'side')\n            {\n                this.div.style[style] = options[style]\n            }\n        }\n    }\n\n    /**\n     * find the parent div for one of the corners\n     * @param {string} [options.side] side to place the panel (combination of right/left and bottom/top)\n     * @return {HTMLElement}\n     */\n    static findParent(side)\n    {\n        const styles = []\n        let name = 'yy-counter-'\n        if (side.indexOf('left') !== -1)\n        {\n            name += 'left-'\n            styles['left'] = 0\n        }\n        else\n        {\n            name += 'right-'\n            styles['right'] = 0\n        }\n        if (side.indexOf('top') !== -1)\n        {\n            name += 'top'\n            styles['top'] = 0\n        }\n        else\n        {\n            name += 'bottom'\n            styles['bottom'] = 0\n        }\n        const test = document.getElementById(name)\n        if (test)\n        {\n            return test\n        }\n        const container = document.createElement('div')\n        container.id = name\n        container.style.overflow = 'hidden'\n        container.style.position = 'fixed'\n        container.style.zIndex = 10000\n        container.style.pointerEvents = 'none'\n        container.style.userSelect = 'none'\n        for (let style in styles)\n        {\n            container.style[style] = styles[style]\n        }\n        document.body.appendChild(container)\n        return container\n    }\n\n    /**\n     * replaces the innerHTML of the console\n     * @param {string|number} text1\n     * @param {string|number} [text2]\n     * @param {string|number} [...textn] any number of arguments\n     */\n    log()\n    {\n        let s = ''\n        for (let arg of arguments)\n        {\n            s += '<div>' + arg + '</div>'\n        }\n        this.div.innerHTML =  s\n    }\n\n    /**\n     * appends to the innerHTML of the console\n     * @param {string|number} text1\n     * @param {string|number} [text2]\n     * @param {string|number} [...textn] any number of arguments\n     */\n    append()\n    {\n        let s = this.div.innerHTML\n        for (let arg of arguments)\n        {\n            s += '<div>' + arg + '</div>'\n        }\n        this.div.innerHTML = s\n    }\n}","/**\r\n * shortcut to create an html element\r\n * @param {object} options\r\n * @param {type} [options.type=div]\r\n * @param {string} [options.className]\r\n * @param {object} [options.styles]\r\n * @param {HTMLElement} [options.parent]\r\n * @param {string} [options.html]\r\n * @returns {HTMLElement}\r\n * @ignore\r\n */\r\nexport function html(options = {})\r\n{\r\n    const element = document.createElement(options.type || 'div')\r\n    if (options.styles)\r\n    {\r\n        Object.assign(element.style, options.styles)\r\n    }\r\n    if (options.className)\r\n    {\r\n        element.className = options.className\r\n    }\r\n    if (options.html)\r\n    {\r\n        element.innerHTML = options.html\r\n    }\r\n    if (options.parent)\r\n    {\r\n        options.parent.appendChild(element)\r\n    }\r\n    return element\r\n}","'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n\n  var listener = new EE(fn, context || emitter, once)\n    , evt = prefix ? prefix + event : event;\n\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n  else emitter._events[evt] = [emitter._events[evt], listener];\n\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();\n  else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event\n    , handlers = this._events[evt];\n\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event\n    , listeners = this._events[evt];\n\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n      listeners.fn === fn &&\n      (!once || listeners.once) &&\n      (!context || listeners.context === context)\n    ) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n        listeners[i].fn !== fn ||\n        (once && !listeners[i].once) ||\n        (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else clearEvent(this, evt);\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n","/**\n * Watcher for click, double-click, or long-click event for both mouse and touch\n * @example\n * import { clicked } from 'clicked'\n *\n * function handleClick()\n * {\n *    console.log('I was clicked.')\n * }\n *\n * const div = document.getElementById('clickme')\n * const c = clicked(div, handleClick, { threshold: 15 })\n *\n * // change callback\n * c.callback = () => console.log('different clicker')\n *\n * // destroy\n * c.destroy()\n *\n * // using built-in querySelector\n * clicked('#clickme', handleClick2)\n *\n * // watching for all types of clicks\n * function handleAllClicks(e) {\n *     switch (e.type)\n *     {\n *         case 'clicked': ...\n *         case 'double-clicked': ...\n *         case 'long-clicked': ...\n *     }\n *\n *     // view UIEvent that caused callback\n *     console.log(e.event)\n * }\n * clicked('#clickme', handleAllClicks, { doubleClicked: true, longClicked: true })\n */\n\n/** @type {object} */\nconst defaultOptions = {\n    threshold: 10,\n    clicked: true,\n    doubleClicked: false,\n    doubleClickedTime: 300,\n    longClicked: false,\n    longClickedTime: 500,\n    capture: false,\n    clickDown: false\n}\n\n/**\n * @param {HTMLElement|string} element or querySelector entry (e.g., #id-name or .class-name)\n * @param {ClickedCallback} callback called after a click, double click, or long click is registered\n * @param {object} [options]\n * @param {number} [options.threshold=10] if touch moves threshhold-pixels then the touch-click is cancelled\n * @param {boolean} [options.clicked=true] disable watcher for default clicked event\n * @param {boolean} [options.doubleClicked] enable watcher for double click\n * @param {number} [options.doubleClickedTime=500] wait time in millseconds for double click\n * @param {boolean} [options.longClicked] enable watcher for long click\n * @param {number} [options.longClickedTime=500] wait time for long click\n * @param {boolean} [options.clickDown] enable watcher for click start\n * @param {boolean} [options.capture]  events will be dispatched to this registered listener before being dispatched to any EventTarget beneath it in the DOM tree\n * @returns {Clicked}\n */\nexport function clicked(element, callback, options)\n{\n    return new Clicked(element, callback, options)\n}\n\nclass Clicked\n{\n    constructor(element, callback, options)\n    {\n        if (typeof element === 'string')\n        {\n            element = document.querySelector(element)\n            if (!element)\n            {\n                console.warn(`Unknown element: document.querySelector(${element}) in clicked()`)\n                return\n            }\n        }\n        this.options = Object.assign({}, defaultOptions, options)\n        this.events = {\n            mousedown: (e) => this.mousedown(e),\n            mouseup: (e) => this.mouseup(e),\n            mousemove: (e) => this.mousemove(e),\n            touchstart: (e) => this.touchstart(e),\n            touchmove: (e) => this.touchmove(e),\n            touchcancel: (e) => this.cancel(e),\n            touchend: (e) => this.touchend(e)\n        }\n        element.addEventListener('mousedown', this.events.mousedown, { capture: this.options.capture })\n        element.addEventListener('mouseup', this.events.mouseup, { capture: this.options.capture })\n        element.addEventListener('mousemove', this.events.mousemove, { capture: this.options.capture })\n        element.addEventListener('touchstart', this.events.touchstart, { passive: true, capture: this.options.capture })\n        element.addEventListener('touchmove', this.events.touchmove, { passive: true, capture: this.options.capture })\n        element.addEventListener('touchcancel', this.events.touchcancel, { capture: this.options.capture})\n        element.addEventListener('touchend', this.events.touchend, { capture: this.options.capture })\n        this.element = element\n        this.callback = callback\n    }\n\n    /**\n     * removes event listeners added by Clicked\n     */\n    destroy()\n    {\n        this.element.removeEventListener('mousedown', this.events.mousedown)\n        this.element.removeEventListener('mouseup', this.events.mouseup)\n        this.element.removeEventListener('mousemove', this.events.mousemove)\n        this.element.removeEventListener('touchstart', this.events.touchstart, { passive: true })\n        this.element.removeEventListener('touchmove', this.events.touchmove, { passive: true })\n        this.element.removeEventListener('touchcancel', this.events.touchcancel)\n        this.element.removeEventListener('touchend', this.events.touchend)\n    }\n\n    touchstart(e)\n    {\n        if (this.down === true)\n        {\n            this.cancel()\n        }\n        else\n        {\n            if (e.touches.length === 1)\n            {\n                this.handleDown(e.changedTouches[0].screenX, e.changedTouches[0].screenY)\n            }\n        }\n    }\n\n    pastThreshold(x, y)\n    {\n        return Math.abs(this.lastX - x) > this.options.threshold || Math.abs(this.lastY - y) > this.options.threshold\n    }\n\n    touchmove(e)\n    {\n        if (this.down)\n        {\n            if (e.touches.length !== 1)\n            {\n                this.cancel()\n            }\n            else\n            {\n                const x = e.changedTouches[0].screenX\n                const y = e.changedTouches[0].screenY\n                if (this.pastThreshold(x, y))\n                {\n                    this.cancel()\n                }\n            }\n        }\n    }\n\n    /** cancel current event */\n    cancel()\n    {\n        this.down = false\n        if (this.doubleClickedTimeout)\n        {\n            clearTimeout(this.doubleClickedTimeout)\n            this.doubleClickedTimeout = null\n        }\n        if (this.longClickedTimeout)\n        {\n            clearTimeout(this.longClickedTimeout)\n            this.longClickedTimeout = null\n        }\n    }\n\n    touchend(e)\n    {\n        if (this.down)\n        {\n            e.preventDefault()\n            this.handleClicks(e, e.pointerId)\n        }\n    }\n\n    handleClicks(e)\n    {\n        if (this.options.doubleClicked)\n        {\n            this.doubleClickedTimeout = setTimeout(() => this.doubleClickedCancel(e), this.options.doubleClickedTime)\n        }\n        else if (this.options.clicked)\n        {\n            this.callback({ event: e, type: 'clicked' })\n        }\n        if (this.longClickedTimeout)\n        {\n            clearTimeout(this.longClickedTimeout)\n            this.longClickedTimeout = null\n        }\n        this.down = false\n    }\n\n    handleDown(e, x, y)\n    {\n        if (this.doubleClickedTimeout)\n        {\n            if (this.pastThreshold(x, y))\n            {\n                if (this.options.clicked)\n                {\n                    this.callback({ event: e, type: 'clicked' })\n                }\n                this.cancel()\n            }\n            else\n            {\n                this.callback({ event: e, type: 'double-clicked' })\n                this.cancel()\n            }\n        }\n        else\n        {\n            this.lastX = x\n            this.lastY = y\n            this.down = true\n            if (this.options.longClicked)\n            {\n                this.longClickedTimeout = setTimeout(() => this.longClicked(e), this.options.longClickedTime)\n            }\n            if (this.options.clickDown) {\n                this.callback({ event: e, type: 'click-down' })\n            }\n        }\n    }\n\n    longClicked(e)\n    {\n        this.longClikedTimeout = null\n        this.down = false\n        this.callback({ event: e, type: 'long-clicked' })\n    }\n\n    doubleClickedCancel(e)\n    {\n        this.doubleClickedTimeout = null\n        if (this.options.clicked)\n        {\n            this.callback({ event: e, type: 'double-clicked' })\n        }\n    }\n\n    mousedown(e)\n    {\n        if (this.down === true)\n        {\n            this.down = false\n        }\n        else\n        {\n            this.handleDown(e, e.screenX, e.screenY)\n        }\n    }\n\n    mousemove(e)\n    {\n        if (this.down)\n        {\n            const x = e.screenX\n            const y = e.screenY\n            if (this.pastThreshold(x, y))\n            {\n                this.cancel()\n            }\n        }\n    }\n\n    mouseup(e)\n    {\n        if (this.down)\n        {\n            e.preventDefault()\n            this.handleClicks(e)\n        }\n    }\n}\n\n/**\n * Callback for\n * @callback Clicked~ClickedCallback\n * @param {UIEvent} event\n * @param {('clicked'|'double-clicked'|'long-clicked'|'click-down')} type\n */","export const config = {\n\n    /**\n     * application menu container styles\n     * @type {object}\n     */\n    ApplicationContainerStyle: {\n        'z-index': 999999,\n        'position': 'absolute',\n        'top': 0,\n        'left': 0,\n        'user-select': 'none',\n        'font-size': '0.85em'\n    },\n\n    /**\n     * application menu-bar styles\n     * @type {object}\n     */\n    ApplicationMenuStyle: {\n        'display': 'flex',\n        'position': 'relative',\n        'flex-direction': 'row',\n        'color': 'black',\n        'backgroundColor': 'rgb(230,230,230)',\n        'width': '100vw',\n        'border': 'none',\n        'box-shadow': 'unset',\n        'outline': 'none'\n    },\n\n    /**\n     * application menu entry styles\n     * @type {object}\n     */\n    ApplicationMenuRowStyle: {\n        'padding': '0.25em 0.5em',\n        'margin': 0,\n        'line-height': '1em'\n    },\n\n    /**\n     * lower-level menu window styles\n     * @type {object}\n     */\n    MenuStyle: {\n        'flex-direction': 'column',\n        'position': 'absolute',\n        'user-select': 'none',\n        'color': 'black',\n        'z-index': 999999,\n        'backgroundColor': 'white',\n        'border': '1px solid rgba(0,0,0,0.5)',\n        'boxShadow': '1px 3px 3px rgba(0,0,0,0.25)'\n    },\n\n    /**\n     * lower-level menu row styles\n     * @type {object}\n     */\n    RowStyle: {\n        'display': 'flex',\n        'padding': '0.25em 1.5em 0.25em',\n        'line-height': '1.5em'\n    },\n\n    /**\n     * lower-level menu accelerator styles\n     * @type {object}\n     */\n    AcceleratorStyle: {\n        'opacity': 0.5\n    },\n\n    /**\n     * lower-level menu separator styles\n     * @type {object}\n     */\n    SeparatorStyle: {\n        'border-bottom': '1px solid rgba(0,0,0,0.1)',\n        'margin': '0.5em 0'\n    },\n\n    /**\n     * accelerator key styles\n     * NOTE: accelerator keys must use text-decoration as its used as a toggle in the code\n     * @type {object}\n     */\n    AcceleratorKeyStyle: {\n        'text-decoration': 'underline',\n        'text-decoration-color': 'rgba(0,0,0,0.5)'\n    },\n\n    /**\n     * minimum column width in pixels for checked and arrow in the lower-level menus\n     * @type {number}\n     */\n    MinimumColumnWidth: 20,\n\n    /**\n     * CSS background style for selected MenuItems\n     * NOTE: unselected have 'transparent' style\n     * @type {string}\n     */\n    SelectedBackgroundStyle: 'rgba(0,0,0,0.1)',\n\n    /**\n     * number of pixels to overlap child menus\n     * @type {number}\n     */\n    Overlap: 5,\n\n    /**\n     * time in milliseconds to wait for submenu to open when mouse hovers\n     * @param {number}\n     */\n    SubmenuOpenDelay: 500\n}","/**\n * Keyboard Accelerator support used by menu (if available) and user-registered keys. Also works for user-defined keys independent of the menu system. Automatically instantiated when used with WindowManager.\n */\nclass Accelerator {\n\n    init()\n    {\n        // may be initialized by Menu or WindowManager in any order\n        if (!this.initialized)\n        {\n            this.menuKeys = {}\n            this.keys = {}\n            document.body.addEventListener('keydown', e => this._keydown(e))\n            document.body.addEventListener('keyup', e => this._keyup(e))\n            this.initialized = true\n        }\n    }\n\n    /** clears all menu keys */\n    clearMenuKeys()\n    {\n        this.menuKeys = {}\n    }\n\n    /** clear all user-registered keys */\n    clearKeys()\n    {\n        this.keys = {}\n    }\n\n    /**\n     * Register a shortcut key for use by an open menu\n     * @param {Accelerator~KeyCodes} letter\n     * @param {MenuItem} menuItem\n     * @param {boolean} applicationMenu\n     */\n    registerMenuShortcut(letter, menuItem)\n    {\n        if (letter)\n        {\n            const keyCode = (menuItem.menu.applicationMenu ? 'alt+' : '') + letter\n            this.menuKeys[this._prepareKey(keyCode)] = e =>\n            {\n                menuItem.handleClick(e)\n                e.stopPropagation()\n                e.preventDefault()\n            }\n        }\n    }\n\n    /**\n     * Register special shortcut keys for menu\n     * @param {MenuItem} menuItem\n     */\n    registerMenuSpecial(menu)\n    {\n        this.menuKeys['escape'] = () => menu.closeAll()\n        this.menuKeys['enter'] = e => menu.enter(e)\n        this.menuKeys['space'] = e => menu.enter(e)\n        this.menuKeys['arrowright'] = e => menu.move(e, 'right')\n        this.menuKeys['arrowleft'] = e => menu.move(e, 'left')\n        this.menuKeys['arrowup'] = e => menu.move(e, 'up')\n        this.menuKeys['arrowdown'] = e => menu.move(e, 'down')\n    }\n\n    /**\n     * special key registration for alt\n     * @param {function} pressed\n     * @param {function} released\n     */\n    registerAlt(pressed, released)\n    {\n        this.alt = { pressed, released }\n    }\n\n    /**\n     * Removes menu shortcuts\n     */\n    unregisterMenuShortcuts()\n    {\n        this.menuKeys = {}\n    }\n\n    /**\n     * Keycodes definition. In the form of modifier[+modifier...]+key\n     * <p>For example: ctrl+shift+e</p>\n     * <p>KeyCodes are case insensitive (i.e., shift+a is the same as Shift+A). And spaces are removed</p>\n     * <p>You can assign more than one key to the same shortcut by using a | between the keys (e.g., 'shift+a | ctrl+a')</p>\n     * <pre>\n     * Modifiers:\n     *    ctrl, alt, shift, meta, (ctrl aliases: command, control, commandorcontrol)\n     * </pre>\n     * <pre>\n     * Keys:\n     *    escape, 0-9, minus, equal, backspace, tab, a-z, backetleft, bracketright, semicolon, quote,\n     *    backquote, backslash, comma, period, slash, numpadmultiply, space, capslock, f1-f24, pause,\n     *    scrolllock, printscreen, home, arrowup, arrowleft, arrowright, arrowdown, pageup, pagedown,\n     *    end, insert, delete, enter, shiftleft, shiftright, ctrlleft, ctrlright, altleft, altright, shiftleft,\n     *    shiftright, numlock, numpad...\n     * </pre>\n     * For OS-specific codes and a more detailed explanation see {@link https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/code}. Also note that 'Digit' and 'Key' are removed from the code to make it easier to type.\n     *\n     * @typedef {string} Accelerator~KeyCodes\n     */\n\n    /**\n     * translate a user-provided keycode\n     * @param {Accelerator~KeyCodes} keyCode\n     * @return {Accelerator~KeyCodes} formatted and sorted keyCode\n     * @private\n     */\n    _prepareKey(keyCode)\n    {\n        const keys = []\n        let split\n        keyCode += ''\n        if (keyCode.length > 1 && keyCode.indexOf('|') !== -1)\n        {\n            split = keyCode.split('|')\n        }\n        else\n        {\n            split = [keyCode]\n        }\n        for (let code of split)\n        {\n            let key = ''\n            let modifiers = []\n            code = code.toLowerCase().replace(' ', '')\n            if (code.indexOf('+') !== -1)\n            {\n                const split = code.split('+')\n                for (let i = 0; i < split.length - 1; i++)\n                {\n                    let modifier = split[i]\n                    modifier = modifier.replace('commandorcontrol', 'ctrl')\n                    modifier = modifier.replace('command', 'ctrl')\n                    modifier = modifier.replace('control', 'ctrl')\n                    modifiers.push(modifier)\n                }\n                modifiers = modifiers.sort((a, b) => { return a[0] > b[0] ? 1 : a[0] < b[0] ? -1 : 0 })\n                for (let part of modifiers)\n                {\n                    key += part + '+'\n                }\n                key += split[split.length - 1]\n            }\n            else\n            {\n                key = code\n            }\n            keys.push(key)\n        }\n        return keys\n    }\n\n    /**\n     * Make the KeyCode pretty for printing on the menu\n     * @param {KeyCode} keyCode\n     * @return {string}\n     */\n    prettifyKey(keyCode)\n    {\n        let key = ''\n        const codes = this._prepareKey(keyCode)\n        for (let i = 0; i < codes.length; i++)\n        {\n            const keyCode = codes[i]\n            if (keyCode.indexOf('+') !== -1)\n            {\n                const split = keyCode.toLowerCase().split('+')\n                for (let i = 0; i < split.length - 1; i++)\n                {\n                    let modifier = split[i]\n                    key += modifier[0].toUpperCase() + modifier.substr(1) + '+'\n                }\n                key += split[split.length - 1].toUpperCase()\n            }\n            else\n            {\n                key = keyCode.toUpperCase()\n            }\n            if (i !== codes.length - 1)\n            {\n                key += ' or '\n            }\n        }\n        return key\n    }\n\n    /**\n     * register a key as a global accelerator\n     * @param {Accelerator~KeyCodes} keyCode (e.g., Ctrl+shift+E)\n     * @param {function} callback\n     */\n    register(keyCode, callback)\n    {\n        const keys = this._prepareKey(keyCode)\n        for (let key of keys)\n        {\n            this.keys[key] = e =>\n            {\n                callback(e)\n                e.preventDefault()\n                e.stopPropagation()\n            }\n        }\n    }\n\n    _keyup(e)\n    {\n        if (this.alt && (e.code === 'AltLeft' || e.code === 'AltRight'))\n        {\n            this.alt.released()\n            this.alt.isPressed = false\n        }\n    }\n\n    _keydown(e)\n    {\n        if (this.alt && !this.alt.isPressed && (e.code === 'AltLeft' || e.code === 'AltRight'))\n        {\n            this.alt.pressed()\n            this.alt.isPressed = true\n            e.preventDefault()\n        }\n        const modifiers = []\n        if (e.altKey)\n        {\n            modifiers.push('alt')\n        }\n        if (e.ctrlKey)\n        {\n            modifiers.push('ctrl')\n        }\n        if (e.metaKey)\n        {\n            modifiers.push('meta')\n        }\n        if (e.shiftKey)\n        {\n            modifiers.push('shift')\n        }\n        let keyCode = ''\n        for (let modifier of modifiers)\n        {\n            keyCode += modifier + '+'\n        }\n        let translate = e.code.toLowerCase()\n        translate = translate.replace('digit', '')\n        translate = translate.replace('key', '')\n        keyCode += translate\n        if (this.menuKeys[keyCode])\n        {\n            this.menuKeys[keyCode](e)\n        }\n        else if (this.keys[keyCode])\n        {\n            this.keys[keyCode](e)\n        }\n    }\n}\n\nexport const accelerator = new Accelerator()","import { html } from '../html'\r\nimport { config } from './config'\r\nimport { accelerator } from '../accelerator'\r\n\r\n/**\r\n * creates a MenuItem within a Menu\r\n * @param {object} options\r\n * @param {string} [options.label] label for menu entry may include accelerator by placing & before letter)\r\n * @param {string} [options.type] separator, checkbox, or undefined\r\n * @param {object} [options.styles] additional CSS styles to apply to this MenuItem\r\n * @param {string} [options.accelerator] see Accelerator for inputs (e.g., ctrl+shift+A)\r\n * @param {MenuItem} [options.submenu] attaches a submenu (and changes type to submenu)\r\n * @param {boolean} [options.checked] check the checkbox\r\n */\r\nexport class MenuItem\r\n{\r\n    constructor(options)\r\n    {\r\n        options = options || {}\r\n        this.styles = options.styles\r\n        this.div = html()\r\n        this.type = options.type\r\n        this.click = options.click\r\n        if (this.type === 'separator')\r\n        {\r\n            this.applyConfig(config.SeparatorStyle)\r\n        }\r\n        else\r\n        {\r\n            this._checked = options.checked\r\n            this.createChecked(options.checked)\r\n            this.text = options.label || '&nbsp;&nbsp;&nbsp;'\r\n            this.createShortcut()\r\n            this.createAccelerator(options.accelerator)\r\n            this.createSubmenu(options.submenu)\r\n            if (options.submenu)\r\n            {\r\n                this.submenu = options.submenu\r\n                this.submenu.applyConfig(config.MenuStyle)\r\n            }\r\n            this.applyConfig(config.RowStyle)\r\n            this.div.addEventListener('mousedown', (e) => this.handleClick(e))\r\n            this.div.addEventListener('touchstart', (e) => this.handleClick(e))\r\n            this.div.addEventListener('mouseenter', () => this.mouseenter())\r\n            this.div.addEventListener('mouseleave', () => this.mouseleave())\r\n        }\r\n    }\r\n\r\n    /**\r\n     * The click callback\r\n     * @callback MenuItem~ClickCallback\r\n     * @param {InputEvent} e\r\n     */\r\n\r\n    mouseenter()\r\n    {\r\n        if (!this.submenu || this.menu.showing !== this )\r\n        {\r\n            this.div.style.backgroundColor = config.SelectedBackgroundStyle\r\n            if (this.submenu && (!this.menu.applicationMenu || this.menu.showing))\r\n            {\r\n                this.submenuTimeout = setTimeout(() =>\r\n                {\r\n                    this.submenuTimeout = null\r\n                    this.submenu.show(this)\r\n                }, this.menu.applicationMenu ? 0 : config.SubmenuOpenDelay)\r\n            }\r\n        }\r\n    }\r\n\r\n    mouseleave()\r\n    {\r\n        if (!this.submenu || this.menu.showing !== this)\r\n        {\r\n            if (this.submenuTimeout)\r\n            {\r\n                clearTimeout(this.submenuTimeout)\r\n                this.submenuTimeout = null\r\n            }\r\n            this.div.style.backgroundColor = 'transparent'\r\n        }\r\n    }\r\n\r\n    applyConfig(base)\r\n    {\r\n        const styles = {}\r\n        for (let style in base)\r\n        {\r\n            styles[style] = base[style]\r\n        }\r\n        if (this.styles)\r\n        {\r\n            for (let style in this.styles)\r\n            {\r\n                styles[style] = this.styles[style]\r\n            }\r\n        }\r\n        for (let style in styles)\r\n        {\r\n            this.div.style[style] = styles[style]\r\n        }\r\n    }\r\n\r\n    createChecked(checked)\r\n    {\r\n        this.check = html({ parent: this.div, html: checked ? '&#10004;' : '' })\r\n    }\r\n\r\n    createShortcut()\r\n    {\r\n        if (this.type !== 'separator')\r\n        {\r\n            const text = this.text\r\n            this.label = html({ parent: this.div })\r\n            let current = html({ parent: this.label, type: 'span' })\r\n            if (text.indexOf('&') !== -1)\r\n            {\r\n                let i = 0\r\n                do\r\n                {\r\n                    const letter = text[i]\r\n                    if (letter === '&')\r\n                    {\r\n                        i++\r\n                        this.shortcutSpan = html({ parent: this.label, type: 'span', html: text[i], styles: config.AcceleratorKeyStyle })\r\n                        current = html({ parent: this.label, type: 'span' })\r\n                    }\r\n                    else\r\n                    {\r\n                        current.innerHTML += letter\r\n                    }\r\n                    i++\r\n                }\r\n                while (i < text.length)\r\n            }\r\n            else\r\n            {\r\n                this.label.innerHTML = text\r\n            }\r\n        }\r\n    }\r\n\r\n    showShortcut()\r\n    {\r\n        if (this.shortcutSpan)\r\n        {\r\n            this.shortcutSpan.style.textDecoration = 'underline'\r\n        }\r\n    }\r\n\r\n    hideShortcut()\r\n    {\r\n        if (this.shortcutSpan)\r\n        {\r\n            this.shortcutSpan.style.textDecoration = 'none'\r\n        }\r\n    }\r\n\r\n    createAccelerator(acceleratorKey)\r\n    {\r\n        this.accelerator = html({ parent: this.div, html: acceleratorKey ? accelerator.prettifyKey(acceleratorKey) : '', styles: config.AcceleratorStyle })\r\n        if (accelerator)\r\n        {\r\n            accelerator.register(acceleratorKey, (e) => this.click(e))\r\n        }\r\n    }\r\n\r\n    createSubmenu(submenu)\r\n    {\r\n        this.arrow = html({ parent: this.div, html: submenu ? '&#9658;' : '' })\r\n    }\r\n\r\n    closeAll()\r\n    {\r\n        let menu = this.menu\r\n        accelerator.unregisterMenuShortcuts()\r\n        while (menu && !menu.applicationMenu)\r\n        {\r\n            if (menu.showing)\r\n            {\r\n                menu.showing.div.style.backgroundColor = 'transparent'\r\n                menu.showing = null\r\n            }\r\n            menu.div.remove()\r\n            menu = menu.menu\r\n        }\r\n        if (menu.showing)\r\n        {\r\n            menu.showing.div.style.background = 'transparent'\r\n            menu.showing = null\r\n            menu.hideAccelerators()\r\n        }\r\n    }\r\n\r\n    handleClick(e)\r\n    {\r\n        if (this.submenu)\r\n        {\r\n            if (this.submenuTimeout)\r\n            {\r\n                clearTimeout(this.submenuTimeout)\r\n                this.submenuTimeout = null\r\n            }\r\n            this.submenu.show(this)\r\n            this.div.style.backgroundColor = config.SelectedBackgroundStyle\r\n            if (typeof e !== 'undefined' && this.menu.applicationMenu && document.activeElement !== this.menu.div)\r\n            {\r\n                this.menu.div.focus()\r\n            }\r\n            if (e)\r\n            {\r\n                e.preventDefault()\r\n            }\r\n        }\r\n        else if (this.type === 'checkbox')\r\n        {\r\n            this.checked = !this.checked\r\n            this.closeAll()\r\n        }\r\n        else\r\n        {\r\n            this.closeAll()\r\n        }\r\n\r\n        if (this.click)\r\n        {\r\n            this.click(e, this)\r\n        }\r\n    }\r\n\r\n    get checked()\r\n    {\r\n        return this._checked\r\n    }\r\n    set checked(value)\r\n    {\r\n        this._checked = value\r\n        this.check.innerHTML = this._checked ? '&#10004;' : ''\r\n    }\r\n}","import { config } from './config'\r\nimport { MenuItem } from './MenuItem'\r\nimport { accelerator } from '../accelerator'\r\nimport { html } from '../html'\r\n\r\n/**\r\n * creates a menu bar or a submenu within a menu\r\n * @param {object} [options]\r\n * @param {object} [options.styles] additional CSS styles for menu\r\n */\r\nexport class Menu\r\n{\r\n    constructor(options)\r\n    {\r\n        accelerator.init()\r\n        options = options || {}\r\n        this.div = document.createElement('div')\r\n        this.styles = options.styles\r\n        this.children = []\r\n        this.applyConfig(config.MenuStyle)\r\n        this.div.tabIndex = -1\r\n    }\r\n\r\n    /**\r\n     * append a MenuItem to the Menu\r\n     * @param {MenuItem} menuItem\r\n     */\r\n    append(menuItem)\r\n    {\r\n        if (menuItem.submenu)\r\n        {\r\n            menuItem.submenu.menu = this\r\n        }\r\n        menuItem.menu = this\r\n        this.div.appendChild(menuItem.div)\r\n        if (menuItem.type !== 'separator')\r\n        {\r\n            this.children.push(menuItem)\r\n        }\r\n    }\r\n\r\n    /**\r\n     * inserts a MenuItem into the Menu\r\n     * @param {number} pos\r\n     * @param {MenuItem} menuItem\r\n     */\r\n    insert(pos, menuItem)\r\n    {\r\n        if (pos >= this.div.childNodes.length)\r\n        {\r\n            this.append(menuItem)\r\n        }\r\n        else\r\n        {\r\n            if (menuItem.submenu)\r\n            {\r\n                menuItem.submenu.menu = this\r\n            }\r\n            menuItem.menu = this\r\n            this.div.insertBefore(menuItem.div, this.div.childNodes[pos])\r\n            if (menuItem.type !== 'separator')\r\n            {\r\n                this.children.splice(pos, 0, menuItem)\r\n            }\r\n        }\r\n    }\r\n\r\n    hide()\r\n    {\r\n        let current = this.menu.showing\r\n        while (current && current.submenu)\r\n        {\r\n            current.div.style.backgroundColor = 'transparent'\r\n            current.submenu.div.remove()\r\n            let next = current.submenu.showing\r\n            if (next)\r\n            {\r\n                current.submenu.showing.div.style.backgroundColor = 'transparent'\r\n                current.submenu.showing = null\r\n            }\r\n            current = next\r\n        }\r\n    }\r\n\r\n    show(menuItem)\r\n    {\r\n        accelerator.unregisterMenuShortcuts()\r\n        if (this.menu && this.menu.showing === menuItem)\r\n        {\r\n            this.hide()\r\n            this.menu.showing = null\r\n            this.div.remove()\r\n            this.menu.showAccelerators()\r\n        }\r\n        else\r\n        {\r\n            if (this.menu)\r\n            {\r\n                if (this.menu.showing && this.menu.children.indexOf(menuItem) !== -1)\r\n                {\r\n                    this.hide()\r\n                }\r\n                this.menu.showing = menuItem\r\n                this.menu.hideAccelerators()\r\n            }\r\n            const div = menuItem.div\r\n            const parent = this.menu.div\r\n            if (this.menu.applicationMenu)\r\n            {\r\n                this.div.style.left = div.offsetLeft + 'px'\r\n                this.div.style.top = div.offsetTop + div.offsetHeight + 'px'\r\n            }\r\n            else\r\n            {\r\n                this.div.style.left = parent.offsetLeft + parent.offsetWidth - config.Overlap + 'px'\r\n                this.div.style.top = parent.offsetTop + div.offsetTop - config.Overlap + 'px'\r\n            }\r\n            this.attached = menuItem\r\n            this.showAccelerators()\r\n            Menu.application.appendChild(this.div)\r\n            let label = 0, accelerator = 0, arrow = 0, checked = 0\r\n            for (let child of this.children)\r\n            {\r\n                child.check.style.width = 'auto'\r\n                child.label.style.width = 'auto'\r\n                child.accelerator.style.width = 'auto'\r\n                child.arrow.style.width = 'auto'\r\n                if (child.type === 'checkbox')\r\n                {\r\n                    checked = config.MinimumColumnWidth\r\n                }\r\n                if (child.submenu)\r\n                {\r\n                    arrow = config.MinimumColumnWidth\r\n                }\r\n            }\r\n            for (let child of this.children)\r\n            {\r\n                const childLabel = child.label.offsetWidth * 2\r\n                label = childLabel > label ? childLabel : label\r\n                const childAccelerator = child.accelerator.offsetWidth\r\n                accelerator = childAccelerator > accelerator ? childAccelerator : accelerator\r\n                if (child.submenu)\r\n                {\r\n                    arrow = child.arrow.offsetWidth\r\n                }\r\n            }\r\n            for (let child of this.children)\r\n            {\r\n                child.check.style.width = checked + 'px'\r\n                child.label.style.width = label + 'px'\r\n                child.accelerator.style.width = accelerator + 'px'\r\n                child.arrow.style.width = arrow + 'px'\r\n            }\r\n            if (this.div.offsetLeft + this.div.offsetWidth > window.innerWidth)\r\n            {\r\n                this.div.style.left = window.innerWidth - this.div.offsetWidth + 'px'\r\n            }\r\n            if (this.div.offsetTop + this.div.offsetHeight > window.innerHeight)\r\n            {\r\n                this.div.style.top = window.innerHeight - this.div.offsetHeight + 'px'\r\n            }\r\n            Menu.application.menu.div.focus()\r\n        }\r\n    }\r\n\r\n    applyConfig(base)\r\n    {\r\n        const styles = {}\r\n        for (let style in base)\r\n        {\r\n            styles[style] = base[style]\r\n        }\r\n        if (this.styles)\r\n        {\r\n            for (let style in this.styles)\r\n            {\r\n                styles[style] = this.styles[style]\r\n            }\r\n        }\r\n        for (let style in styles)\r\n        {\r\n            this.div.style[style] = styles[style]\r\n        }\r\n    }\r\n\r\n    showAccelerators()\r\n    {\r\n        for (let child of this.children)\r\n        {\r\n            child.showShortcut()\r\n            if (child.type !== 'separator')\r\n            {\r\n                const index = child.text.indexOf('&')\r\n                if (index !== -1)\r\n                {\r\n                    accelerator.registerMenuShortcut(child.text[index + 1], child)\r\n                }\r\n            }\r\n        }\r\n        if (!this.applicationMenu)\r\n        {\r\n            accelerator.registerMenuSpecial(this)\r\n        }\r\n    }\r\n\r\n    hideAccelerators()\r\n    {\r\n        for (let child of this.children)\r\n        {\r\n            child.hideShortcut()\r\n        }\r\n    }\r\n\r\n    closeAll()\r\n    {\r\n        accelerator.unregisterMenuShortcuts()\r\n        let application = Menu.application.menu\r\n        if (application.showing)\r\n        {\r\n            let menu = application\r\n            while (menu.showing)\r\n            {\r\n                menu = menu.showing.submenu\r\n            }\r\n            while (menu && !menu.applicationMenu)\r\n            {\r\n                if (menu.showing)\r\n                {\r\n                    menu.showing.div.style.backgroundColor = 'transparent'\r\n                    menu.showing = null\r\n                }\r\n                menu.div.remove()\r\n                menu = menu.menu\r\n            }\r\n            if (menu)\r\n            {\r\n                menu.showing.div.style.background = 'transparent'\r\n                menu.showing = null\r\n                menu.hideAccelerators()\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * move selector to the next child pane\r\n     * @param {string} direction (left or right)\r\n     * @private\r\n     */\r\n    moveChild(direction)\r\n    {\r\n        let index\r\n        if (direction === 'left')\r\n        {\r\n            const parent = this.selector.menu.menu\r\n            index = parent.children.indexOf(parent.showing)\r\n            index--\r\n            index = (index < 0) ? parent.children.length - 1 : index\r\n            parent.children[index].handleClick()\r\n        }\r\n        else\r\n        {\r\n            let parent = this.selector.menu.menu\r\n            let selector = parent.showing\r\n            while (!parent.applicationMenu)\r\n            {\r\n                selector.handleClick()\r\n                selector.div.style.backgroundColor = 'transparent'\r\n                parent = parent.menu\r\n                selector = parent.showing\r\n            }\r\n            index = parent.children.indexOf(selector)\r\n            index++\r\n            index = (index === parent.children.length) ? 0 : index\r\n            parent.children[index].handleClick()\r\n        }\r\n        this.selector = null\r\n    }\r\n\r\n    /**\r\n     * move selector right and left\r\n     * @param {MouseEvent} e\r\n     * @param {string} direction\r\n     * @private\r\n     */\r\n    horizontalSelector(e, direction)\r\n    {\r\n        if (direction === 'right')\r\n        {\r\n            if (this.selector.submenu)\r\n            {\r\n                this.selector.handleClick(e)\r\n                this.selector.submenu.selector = this.selector.submenu.children[0]\r\n                this.selector.submenu.selector.div.style.backgroundColor = config.SelectedBackgroundStyle\r\n                this.selector = null\r\n            }\r\n            else\r\n            {\r\n                this.moveChild(direction)\r\n            }\r\n        }\r\n        else if (direction === 'left')\r\n        {\r\n            if (!this.selector.menu.menu.applicationMenu)\r\n            {\r\n                this.selector.menu.attached.handleClick(e)\r\n                this.selector.menu.menu.selector = this.selector.menu.attached\r\n                this.selector = null\r\n            }\r\n            else\r\n            {\r\n                this.moveChild(direction)\r\n            }\r\n        }\r\n        e.stopPropagation()\r\n        e.preventDefault()\r\n    }\r\n\r\n    /**\r\n     * move the selector in the menu\r\n     * @param {KeyboardEvent} e\r\n     * @param {string} direction (left, right, up, down)\r\n     */\r\n    move(e, direction)\r\n    {\r\n        if (this.selector)\r\n        {\r\n            this.selector.div.style.backgroundColor = 'transparent'\r\n            let index = this.children.indexOf(this.selector)\r\n            if (direction === 'down')\r\n            {\r\n                index++\r\n                index = (index === this.children.length) ? 0 : index\r\n            }\r\n            else if (direction === 'up')\r\n            {\r\n                index--\r\n                index = (index < 0) ? this.children.length - 1 : index\r\n            }\r\n            else\r\n            {\r\n                return this.horizontalSelector(e, direction)\r\n            }\r\n            this.selector = this.children[index]\r\n        }\r\n        else\r\n        {\r\n            if (direction === 'up')\r\n            {\r\n                this.selector = this.children[this.children.length - 1]\r\n            }\r\n            else\r\n            {\r\n                this.selector = this.children[0]\r\n            }\r\n        }\r\n        if (this.selector)\r\n        {\r\n            this.selector.div.style.backgroundColor = config.SelectedBackgroundStyle\r\n        }\r\n        e.preventDefault()\r\n        e.stopPropagation()\r\n    }\r\n\r\n    /**\r\n     * click the selector with keyboard\r\n     * @private\r\n     */\r\n    enter(e)\r\n    {\r\n        if (this.selector)\r\n        {\r\n            this.selector.handleClick(e)\r\n            e.preventDefault()\r\n            e.stopPropagation()\r\n        }\r\n    }\r\n\r\n    /**\r\n     * array containing the menu's items\r\n     * @property {MenuItems[]} items\r\n     * @readonly\r\n     */\r\n    get items()\r\n    {\r\n        return this.children\r\n    }\r\n\r\n    /**\r\n     * show application menu accelerators when alt is pressed\r\n     * @private\r\n     */\r\n    showApplicationAccelerators()\r\n    {\r\n        this.hideAccelerators()\r\n        accelerator.registerAlt(() =>\r\n        {\r\n            if (!this.showing)\r\n            {\r\n                this.showAccelerators()\r\n            }\r\n        }, () =>\r\n        {\r\n            this.hideAccelerators()\r\n        })\r\n    }\r\n\r\n    /**\r\n     * use this to change the default config settings across all menus\r\n     * @type {config}\r\n     */\r\n    static get config()\r\n    {\r\n        return config\r\n    }\r\n\r\n    /**\r\n     * gets application menu height\r\n     * @returns {number}\r\n     */\r\n    static getApplicationHeight()\r\n    {\r\n        return Menu.application ? Menu.application.offsetHeight : 0\r\n    }\r\n\r\n    /**\r\n     * sets active application Menu (and removes any existing application menus)\r\n     * @param {Menu} menu\r\n     * @param {HTMLElement} [parent=document.body]\r\n     */\r\n    static setApplicationMenu(menu, parent=document.body)\r\n    {\r\n        accelerator.clearMenuKeys()\r\n        if (Menu.application)\r\n        {\r\n            Menu.application.remove()\r\n        }\r\n        Menu.application = html({ parent, styles: config.ApplicationContainerStyle })\r\n        Menu.application.menu = menu\r\n        menu.applyConfig(config.ApplicationMenuStyle)\r\n        for (let child of menu.children)\r\n        {\r\n            child.applyConfig(config.ApplicationMenuRowStyle)\r\n            if (child.arrow)\r\n            {\r\n                child.arrow.style.display = 'none'\r\n            }\r\n            menu.div.appendChild(child.div)\r\n        }\r\n\r\n        Menu.application.appendChild(menu.div)\r\n        menu.applicationMenu = true\r\n        menu.div.tabIndex = -1\r\n\r\n        // don't let menu bar focus unless windows are open (this fixes a focus bug)\r\n        menu.div.addEventListener('focus', () =>\r\n        {\r\n            if (!menu.showing)\r\n            {\r\n                menu.div.blur()\r\n            }\r\n        })\r\n\r\n        // close all windows if menu is no longer the focus\r\n        menu.div.addEventListener('blur', () =>\r\n        {\r\n            if (menu.showing)\r\n            {\r\n                menu.closeAll()\r\n            }\r\n        })\r\n        menu.showApplicationAccelerators()\r\n    }\r\n}","import Events from 'eventemitter3'\r\nimport { clicked } from 'clicked'\r\n\r\nimport './events'\r\nimport { html } from './html'\r\nimport { Menu } from './Menu/Menu'\r\n\r\n/**\r\n * Window class returned by WindowManager.createWindow()\r\n * @param {WindowManager} [wm]\r\n * @param {Window~WindowOptions} [options]\r\n * @fires open\r\n * @fires focus\r\n * @fires blur\r\n * @fires close\r\n * @fires maximize\r\n * @fires maximize-restore\r\n * @fires move\r\n * @fires move-start\r\n * @fires move-end\r\n * @fires resize\r\n * @fires resize-start\r\n * @fires resize-end\r\n * @fires move-x\r\n * @fires move-y\r\n * @fires resize-width\r\n * @fires resize-height\r\n */\r\nexport class Window extends Events\r\n{\r\n    constructor(wm, options = {})\r\n    {\r\n        super()\r\n        this.wm = wm\r\n        this.options = options\r\n        this.id = typeof this.options.id === 'undefined' ? Window.id++ : this.options.id\r\n\r\n        this._createWin()\r\n        this._createWinBox()\r\n        this._createTitlebar()\r\n        this._createContent()\r\n        if (this.options.resizable)\r\n        {\r\n            this._createResize()\r\n        }\r\n        this._createOverlay()\r\n        this._buildTransform()\r\n        this._listeners()\r\n\r\n        this.active = false\r\n        this.maximized = false\r\n\r\n        this._closed = true\r\n        this._restore = null\r\n        this._moving = null\r\n        this._resizing = null\r\n        this._attachedToScreen = { vertical: '', horziontal: '' }\r\n    }\r\n\r\n    /**\r\n     * open the window\r\n     * @param {boolean} [noFocus] do not focus window when opened\r\n     */\r\n    open(noFocus)\r\n    {\r\n        if (this._closed)\r\n        {\r\n            this.win.style.display = 'block'\r\n            this._closed = false\r\n            this.emit('open', this)\r\n            if (!noFocus)\r\n            {\r\n                this.focus()\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * focus the window\r\n     */\r\n    focus()\r\n    {\r\n        this.active = true\r\n        if (this.options.titlebar)\r\n        {\r\n            this.winTitlebar.style.backgroundColor = this.options.backgroundTitlebarActive\r\n        }\r\n        this.emit('focus', this)\r\n    }\r\n\r\n    /**\r\n     * blur the window\r\n     */\r\n    blur()\r\n    {\r\n        this.active = false\r\n        if (this.options.titlebar)\r\n        {\r\n            this.winTitlebar.style.backgroundColor = this.options.backgroundTitlebarInactive\r\n        }\r\n        this.emit('blur', this)\r\n    }\r\n\r\n    /**\r\n     * closes the window (can be reopened with open)\r\n     */\r\n    close()\r\n    {\r\n        if (!this._closed)\r\n        {\r\n            this._closed = true\r\n            this.win.style.display = 'none'\r\n            this.emit('close', this)\r\n        }\r\n    }\r\n\r\n    /**\r\n     * is window closed?\r\n     * @type {boolean}\r\n     * @readonly\r\n     */\r\n    get closed()\r\n    {\r\n        return this._closed\r\n    }\r\n\r\n    /**\r\n     * left coordinate\r\n     * @type {number}\r\n     */\r\n    get x() { return this.options.x }\r\n    set x(value)\r\n    {\r\n        if (value !== this.options.x)\r\n        {\r\n            this.options.x = value\r\n            this.emit('move-x', this)\r\n            this._buildTransform()\r\n        }\r\n    }\r\n\r\n    _buildTransform()\r\n    {\r\n        this.win.style.transform = `translate(${this.options.x}px,${this.options.y}px)`\r\n    }\r\n\r\n    /**\r\n     * top coordinate\r\n     * @type {number}\r\n     */\r\n    get y() { return this.options.y }\r\n    set y(value)\r\n    {\r\n        if (value !== this.options.y)\r\n        {\r\n            this.options.y = value\r\n            this._buildTransform()\r\n            this.emit('move-y', this)\r\n        }\r\n    }\r\n\r\n    /**\r\n     * width of window\r\n     * @type {number}\r\n     */\r\n    get width() { return this.options.width || this.win.offsetWidth }\r\n    set width(value)\r\n    {\r\n        if (value !== this.options.width)\r\n        {\r\n            if (value)\r\n            {\r\n                this.win.style.width = `${value}px`\r\n                this.options.width = this.win.offsetWidth\r\n            }\r\n            else\r\n            {\r\n                this.win.style.width = 'auto'\r\n                this.options.width = ''\r\n            }\r\n            this.emit('resize-width', this)\r\n        }\r\n    }\r\n\r\n    /**\r\n     * height of window\r\n     * @type {number}\r\n     */\r\n    get height() { return this.options.height || this.win.offsetHeight }\r\n    set height(value)\r\n    {\r\n        if (value !== this.options.height)\r\n        {\r\n            if (value)\r\n            {\r\n                this.win.style.height = `${value}px`\r\n                this.options.height = this.win.offsetHeight\r\n            }\r\n            else\r\n            {\r\n                this.win.style.height = 'auto'\r\n                this.options.height = ''\r\n            }\r\n            this.emit('resize-height', this)\r\n        }\r\n    }\r\n\r\n    /**\r\n     * resize the window\r\n     * @param {number} width\r\n     * @param {number} height\r\n     */\r\n    resize(width, height)\r\n    {\r\n        this.width = width\r\n        this.height = height\r\n    }\r\n\r\n    /**\r\n     * move window\r\n     * @param {number} x\r\n     * @param {number} y\r\n     */\r\n    move(x, y)\r\n    {\r\n        const keepInside = this.keepInside\r\n        if (keepInside)\r\n        {\r\n            if (keepInside === true || keepInside === 'horizontal')\r\n            {\r\n                const width = this.wm.win.offsetWidth\r\n                x = x + this.width > width ? width - this.width : x\r\n                x = x < 0 ? 0 : x\r\n            }\r\n            if (keepInside === true || keepInside === 'vertical')\r\n            {\r\n                const height = this.wm.win.offsetHeight\r\n                y = y + this.height > height ? height - this.height : y\r\n                const top = Menu.getApplicationHeight()\r\n                y = y < top ? top : y\r\n            }\r\n        }\r\n        if (x !== this.options.x)\r\n        {\r\n            this.options.x = x\r\n            this.emit('move-x', this)\r\n        }\r\n        if (y !== this.options.y)\r\n        {\r\n            this.options.y = y\r\n            this.emit('move-y', this)\r\n        }\r\n        this._buildTransform()\r\n    }\r\n\r\n    /**\r\n     * maximize the window\r\n     */\r\n    maximize()\r\n    {\r\n        if (this.options.maximizable)\r\n        {\r\n            if (this.maximized)\r\n            {\r\n                this.x = this.maximized.x\r\n                this.y = this.maximized.y\r\n                this.width = this.maximized.width\r\n                this.height = this.maximized.height\r\n                this.maximized = null\r\n                this.emit('restore', this)\r\n                this.buttons.maximize.innerHTML = this.options.maximizeButton\r\n            }\r\n            else\r\n            {\r\n                const x = this.x, y = this.y, width = this.win.offsetWidth, height = this.win.offsetHeight\r\n                this.maximized = { x, y, width, height }\r\n                this.x = 0\r\n                this.y = 0\r\n                this.width = this.wm.wallpaper.offsetWidth\r\n                this.height = this.wm.wallpaper.offsetHeight\r\n                this.emit('maximize', this)\r\n                this.buttons.maximize.innerHTML = this.options.restoreButton\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * sends window to back of window-manager\r\n     */\r\n    sendToBack()\r\n    {\r\n        this.wm.sendToBack(this)\r\n    }\r\n\r\n    /**\r\n     * send window to front of window-manager\r\n     */\r\n    sendToFront()\r\n    {\r\n        this.wm.sendToFront(this)\r\n    }\r\n\r\n    /**\r\n     * save the state of the window\r\n     * @return {Object} data\r\n     */\r\n    save()\r\n    {\r\n        const data = {}\r\n        const maximized = this.maximized\r\n        if (maximized)\r\n        {\r\n            data.maximized = { left: maximized.left, top: maximized.top, width: maximized.width, height: maximized.height }\r\n        }\r\n        data.x = this.x\r\n        data.y = this.y\r\n        if (typeof this.options.width !== 'undefined')\r\n        {\r\n            data.width = this.options.width\r\n        }\r\n        if (typeof this.options.height !== 'undefined')\r\n        {\r\n            data.height = this.options.height\r\n        }\r\n        data.closed = this._closed\r\n        return data\r\n    }\r\n\r\n    /**\r\n     * return the state of the window\r\n     * @param {Object} data from save()\r\n     */\r\n    load(data)\r\n    {\r\n        if (data.maximized)\r\n        {\r\n            if (!this.maximized)\r\n            {\r\n                this.maximize(true)\r\n            }\r\n        }\r\n        else if (this.maximized)\r\n        {\r\n            this.maximize(true)\r\n        }\r\n        this.move(data.x, data.y)\r\n        if (typeof data.width !== 'undefined')\r\n        {\r\n            this.width = data.width\r\n        }\r\n        else\r\n        {\r\n            this.win.style.width = 'auto'\r\n        }\r\n        if (typeof data.height !== 'undefined')\r\n        {\r\n            this.height = data.height\r\n        }\r\n        else\r\n        {\r\n            this.win.style.height = 'auto'\r\n        }\r\n        if (data.closed)\r\n        {\r\n            this.close(true)\r\n        }\r\n        else if (this.closed)\r\n        {\r\n            this.open(true, true)\r\n        }\r\n    }\r\n\r\n    /**\r\n     * change title\r\n     * @type {string}\r\n     */\r\n    get title() { return this._title }\r\n    set title(value)\r\n    {\r\n        this.winTitle.innerText = value\r\n        this.emit('title-change', this)\r\n    }\r\n\r\n\r\n    /**\r\n     * right coordinate of window\r\n     * @type {number}\r\n     */\r\n    get right() { return this.x + this.width }\r\n    set right(value)\r\n    {\r\n        this.x = value - this.width\r\n    }\r\n\r\n    /**\r\n     * bottom coordinate of window\r\n     * @type {number}\r\n     */\r\n    get bottom() { return this.y + this.height }\r\n    set bottom(value)\r\n    {\r\n        this.y = value - this.height\r\n    }\r\n\r\n    /**\r\n     * centers window in middle of other window or document.body\r\n     * @param {Window} [win]\r\n     */\r\n    center(win)\r\n    {\r\n        if (win)\r\n        {\r\n            this.move(\r\n                win.x + win.width / 2 - this.width / 2,\r\n                win.y + win.height / 2 - this.height / 2\r\n            )\r\n        }\r\n        else\r\n        {\r\n            this.move(\r\n                window.innerWidth / 2 - this.width / 2,\r\n                window.innerHeight / 2 - this.height / 2\r\n            )\r\n        }\r\n    }\r\n\r\n    _createWin()\r\n    {\r\n        /**\r\n         * This is the top-level DOM element\r\n         * @type {HTMLElement}\r\n         * @readonly\r\n         */\r\n        this.win = html({\r\n            parent: this.wm.win,\r\n            styles: {\r\n                'display': 'none',\r\n                'border-radius': this.options.borderRadius,\r\n                'user-select': 'none',\r\n                'overflow': 'hidden',\r\n                'position': 'absolute',\r\n                'min-width': this.options.minWidth,\r\n                'min-height': this.options.minHeight,\r\n                'background-color': this.options.backgroundWindow,\r\n                'width': isNaN(this.options.width) ? this.options.width : this.options.width + 'px',\r\n                'height': isNaN(this.options.height) ? this.options.height : this.options.height + 'px',\r\n                ...this.options.styles\r\n            }\r\n        })\r\n    }\r\n\r\n    _createWinBox()\r\n    {\r\n        /**\r\n         * This is the container for the titlebar+content\r\n         * @type {HTMLElement}\r\n         * @readonly\r\n         */\r\n        this.winBox = html({\r\n            parent: this.win,\r\n            styles: {\r\n                'display': 'flex',\r\n                'flex-direction': 'column',\r\n                'width': '100%',\r\n                'height': '100%',\r\n                'min-height': this.options.minHeight\r\n            }\r\n        })\r\n    }\r\n\r\n    _createContent()\r\n    {\r\n        /**\r\n         * This is the content DOM element. Use this to add content to the Window.\r\n         * @type {HTMLElement}\r\n         * @readonly\r\n         */\r\n        this.content = html({\r\n            parent: this.winBox,\r\n            type: 'section',\r\n            styles: {\r\n                'display': 'block',\r\n                'flex': 1,\r\n                'min-height': this.options.minHeight,\r\n                'overflow-x': 'hidden',\r\n                'overflow-y': 'auto'\r\n            }\r\n        })\r\n    }\r\n\r\n    _createOverlay()\r\n    {\r\n        this.overlay = html({\r\n            parent: this.win,\r\n            styles: {\r\n                'display': 'none',\r\n                'position': 'absolute',\r\n                'left': 0,\r\n                'top': 0,\r\n                'width': '100%',\r\n                'height': '100%'\r\n            }\r\n        })\r\n        this.overlay.addEventListener('mousedown', (e) => { this._downTitlebar(e); e.stopPropagation() })\r\n        this.overlay.addEventListener('touchstart', (e) => { this._downTitlebar(e); e.stopPropagation() })\r\n    }\r\n\r\n    _downTitlebar(e)\r\n    {        const event = this._convertMoveEvent(e)\r\n        this._moving = {\r\n            x: event.pageX - this.x,\r\n            y: event.pageY - this.y\r\n        }\r\n        this.emit('move-start', this)\r\n        this._moved = false\r\n    }\r\n\r\n    _createTitlebar()\r\n    {\r\n        if (this.options.titlebar)\r\n        {\r\n            this.winTitlebar = html({\r\n                parent: this.winBox, type: 'header', styles: {\r\n                    'user-select': 'none',\r\n                    'display': 'flex',\r\n                    'flex-direction': 'row',\r\n                    'align-items': 'center',\r\n                    'justify-content': 'center',\r\n                    'height': this.options.titlebarHeight,\r\n                    'min-height': this.options.titlebarHeight,\r\n                    'border': 0,\r\n                    'padding': '0 8px',\r\n                    'overflow': 'hidden',\r\n                }\r\n            })\r\n            const winTitleStyles = {\r\n                'user-select': 'none',\r\n                'flex': 1,\r\n                'display': 'flex',\r\n                'flex-direction': 'row',\r\n                'align-items': 'center',\r\n                'user-select': 'none',\r\n                'cursor': 'default',\r\n                'padding': 0,\r\n                'margin': 0,\r\n                'font-size': '16px',\r\n                'font-weight': 400,\r\n                'color': this.options.foregroundTitle\r\n            }\r\n            if (this.options.titleCenter)\r\n            {\r\n                winTitleStyles['justify-content'] = 'center'\r\n            }\r\n            else\r\n            {\r\n                winTitleStyles['padding-left'] = '8px'\r\n\r\n            }\r\n            this.winTitle = html({ parent: this.winTitlebar, type: 'span', html: this.options.title, styles: winTitleStyles })\r\n            this._createButtons()\r\n\r\n            if (this.options.movable)\r\n            {\r\n                this.winTitlebar.addEventListener('mousedown', (e) => this._downTitlebar(e))\r\n                this.winTitlebar.addEventListener('touchstart', (e) => this._downTitlebar(e))\r\n            }\r\n            if (this.options.maximizable)\r\n            {\r\n                clicked(this.winTitlebar, () => this.maximize(), { doubleClicked: true, clicked: false})\r\n            }\r\n        }\r\n    }\r\n\r\n    _createButtons()\r\n    {\r\n        this.winButtonGroup = html({\r\n            parent: this.winTitlebar, styles: {\r\n                'display': 'flex',\r\n                'flex-direction': 'row',\r\n                'align-items': 'center',\r\n                'padding-left': '10px'\r\n            }\r\n        })\r\n        const button = {\r\n            'display': 'inline-block',\r\n            'border': 0,\r\n            'margin': 0,\r\n            'margin-left': '15px',\r\n            'padding': 0,\r\n            'width': '12px',\r\n            'height': '12px',\r\n            'background-color': 'transparent',\r\n            'background-size': 'cover',\r\n            'background-repeat': 'no-repeat',\r\n            'opacity': .7,\r\n            'color': this.options.foregroundButton,\r\n            'outline': 0\r\n        }\r\n        this.buttons = {}\r\n        if (this.options.maximizable)\r\n        {\r\n            this.buttons.maximize = html({ parent: this.winButtonGroup, html: this.options.maximizeButton, type: 'button', styles: button })\r\n            clicked(this.buttons.maximize, () => this.maximize())\r\n        }\r\n        if (this.options.closable)\r\n        {\r\n            this.buttons.close = html({ parent: this.winButtonGroup, html: this.options.closeButton, type: 'button', styles: button })\r\n            clicked(this.buttons.close, () => this.close())\r\n        }\r\n        for (let key in this.buttons)\r\n        {\r\n            const button = this.buttons[key]\r\n            button.addEventListener('mousemove', () =>\r\n            {\r\n                button.style.opacity = 1\r\n            })\r\n            button.addEventListener('mouseout', () =>\r\n            {\r\n                button.style.opacity = 0.7\r\n            })\r\n        }\r\n    }\r\n\r\n    _createResize()\r\n    {\r\n        this.resizeEdge = html({\r\n            parent: this.winBox, type: 'button', html: this.options.backgroundResize, styles: {\r\n                'position': 'absolute',\r\n                'bottom': 0,\r\n                'right': '4px',\r\n                'border': 0,\r\n                'margin': 0,\r\n                'padding': 0,\r\n                'cursor': 'se-resize',\r\n                'user-select': 'none',\r\n                'height': '15px',\r\n                'width': '10px',\r\n                'background': 'none'\r\n            }\r\n        })\r\n        const down = (e) =>\r\n        {\r\n            const event = this._convertMoveEvent(e)\r\n            const width = this.width || this.win.offsetWidth\r\n            const height = this.height || this.win.offsetHeight\r\n            this._resizing = {\r\n                width: width - event.pageX,\r\n                height: height - event.pageY\r\n            }\r\n            this.emit('resize-start')\r\n            e.preventDefault()\r\n        }\r\n        this.resizeEdge.addEventListener('mousedown', down)\r\n        this.resizeEdge.addEventListener('touchstart', down)\r\n    }\r\n\r\n    _move(e)\r\n    {\r\n        const event = this._convertMoveEvent(e)\r\n\r\n        if (!this._isTouchEvent(e) && e.which !== 1)\r\n        {\r\n            this._moving && this._stopMove()\r\n            this._resizing && this._stopResize()\r\n        }\r\n        if (this._moving)\r\n        {\r\n            this.move(event.pageX - this._moving.x, event.pageY - this._moving.y)\r\n            this.emit('move', this)\r\n            e.preventDefault()\r\n        }\r\n        if (this._resizing)\r\n        {\r\n            this.resize(\r\n                event.pageX + this._resizing.width,\r\n                event.pageY + this._resizing.height\r\n            )\r\n            this.maximized = null\r\n            this.emit('resize', this)\r\n            e.preventDefault()\r\n        }\r\n    }\r\n\r\n    _up()\r\n    {\r\n        if (this._moving)\r\n        {\r\n            this._stopMove()\r\n        }\r\n        this._resizing && this._stopResize()\r\n    }\r\n\r\n    _listeners()\r\n    {\r\n        this.win.addEventListener('mousedown', () => this.focus())\r\n        this.win.addEventListener('touchstart', () => this.focus())\r\n    }\r\n\r\n    _stopMove()\r\n    {\r\n        this._moving = null\r\n        this.emit('move-end', this)\r\n    }\r\n\r\n    _stopResize()\r\n    {\r\n        this._restore = this._resizing = null\r\n        this.emit('resize-end', this)\r\n    }\r\n\r\n    _isTouchEvent(e)\r\n    {\r\n        return !!window.TouchEvent && (e instanceof window.TouchEvent)\r\n    }\r\n\r\n    _convertMoveEvent(e)\r\n    {\r\n        return this._isTouchEvent(e) ? e.changedTouches[0] : e\r\n    }\r\n\r\n    /**\r\n     * attaches window to a side of the screen\r\n     * @param {('horizontal'|'vertical')} direction\r\n     * @param {('left'|'right'|'top'|'bottom')} location\r\n     */\r\n    attachToScreen(direction, location)\r\n    {\r\n        this._attachedToScreen[direction] = location\r\n    }\r\n\r\n    /**\r\n     * @param {WindowManager~Bounds} bounds\r\n     * @param {(boolean|'horizontal'|'vertical')} keepInside\r\n     */\r\n    reposition(bounds, keepInside)\r\n    {\r\n        this.bounds = bounds\r\n        this.keepInside = keepInside\r\n        let x = this.x\r\n        let y = this.y\r\n        x = this._attachedToScreen.horziontal === 'right' ? bounds.right - this.width : x\r\n        x = this._attachedToScreen.horizontal === 'left' ? bounds.left : x\r\n        y = this._attachedToScreen.vertical === 'bottom' ? bounds.bottom - this.height : y\r\n        y = this._attachedToScreen.vertical === 'top' ? bounds.top : y\r\n        this.move(x, y)\r\n    }\r\n\r\n    /**\r\n     * @param {boolean} [ignoreClosed]\r\n     * @returns {boolean}\r\n     */\r\n    isModal(ignoreClosed)\r\n    {\r\n        return (ignoreClosed || !this._closed) && this.options.modal\r\n    }\r\n\r\n    /** @returns {boolean} */\r\n    isClosed()\r\n    {\r\n        return this._closed\r\n    }\r\n\r\n    get z()\r\n    {\r\n        return parseInt(this.win.style.zIndex)\r\n    }\r\n    set z(value)\r\n    {\r\n        this.win.style.zIndex = value\r\n    }\r\n}\r\n\r\nWindow.id = 0\r\n\r\n/**\r\n * @typedef {Object} Window~WindowOptions\r\n * @property {number} [x=0]\r\n * @property {number} [y=0]\r\n * @property {number} [width]\r\n * @property {number} [height]\r\n * @property {boolean} [modal]\r\n * @property {boolean} [openOnCreate=true]\r\n * @property {*} [id]\r\n * @property {boolean} [movable=true]\r\n * @property {boolean} [resizable=true]\r\n * @property {boolean} [maximizable=true]\r\n * @property {boolean} [closable=true]\r\n * @property {boolean} [noSnap] don't snap this window or use this window as a snap target\r\n * @property {boolean} [titlebar=true]\r\n * @property {string} [titlebarHeight=36px]\r\n * @property {boolean} [titleCenter]\r\n * @property {string} [minWidth=200px]\r\n * @property {string} [minHeight=60px]\r\n * @property {string} [borderRadius=4px]\r\n * @property {string} [backgroundModal=rgba(0,0,0,0.6)]\r\n * @property {string} [backgroundWindow=#fefefe]\r\n * @property {string} [backgroundTitlebarActive=#365d98]\r\n * @property {string} [backgroundTitlebarInactive=#888888]\r\n * @property {string} [foregroundButton=#ffffff]\r\n * @property {string} [foregroundTitle=#ffffff]\r\n * @property {Object} [styles]\r\n * @property {string} [maximizeButton=...] used to replace the graphics for the button\r\n * @property {string} [closeButton=...] used to replace the graphics for the button\r\n * @property {string} [resize=...] used to replace the graphics for the button\r\n */","export const close='<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\"><svg width=\"100%\" height=\"100%\" viewBox=\"0 0 20 20\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xml:space=\"preserve\" xmlns:serif=\"http://www.serif.com/\" style=\"fill-rule:evenodd;clip-rule:evenodd;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:1.5;\"><rect id=\"close\" x=\"0\" y=\"0\" width=\"20\" height=\"20\" style=\"fill:none;\"/><g><path d=\"M3.5,3.5l13,13\" style=\"fill:none;stroke:#fff;stroke-width:3px;\"/><path d=\"M16.5,3.5l-13,13\" style=\"fill:none;stroke:#fff;stroke-width:3px;\"/></g></svg>';export const maximize='<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\"><svg width=\"100%\" height=\"100%\" viewBox=\"0 0 20 20\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xml:space=\"preserve\" xmlns:serif=\"http://www.serif.com/\" style=\"fill-rule:evenodd;clip-rule:evenodd;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:1.5;\"><rect id=\"maximize\" x=\"0\" y=\"0\" width=\"20\" height=\"20\" style=\"fill:none;\"/><rect x=\"2\" y=\"2\" width=\"16\" height=\"16\" style=\"fill:none;stroke:#fff;stroke-width:2px;\"/><rect x=\"2\" y=\"2\" width=\"16\" height=\"3.2\" style=\"fill:#fff;\"/></svg>';export const minimize='<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\"><svg width=\"100%\" height=\"100%\" viewBox=\"0 0 20 20\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xml:space=\"preserve\" xmlns:serif=\"http://www.serif.com/\" style=\"fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;\"><rect id=\"minimize\" x=\"0\" y=\"0\" width=\"20\" height=\"20\" style=\"fill:none;\"/><rect x=\"2\" y=\"15.6\" width=\"16\" height=\"3.2\" style=\"fill:#fff;\"/></svg>';export const resize='<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\"><svg width=\"100%\" height=\"100%\" viewBox=\"0 0 20 20\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xml:space=\"preserve\" xmlns:serif=\"http://www.serif.com/\" style=\"fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;\"><rect id=\"resize\" x=\"0\" y=\"0\" width=\"20\" height=\"20\" style=\"fill:none;\"/><clipPath id=\"_clip1\"><rect x=\"0\" y=\"0\" width=\"20\" height=\"20\"/></clipPath><g clip-path=\"url(#_clip1)\"><rect x=\"0\" y=\"16.8\" width=\"20\" height=\"3.2\" style=\"fill:#fff;\"/><path d=\"M17.737,3.595l-14.142,14.142l2.263,2.263l14.142,-14.142l-2.263,-2.263Z\" style=\"fill:#fff;\"/><path d=\"M16.8,0l0,20l3.2,0l0,-20l-3.2,0Z\" style=\"fill:#fff;\"/><path d=\"M7.099,18.4l11.301,-11.123l0,11.123l-11.301,0Z\" style=\"fill:#fff;\"/></g></svg>';export const restore='<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\"><svg width=\"100%\" height=\"100%\" viewBox=\"0 0 20 20\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xml:space=\"preserve\" xmlns:serif=\"http://www.serif.com/\" style=\"fill-rule:evenodd;clip-rule:evenodd;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:1.5;\"><rect id=\"restore\" x=\"0\" y=\"0\" width=\"20\" height=\"20\" style=\"fill:none;\"/><g><rect x=\"7\" y=\"2.5\" width=\"10\" height=\"10\" style=\"fill:none;stroke:#fff;stroke-width:1.5px;\"/><rect x=\"7\" y=\"2.5\" width=\"10\" height=\"2\" style=\"fill:#fff;\"/></g><g><rect x=\"3\" y=\"7.5\" width=\"10\" height=\"10\" style=\"fill:none;stroke:#fff;stroke-width:1.5px;\"/><g><rect x=\"3\" y=\"7.5\" width=\"10\" height=\"2\" style=\"fill:#fff;\"/></g></g></svg>';","import { close, maximize, restore, resize } from './images'\n\nexport const defaultWindowOptions = {\n    x: 0,\n    y: 0,\n    width: undefined,\n    height: undefined,\n    modal: false,\n    openOnCreate: true,\n    id: null,\n\n    minWidth: '200px',\n    minHeight: '60px',\n    borderRadius: 0,\n    styles: {},\n\n    movable: true,\n    resizable: true,\n    maximizable: true,\n    closable: true,\n\n    noSnap: false,\n    noMenu: false,\n\n    titlebar: true,\n    titlebarHeight: '2rem',\n\n    backgroundWindow: '#fefefe',\n    backgroundTitlebarActive: '#365d98',\n    backgroundTitlebarInactive: '#888888',\n    foregroundButton: '#ffffff',\n    foregroundTitle: '#ffffff',\n\n    closeButton: close,\n    maximizeButton: maximize,\n    restoreButton: restore,\n\n    backgroundResize: resize\n}\n\nexport const defaultWindowManagerOptions = {\n    quiet: false,\n    keepInside: true,\n    snap: true,\n    noAccelerator: false,\n    menu: false,\n    styles: {},\n    backgroundModal: 'rgba(0, 0, 0, 0.6)',\n}","import { html } from './html'\nimport { Menu } from './Menu/Menu'\n\nconst DEFAULT_COLOR = '#a8f0f4'\nconst DEFAULT_SIZE = 10\n\nconst SnapOptionsDefault = {\n    screen: true,\n    windows: true,\n    snap: 20,\n    color: DEFAULT_COLOR,\n    spacing: 0,\n    indicator: DEFAULT_SIZE\n}\n\n/**\n * edge snapping plugin\n * @param {WindowManager} wm\n * @param {object} [options]\n * @param {boolean} [options.screen=true] snap to screen edges\n * @param {boolean} [options.windows=true] snap to window edges\n * @param {number} [options.snap=20] distance to edge in pixels before snapping and width/height of snap bars\n * @param {string} [options.color=#a8f0f4] color for snap bars\n * @param {number} [options.spacing=0] spacing distance between window and edges\n * @param {number} [options.indicator=10] size in pixels of snapping indicator (the indicator is actually twice the size of what is shown)\n * @ignore\n */\nexport class Snap\n{\n    constructor(wm, options={})\n    {\n        this.wm = wm\n        this.options = { ...SnapOptionsDefault, ...options }\n        this.highlights = html({ parent: this.wm.wallpaper, styles: { position: 'absolute' } })\n        this.horizontal = html({\n            parent: this.highlights, styles: {\n                display: 'none',\n                position: 'absolute',\n                height: `${this.options.indicator}px`,\n                borderRadius: `${this.options.indicator}px`,\n                backgroundColor: this.options.color\n            }\n        })\n        this.vertical = html({\n            parent: this.highlights, styles: {\n                display: 'none',\n                position: 'absolute',\n                width: `${this.options.indicator}px`,\n                borderRadius: `${this.options.indicator}px`,\n                backgroundColor: this.options.color\n            }\n        })\n        this.horizontal\n        this.showing = []\n    }\n\n    stop()\n    {\n        this.highlights.remove()\n        this.stopped = true\n    }\n\n    addWindow(win)\n    {\n        win.on('move', () => this.move(win))\n        win.on('move-end', () => this.moveEnd(win))\n    }\n\n    screenMove(rect, horizontal, vertical)\n    {\n        const top = Menu.getApplicationHeight()\n        const width = this.wm.win.clientWidth\n        const height = this.wm.win.clientHeight\n        if (rect.left - this.options.snap <= width && rect.right + this.options.snap >= 0)\n        {\n            if (Math.abs(rect.top - top) <= this.options.snap)\n            {\n                horizontal.push({ distance: Math.abs(rect.top - top), left: 0, width, top: top, side: 'top', screen: true })\n            }\n            else if (Math.abs(rect.bottom - height) <= this.options.snap)\n            {\n                horizontal.push({ distance: Math.abs(rect.bottom - height), left: 0, width, top: height, side: 'bottom', screen: true })\n            }\n        }\n        if (rect.top - this.options.snap <= height && rect.bottom + this.options.snap >= 0)\n        {\n            if (Math.abs(rect.left - 0) <= this.options.snap)\n            {\n                vertical.push({ distance: Math.abs(rect.left - 0), top: 0, height, left: 0, side: 'left', screen: true })\n            }\n            else if (Math.abs(rect.right - width) <= this.options.snap)\n            {\n                vertical.push({ distance: Math.abs(rect.right - width), top: 0, height, left: width, side: 'right', screen: true })\n            }\n        }\n    }\n\n    windowsMove(original, rect, horizontal, vertical)\n    {\n        for (let win of this.wm.windows)\n        {\n            if (!win.options.noSnap && win !== original)\n            {\n                const rect2 = win.win.getBoundingClientRect()\n                if (rect.left - this.options.snap <= rect2.right && rect.right + this.options.snap >= rect2.left)\n                {\n                    if (Math.abs(rect.top - rect2.bottom) <= this.options.snap)\n                    {\n                        horizontal.push({ distance: Math.abs(rect.top - rect2.bottom), left: rect2.left, width: rect2.width, top: rect2.bottom, side: 'top' })\n                        if (Math.abs(rect.left - rect2.left) <= this.options.snap)\n                        {\n                            vertical.push({ distance: Math.abs(rect.left - rect2.left), top: rect2.top, height: rect2.height, left: rect2.left, side: 'left', noSpacing: true })\n                        }\n                        else if (Math.abs(rect.right - rect2.right) <= this.options.snap)\n                        {\n                            vertical.push({ distance: Math.abs(rect.right - rect2.right), top: rect2.top, height: rect2.height, left: rect2.right, side: 'right', noSpacing: true })\n                        }\n                    }\n                    else if (Math.abs(rect.bottom - rect2.top) <= this.options.snap)\n                    {\n                        horizontal.push({ distance: Math.abs(rect.bottom - rect2.top), left: rect2.left, width: rect2.width, top: rect2.top, side: 'bottom' })\n                        if (Math.abs(rect.left - rect2.left) <= this.options.snap)\n                        {\n                            vertical.push({ distance: Math.abs(rect.left - rect2.left), top: rect2.top, height: rect2.height, left: rect2.left, side: 'left', noSpacing: true })\n                        }\n                        else if (Math.abs(rect.right - rect2.right) <= this.options.snap)\n                        {\n                            vertical.push({ distance: Math.abs(rect.right - rect2.right), top: rect2.top, height: rect2.height, left: rect2.right, side: 'right', noSpacing: true })\n                        }\n                    }\n                }\n                if (rect.top - this.options.snap <= rect2.bottom && rect.bottom + this.options.snap >= rect2.top)\n                {\n                    if (Math.abs(rect.left - rect2.right) <= this.options.snap)\n                    {\n                        vertical.push({ distance: Math.abs(rect.left - rect2.right), top: rect2.top, height: rect2.height, left: rect2.right, side: 'left' })\n                        if (Math.abs(rect.top - rect2.top) <= this.options.snap)\n                        {\n                            horizontal.push({ distance: Math.abs(rect.top - rect2.top), left: rect2.left, width: rect2.width, top: rect2.top, side: 'top', noSpacing: true })\n                        }\n                        else if (Math.abs(rect.bottom - rect2.bottom) <= this.options.snap)\n                        {\n                            horizontal.push({ distance: Math.abs(rect.bottom - rect2.bottom), left: rect2.left, width: rect2.width, top: rect2.bottom, side: 'bottom', noSpacing: true })\n                        }\n                    }\n                    else if (Math.abs(rect.right - rect2.left) <= this.options.snap)\n                    {\n                        vertical.push({ distance: Math.abs(rect.right - rect2.left), top: rect2.top, height: rect2.height, left: rect2.left, side: 'right' })\n                        if (Math.abs(rect.top - rect2.top) <= this.options.snap)\n                        {\n                            horizontal.push({ distance: Math.abs(rect.top - rect2.top), left: rect2.left, width: rect2.width, top: rect2.top, side: 'top', noSpacing: true })\n                        }\n                        else if (Math.abs(rect.bottom - rect2.bottom) <= this.options.snap)\n                        {\n                            horizontal.push({ distance: Math.abs(rect.bottom - rect2.bottom), left: rect2.left, width: rect2.width, top: rect2.bottom, side: 'bottom', noSpacing: true })\n                        }\n                    }\n                }\n            }\n        }\n    }\n\n    move(win)\n    {\n        if (this.stopped || win.options.noSnap || win.isModal())\n        {\n            return\n        }\n        this.horizontal.style.display = 'none'\n        this.vertical.style.display = 'none'\n        const horizontal = []\n        const vertical = []\n        const rect = win.win.getBoundingClientRect()\n        if (this.options.screen)\n        {\n            this.screenMove(rect, horizontal, vertical)\n        }\n        if (this.options.windows)\n        {\n            this.windowsMove(win, rect, horizontal, vertical)\n        }\n        if (horizontal.length)\n        {\n            horizontal.sort((a, b) => { return a.distance - b.distance })\n            const find = horizontal[0]\n            this.horizontal.style.display = 'block'\n            this.horizontal.style.width = find.width + 'px'\n            this.horizontal.y = find.top - this.options.indicator / 2\n            this.horizontal.yPosition = find.top\n            this.horizontal.style.transform = `translate(${find.left}px,${this.horizontal.y}px)`\n            this.horizontal.side = find.side\n            this.horizontal.noSpacing = find.noSpacing\n            this.horizontal.screen = find.screen\n        }\n        if (vertical.length)\n        {\n            vertical.sort((a, b) => { return a.distance - b.distance })\n            const find = vertical[0]\n            this.vertical.style.display  = 'block'\n            this.vertical.style.height = find.height + 'px'\n            this.vertical.x = find.left - this.options.indicator / 2\n            this.vertical.xPosition = find.left\n            this.vertical.style.transform = `translate(${this.vertical.x}px,${find.top}px)`\n            this.vertical.side = find.side\n            this.vertical.noSpacing = find.noSpacing\n            this.vertical.screen = find.screen\n        }\n    }\n\n    moveEnd(win)\n    {\n        if (this.stopped)\n        {\n            return\n        }\n        const bounds = this.wm.bounds\n        const top = Menu.getApplicationHeight()\n        if (this.horizontal.style.display === 'block')\n        {\n            const spacing = this.horizontal.noSpacing ? 0 : this.options.spacing\n            switch (this.horizontal.side)\n            {\n                case 'top':\n                    win.y = this.horizontal.yPosition + spacing - bounds.top + top\n                    break\n\n                case 'bottom':\n                    win.bottom = Math.floor(this.horizontal.yPosition - spacing - bounds.top + top)\n                    break\n            }\n            win.attachToScreen('vertical', this.horizontal.screen ? this.horizontal.side : '')\n        }\n        if (this.vertical.style.display === 'block')\n        {\n            const spacing = this.vertical.noSpacing ? 0 : this.options.spacing\n            switch (this.vertical.side)\n            {\n                case 'left':\n                    win.x = this.vertical.xPosition + spacing - bounds.left\n                    break\n\n                case 'right':\n                    win.right = Math.floor(this.vertical.xPosition - spacing - bounds.left)\n                    break\n            }\n            win.attachToScreen('horziontal', this.vertical.screen ? this.vertical.side : '')\n        }\n        this.horizontal.style.display = this.vertical.style.display = 'none'\n    }\n}\n\n\n/**\n * @typedef {Object} Snap~SnapOptions\n * @property {boolean} [screen=true] snap to screen edges\n * @property {boolean} [windows=true] snap to window edges\n * @property {number} [snap=20] distance to edge before snapping\n * @property {string} [color=#a8f0f4] color for snap bars\n * @property {number} [spacing=0] spacing distance between window and edges\n * @property {number} [options.indicator=10] size in pixels of snapping indicator (the indicator is actually twice the size of what is shown)\n */","import { html } from './html'\r\nimport { Window } from './Window'\r\nimport { defaultWindowManagerOptions, defaultWindowOptions } from './defaults'\r\nimport { Snap } from './Snap'\r\nimport { accelerator } from './accelerator'\r\nimport { Menu } from './Menu/Menu'\r\n\r\n/**\r\n * Create the WindowManager\r\n * @param {Object} [options]\r\n * @param {HTMLElement} [options.parent=document.body] parent to append WindowManager\r\n * @param {string} [options.backgroundModal=rgba(0, 0, 0, 0.6)] background color for window\r\n * @param {boolean} [options.quiet] suppress the simple-window-manager console message\r\n * @param {(boolean|WindowManager~SnapOptions)} [options.snap] initialize snap plugin\r\n * @param {boolean} [options.noAccelerator] do not initialize keyboard accelerators (needed for Menu)\r\n * @param {(boolean|'horizontal'|'vertical')} [options.keepInside=true] keep windows inside the parent in a certain direction\r\n * @param {Object} [options.styles] additional hard-coded styles for main container window (eg, { color: 'green' })\r\n * @param {Window~WindowOptions} [windowOptions] default options used when createWindow is called\r\n */\r\nexport class WindowManager\r\n{\r\n    constructor(options = {}, windowOptions = {})\r\n    {\r\n        this.options = { ...defaultWindowManagerOptions, ...options }\r\n        this.options.parent = this.options.parent || document.body\r\n        if (!this.options.quiet)\r\n        {\r\n            console.log('%c  simple-window-manager initialized ', 'color: #ff00ff')\r\n        }\r\n        this.windows = []\r\n        this.active = null\r\n        this._setupWin()\r\n        this._setupWallpaper()\r\n        this._setupModal()\r\n        if (this.options.snap)\r\n        {\r\n            this.snap(this.options.snap === true ? {} : this.options.snap)\r\n        }\r\n        this.windowOptions = { ...defaultWindowOptions, ...windowOptions }\r\n        window.addEventListener('resize', () => this.resize())\r\n        if (!this.options.noAccelerator)\r\n        {\r\n            accelerator.init()\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Create a window\r\n     * @param {WindowOptions} [options]\r\n     * @param {string} [options.title]\r\n     * @param {number} [options.x] position\r\n     * @param {number} [options.y] position\r\n     * @param {boolean} [options.modal]\r\n     * @param {(number|*)} [options.id] if not provide, id will be assigned in order of creation (0, 1, 2...)\r\n     * @returns {Window} the created window\r\n     */\r\n    createWindow(options = {})\r\n    {\r\n        const win = new Window(this, { ...this.windowOptions, ...options })\r\n        win.on('open', () => this._open(win))\r\n        win.on('focus', () => this._focus(win))\r\n        win.on('blur', () => this._blur(win))\r\n        win.on('close', () => this._close(win))\r\n        win.win.addEventListener('mousemove', (e) => this._move(e))\r\n        win.win.addEventListener('touchmove', (e) => this._move(e))\r\n        win.win.addEventListener('mouseup', (e) => this._up(e))\r\n        win.win.addEventListener('touchend', (e) => this._up(e))\r\n        if (this._snap && !options.noSnap)\r\n        {\r\n            this._snap.addWindow(win)\r\n        }\r\n        win.reposition(this.bounds, this.options.keepInside)\r\n        if (win.options.openOnCreate)\r\n        {\r\n            win.open()\r\n        }\r\n        return win\r\n    }\r\n\r\n    /**\r\n     * enable edge and/or screen snapping\r\n     * @param {WindowManager~SnapOptions} [options]\r\n     */\r\n    snap(options)\r\n    {\r\n        this._snap = new Snap(this, options)\r\n        for (const win of this.windows)\r\n        {\r\n            if (!win.options.noSnap)\r\n            {\r\n                this._snap.addWindow(win)\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * send window to front\r\n     * @param {Window} win\r\n     */\r\n    sendToFront(win)\r\n    {\r\n        const index = this.windows.indexOf(win)\r\n        console.assert(index !== -1, 'sendToFront should find window in this.windows')\r\n        if (index !== this.windows.length - 1)\r\n        {\r\n            this.windows.splice(index, 1)\r\n            this.windows.push(win)\r\n            this._reorder()\r\n        }\r\n    }\r\n\r\n    /**\r\n     * send window to back\r\n     * @param {Window} win\r\n     */\r\n    sendToBack(win)\r\n    {\r\n        const index = this.windows.indexOf(win)\r\n        console.assert(index !== -1, 'sendToFront should find window in this.windows')\r\n        if (index !== 0)\r\n        {\r\n            this.windows.splice(index, 1)\r\n            this.windows.unshift(win)\r\n            this._reorder()\r\n        }\r\n    }\r\n\r\n    /**\r\n     * save the state of all the windows\r\n     * @returns {Object} use this object in load() to restore the state of all windows\r\n     */\r\n    save()\r\n    {\r\n        const data = {}\r\n        for (let i = 0; i < this.windows.length; i++)\r\n        {\r\n            const win = this.windows[i]\r\n            data[win.id] = win.save()\r\n            data[win.id].order = i\r\n        }\r\n        return data\r\n    }\r\n\r\n    /**\r\n     * restores the state of all the windows\r\n     * NOTE: this requires that the windows have the same id as when save() was called\r\n     * @param {Object} data created by save()\r\n     */\r\n    load(data)\r\n    {\r\n        for (const id in data)\r\n        {\r\n            const win = this.getWindowById(id)\r\n            if (win)\r\n            {\r\n                win.load(data[id])\r\n            }\r\n        }\r\n        // reorder windows\r\n    }\r\n\r\n    /**\r\n     * close all windows\r\n     */\r\n    closeAll()\r\n    {\r\n        for (let win of this.windows)\r\n        {\r\n            win.close()\r\n        }\r\n        this.windows = []\r\n        this.active = null\r\n    }\r\n\r\n    /**\r\n     * reorder windows\r\n     * @private\r\n     * @returns {number} available z-index for top window\r\n     */\r\n    _reorder()\r\n    {\r\n        let i = 0\r\n        for (const win of this.windows)\r\n        {\r\n            if (!win.isClosed())\r\n            {\r\n                win.z = i++\r\n            }\r\n        }\r\n    }\r\n\r\n    _setupWin()\r\n    {\r\n        /**\r\n         * This is the top-level DOM element\r\n         * @type {HTMLElement}\r\n         * @readonly\r\n         */\r\n        this.win = html({\r\n            parent: this.options.parent,\r\n            styles: {\r\n                ...{\r\n                    'user-select': 'none',\r\n                    'width': '100%',\r\n                    'height': '100%',\r\n                    'overflow': 'hidden',\r\n                    'z-index': -1,\r\n                    'cursor': 'default',\r\n                },\r\n                ...this.options.styles\r\n            }\r\n        })\r\n    }\r\n\r\n    _setupWallpaper()\r\n    {\r\n        /**\r\n         * This is the bottom DOM element. Use this to set a wallpaper or attach elements underneath the windows\r\n         * @type {HTMLElement}\r\n         * @readonly\r\n         */\r\n        this.wallpaper = html({\r\n            parent: this.win,\r\n            styles: {\r\n                ...{\r\n                    'user-select': 'none',\r\n                    'position': 'absolute',\r\n                    'top': 0,\r\n                    'left': 0,\r\n                    'width': '100%',\r\n                    'height': '100%',\r\n                    'overflow': 'hidden'\r\n                }\r\n            }\r\n        })\r\n        this.wallpaper.addEventListener('mousemove', (e) => this._move(e))\r\n        this.wallpaper.addEventListener('touchmove', (e) => this._move(e))\r\n        this.wallpaper.addEventListener('mouseup', (e) => this._up(e))\r\n        this.wallpaper.addEventListener('touchend', (e) => this._up(e))\r\n    }\r\n\r\n    _setupModal()\r\n    {\r\n        this.modalOverlay = html({\r\n            parent: this.win,\r\n            styles: {\r\n                'display': 'none',\r\n                'user-select': 'none',\r\n                'position': 'absolute',\r\n                'top': 0,\r\n                'left': 0,\r\n                'width': '100%',\r\n                'height': '100%',\r\n                'overflow': 'hidden',\r\n                'background': this.options.backgroundModal\r\n            }\r\n        })\r\n        this.modalOverlay.addEventListener('mousemove', (e) => { this._move(e); e.preventDefault(); e.stopPropagation() })\r\n        this.modalOverlay.addEventListener('touchmove', (e) => { this._move(e); e.preventDefault(); e.stopPropagation() })\r\n        this.modalOverlay.addEventListener('mouseup', (e) => { this._up(e); e.preventDefault(); e.stopPropagation() })\r\n        this.modalOverlay.addEventListener('touchend', (e) => { this._up(e); e.preventDefault(); e.stopPropagation() })\r\n        this.modalOverlay.addEventListener('mousedown', (e) => { e.preventDefault(); e.stopPropagation() })\r\n        this.modalOverlay.addEventListener('touchstart', (e) => { e.preventDefault(); e.stopPropagation() })\r\n    }\r\n\r\n    _open(win)\r\n    {\r\n        this.windows.push(win)\r\n        this._reorder()\r\n        if (win.options.modal)\r\n        {\r\n            this.modalOverlay.style.display = 'block'\r\n            this.modalOverlay.style.zIndex = win.z\r\n        }\r\n        else\r\n        {\r\n            this.modalOverlay.style.display = 'none'\r\n        }\r\n    }\r\n\r\n    _focus(win)\r\n    {\r\n        if (this.active === win)\r\n        {\r\n            return\r\n        }\r\n        if (this.active)\r\n        {\r\n            this.active.blur()\r\n        }\r\n        const index = this.windows.indexOf(win)\r\n        console.assert(index !== -1, 'WindowManager._focus should find window in this.windows')\r\n        if (index !== this.windows.length - 1)\r\n        {\r\n            this.windows.splice(index, 1)\r\n            this.windows.push(win)\r\n        }\r\n        this._reorder()\r\n        this.active = this.windows[this.windows.length - 1]\r\n    }\r\n\r\n    _blur(win)\r\n    {\r\n        if (this.active === win)\r\n        {\r\n            this.active = null\r\n        }\r\n    }\r\n\r\n    _close(win)\r\n    {\r\n        if (win.isModal(true))\r\n        {\r\n            if (next && next.isModal())\r\n            {\r\n                this.modalOverlay.style.zIndex = next.z\r\n            }\r\n            else\r\n            {\r\n                this.modalOverlay.style.display = 'none'\r\n            }\r\n        }\r\n    }\r\n\r\n    _move(e)\r\n    {\r\n        for (const key in this.windows)\r\n        {\r\n            this.windows[key]._move(e)\r\n        }\r\n    }\r\n\r\n    _up(e)\r\n    {\r\n        for (const key in this.windows)\r\n        {\r\n            this.windows[key]._up(e)\r\n        }\r\n    }\r\n\r\n    checkModal(win)\r\n    {\r\n        return !this.modal || this.modal === win\r\n    }\r\n\r\n    /** @type {WindowManager~Bounds} */\r\n    get bounds()\r\n    {\r\n        const top = Menu.getApplicationHeight()\r\n        return {\r\n            top: this.win.offsetTop + top,\r\n            bottom: this.win.offsetTop + this.win.offsetHeight,\r\n            left: this.win.offsetLeft,\r\n            right: this.win.offsetLeft + this.win.offsetWidth\r\n        }\r\n    }\r\n\r\n    resize()\r\n    {\r\n        const bounds = this.bounds\r\n        for (const key in this.windows)\r\n        {\r\n            this.windows[key].reposition(bounds, this.options.keepInside)\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Find a window by id\r\n     * @param {*} id\r\n     * @returns {Window}\r\n     */\r\n    getWindowById(id)\r\n    {\r\n        return this.windows.find(win => win.id === id)\r\n    }\r\n}\r\n\r\n/**\r\n * @typedef {Object} WindowManager~Bounds\r\n * @property {number} left\r\n * @property {number} right\r\n * @property {number} top\r\n * @property {number} bottom\r\n */\r\n\r\n /**\r\n  * @typedef {Object} WindowManager~SnapOptions\r\n  * @property {boolean} [screen=true] snap to screen edges\r\n  * @property {boolean} [windows=true] snap to window edges\r\n  * @property {number} [snap=20] distance to edge in pixels before snapping and width/height of snap bars\r\n  * @property {string} [color=#a8f0f4] color for snap bars\r\n  * @property {number} [spacing=0] spacing distance between window and edges\r\n  * @property {number} [indicator=10] size in pixels of snapping indicator (the indicator is actually twice the size of what is shown)\r\n  */","import { Menu, MenuItem } from '../../src/index'\n\nlet _windows\n\nexport function menu(wm)\n{\n    const file = new Menu()\n    file.append(new MenuItem({ label: '&New Window', accelerator: 'ctrl+m', click: () => newWindow(wm) }))\n\n    _windows = new Menu()\n\n    const about = new Menu()\n    about.append(new MenuItem({ label: 'simple-&window-manager', click: () => aboutWM()}))\n    about.append(new MenuItem({ label: 'yy-menu', click: () => aboutMenu() }))\n\n    const main = new Menu()\n    main.append(new MenuItem({ label: '&File', submenu: file }))\n    main.append(new MenuItem({ label: '&Windows', submenu: _windows }))\n    main.append(new MenuItem({ label: '&About', submenu: about }))\n    Menu.setApplicationMenu(main)\n}\n\nexport function menuWindows(wm)\n{\n    for (let i = 0; i < wm.windows.length; i++)\n    {\n        const win = wm.windows[i]\n        _windows.append(new MenuItem({\n            type: 'checkbox', label: win.options.title || 'Window ' + (i < 10 ? '&' : '') + i, accelerator: i < 10 ? 'ctrl+' + i : null, checked: true, click: (e, item) =>\n            {\n                if (item.checked)\n                {\n                    wm.windows[i].open()\n                }\n                else\n                {\n                    wm.windows[i].close()\n                }\n            }\n        }))\n    }\n}\n\nfunction newWindow()\n{\n\n}\n\nfunction aboutWM()\n{\n\n}\n\nfunction aboutMenu()\n{\n\n}","import FPS from 'yy-fps'\r\n\r\nimport { WindowManager } from '../../src/index'\r\nimport { html } from '../../src/html'\r\n\r\nimport { menu, menuWindows } from './menu'\r\n\r\nlet wm\r\n\r\nwindow.onload = () =>\r\n{\r\n    wm = new WindowManager({ snap: { screen: true, windows: true } })\r\n\r\n    menu(wm)\r\n\r\n    // creates test windows\r\n    test()\r\n    test2()\r\n    test3()\r\n    test4()\r\n    test5()\r\n    test7()\r\n\r\n    wallpaper()\r\n    menuWindows(wm)\r\n    update()\r\n}\r\n\r\nconst top = 10\r\n\r\nfunction test()\r\n{\r\n    const test = wm.createWindow({ x: 10, y: top, titlebar: false, title: 'Test Window', resizable: false, maximizable: false, minimizable: false, titleCenter: true, closable: false })\r\n    test.content.style.padding = '1em'\r\n    test.content.innerHTML = 'This is a test window.'\r\n    test.open()\r\n}\r\n\r\nfunction test2()\r\n{\r\n    const test = wm.createWindow({\r\n        width: 300, height: 150,\r\n        x: 100, y: 100,\r\n        titlebarHeight: '22px',\r\n        backgroundTitlebarActive: 'green',\r\n        backgroundTitlebarInactive: 'purple',\r\n        backgroundWindow: 'rgb(255,200,255)',\r\n    })\r\n    test.content.style.padding = '0.5em'\r\n    test.content.innerHTML = 'This is a pink test window.<br><br>Check out the fancy title bar for other style tests.<br><br><br>And scrolling!!!'\r\n    test.open()\r\n}\r\n\r\nfunction test3()\r\n{\r\n    // create a test window with a button to create a modal window\r\n    const test = wm.createWindow({ x: 300, y: 400, width: 350, title: 'This is one fancy demo!' })\r\n    test.content.style.padding = '1em'\r\n    html({ parent: test.content, html: 'OK. It isn\\'t that fancy, but it shows off some of the functionality of this library.<br><br>Please excuse the mess. I do NOT keep my desktop this messy, but I thought it made for a good demo.' })\r\n    const div = html({ parent: test.content, styles: { textAlign: 'center', marginTop: '1em' } })\r\n    const button = html({ parent: div, type: 'button', html: 'open modal window' })\r\n\r\n    let x = 0\r\n    let y = 0\r\n    function createModal()\r\n    {\r\n        // create a modal window\r\n        const modal = wm.createWindow({\r\n            modal: true,\r\n            width: 200,\r\n            title: 'modal window',\r\n            minimizable: false,\r\n            maximizable: false\r\n        })\r\n        const div = html({ parent: modal.content, styles: { 'margin': '0.5em' } })\r\n        html({ parent: div, html: 'This needs to be closed before using other windows.' })\r\n        const buttonDiv = html({ parent: div, styles: { 'text-align': 'center', margin: '1em', display: 'flex' } })\r\n        const buttonAdd = html({ parent: buttonDiv, type: 'button', html: 'open child modal' })\r\n        const button = html({ parent: buttonDiv, type: 'button', html: 'close modal' })\r\n        button.onclick = () => modal.close()\r\n        buttonAdd.onclick = () => createModal()\r\n        modal.open()\r\n\r\n        // center window in test\r\n        modal.center(test)\r\n        modal.move(modal.x + x, modal.y + y)\r\n        x += 20\r\n        y += 20\r\n    }\r\n\r\n    button.onclick = () => createModal(div)\r\n    test.open()\r\n}\r\n\r\nfunction test4()\r\n{\r\n    const test = wm.createWindow({ x: 300, y: top, title: 'My wife\\'s art gallery!', maximizable: false })\r\n    test.content.innerHTML = '<iframe width=\"560\" height=\"315\" src=\"https://yuanru.gallery\" frameborder=\"0\" allow=\"encrypted-media\" allowfullscreen></iframe>'\r\n    test.open()\r\n    test.sendToBack()\r\n}\r\n\r\nfunction test5()\r\n{\r\n    const test = wm.createWindow({ x: 20, y: 600, title: 'window save/load' })\r\n    html({ parent: test.content, html: 'Save the windows, and then move windows around and load them.', styles: { margin: '0.5em' } })\r\n    const buttons = html({ parent: test.content, styles: { 'text-align': 'center' } })\r\n    const save = html({ parent: buttons, html: 'save window state', type: 'button', styles: { margin: '1em', background: 'rgb(200,255,200)' } })\r\n    const load = html({ parent: buttons, html: 'load window state', type: 'button', styles: { margin: '1em', background: 'rgb(255,200,200)' } })\r\n    test.open()\r\n    let data\r\n    save.onclick = () => data = wm.save()\r\n    load.onclick = () => { if (data) wm.load(data) }\r\n}\r\n\r\nfunction test7()\r\n{\r\n    const test = wm.createWindow({ x: 700, y: 40, width: 400, height: 300, title: 'API documentation', styles: { overflow: 'hidden' } })\r\n    test.content.innerHTML = '<iframe width=\"100%\" height=\"100%\" src=\"https://davidfig.github.io/window-manager/jsdoc/\"></iframe>'\r\n    test.open()\r\n}\r\n\r\nfunction wallpaper()\r\n{\r\n    const wallpaper = html({ parent: wm.wallpaper, styles: { position: 'absolute', top: '50%', left: '50%', transform: 'translate(-50%, -50%)', color: 'white' } })\r\n    wallpaper.innerHTML = 'You can also use the background as wallpaper or another window surface.'\r\n}\r\n\r\nconst fps = new FPS()\r\nfunction update()\r\n{\r\n    fps.frame(false, true)\r\n    requestAnimationFrame(update)\r\n}"],"names":["Math","trimLeft","trimRight","tinyCounter","mathRound","round","mathMin","min","mathMax","max","mathRandom","random","tinycolor","color","opts","this","rgb","r","g","b","a","s","v","l","ok","format","replace","toLowerCase","match","named","names","matchers","exec","rgba","hsl","h","hsla","hsv","hsva","hex8","parseIntFromHex","convertHexToDecimal","hex6","hex4","hex3","stringInputToObject","isValidCSSUnit","bound01","String","substr","convertToPercentage","i","floor","f","p","q","t","mod","hsvToRgb","hue2rgb","hslToRgb","hasOwnProperty","boundAlpha","inputToRGB","_originalInput","_r","_g","_b","_a","_roundA","_format","_gradientType","gradientType","_ok","_tc_id","rgbToHsl","d","rgbToHsv","rgbToHex","allow3Char","hex","pad2","toString","charAt","join","rgbaToArgbHex","convertDecimalToHex","desaturate","amount","toHsl","clamp01","saturate","greyscale","lighten","brighten","toRgb","darken","spin","hue","complement","triad","tetrad","splitcomplement","analogous","results","slices","part","ret","push","monochromatic","toHsv","modification","prototype","isDark","getBrightness","isLight","isValid","getOriginalInput","getFormat","getAlpha","getLuminance","RsRGB","GsRGB","BsRGB","pow","setAlpha","value","toHsvString","toHslString","toHex","toHexString","toHex8","allow4Char","rgbaToHex","toHex8String","toRgbString","toPercentageRgb","toPercentageRgbString","toName","hexNames","toFilter","secondColor","hex8String","secondHex8String","formatSet","formattedString","hasAlpha","clone","_applyModification","fn","args","apply","concat","slice","call","arguments","_applyCombination","fromRatio","newColor","equals","color1","color2","mix","rgb1","rgb2","readability","c1","c2","isReadable","wcag2","wcag2Parms","out","parms","level","size","toUpperCase","validateWCAG2Parms","mostReadable","baseColor","colorList","includeFallbackColors","bestColor","bestScore","length","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","burntsienna","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","o","flipped","flip","parseFloat","isNaN","n","indexOf","isOnePointZero","processPercent","isPercentage","parseInt","abs","val","c","CSS_UNIT","PERMISSIVE_MATCH3","PERMISSIVE_MATCH4","RegExp","module","exports","window","_createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","Object","defineProperty","key","Constructor","protoProps","staticProps","STYLES","background","STYLES_FPS","padding","STYLES_METER","FPS","options","instance","TypeError","_classCallCheck","tolerance","meterWidth","meterHeight","meterLineHeight","div","document","createElement","Counter","[object Object]","side","findParent","appendChild","style","styles","name","test","getElementById","container","id","overflow","position","zIndex","pointerEvents","userSelect","body","arg","innerHTML","divFPS","meter","lastTime","frameNumber","lastUpdate","lastFPS","remove","style1","style2","_style","fpsSpan","span","innerText","text","stylesFPS","meterCanvas","display","width","height","stylesMeter","currentTime","performance","now","meterUpdate","percent","getContext","data","getImageData","putImageData","clearRect","fillStyle","Color","fillRect","get","set","_meter","divMeter","html","element","type","assign","className","parent","has","prefix","Events","EE","context","once","addListener","emitter","event","listener","evt","_events","_eventsCount","clearEvent","EventEmitter","create","__proto__","eventNames","events","getOwnPropertySymbols","listeners","handlers","ee","Array","listenerCount","emit","a1","a2","a3","a4","a5","len","removeListener","undefined","j","on","removeAllListeners","off","prefixed","defaultOptions","threshold","clicked","doubleClicked","doubleClickedTime","longClicked","longClickedTime","capture","clickDown","callback","Clicked","querySelector","mousedown","e","mouseup","mousemove","touchstart","touchmove","touchcancel","cancel","touchend","addEventListener","passive","console","warn","removeEventListener","down","touches","handleDown","changedTouches","screenX","screenY","x","y","lastX","lastY","pastThreshold","doubleClickedTimeout","clearTimeout","longClickedTimeout","preventDefault","handleClicks","pointerId","setTimeout","doubleClickedCancel","longClikedTimeout","config","ApplicationContainerStyle","z-index","top","left","user-select","font-size","ApplicationMenuStyle","flex-direction","backgroundColor","border","box-shadow","outline","ApplicationMenuRowStyle","margin","line-height","MenuStyle","boxShadow","RowStyle","AcceleratorStyle","opacity","SeparatorStyle","border-bottom","AcceleratorKeyStyle","text-decoration","text-decoration-color","MinimumColumnWidth","SelectedBackgroundStyle","Overlap","SubmenuOpenDelay","accelerator","initialized","menuKeys","keys","_keydown","_keyup","letter","menuItem","keyCode","menu","applicationMenu","_prepareKey","handleClick","stopPropagation","closeAll","enter","move","pressed","released","alt","split","code","modifiers","modifier","sort","codes","isPressed","altKey","ctrlKey","metaKey","shiftKey","translate","MenuItem","click","applyConfig","_checked","checked","createChecked","label","createShortcut","createAccelerator","createSubmenu","submenu","mouseenter","mouseleave","showing","submenuTimeout","show","base","check","current","shortcutSpan","textDecoration","acceleratorKey","prettifyKey","register","arrow","unregisterMenuShortcuts","hideAccelerators","activeElement","focus","Menu","init","children","tabIndex","pos","childNodes","append","insertBefore","splice","next","hide","showAccelerators","offsetLeft","offsetTop","offsetHeight","offsetWidth","attached","application","child","childLabel","childAccelerator","innerWidth","innerHeight","showShortcut","index","registerMenuShortcut","registerMenuSpecial","hideShortcut","direction","selector","moveChild","horizontalSelector","items","registerAlt","clearMenuKeys","blur","showApplicationAccelerators","Window","wm","super","_createWin","_createWinBox","_createTitlebar","_createContent","resizable","_createResize","_createOverlay","_buildTransform","_listeners","active","maximized","_closed","_restore","_moving","_resizing","_attachedToScreen","vertical","horziontal","noFocus","win","titlebar","winTitlebar","backgroundTitlebarActive","backgroundTitlebarInactive","closed","transform","keepInside","getApplicationHeight","maximizable","buttons","maximize","maximizeButton","wallpaper","restoreButton","sendToBack","sendToFront","close","open","title","_title","winTitle","right","bottom","border-radius","borderRadius","min-width","minWidth","min-height","minHeight","background-color","backgroundWindow","winBox","content","flex","overflow-x","overflow-y","overlay","_downTitlebar","_convertMoveEvent","pageX","pageY","_moved","align-items","justify-content","titlebarHeight","winTitleStyles","cursor","font-weight","foregroundTitle","titleCenter","_createButtons","movable","winButtonGroup","padding-left","button","margin-left","background-size","background-repeat","foregroundButton","closable","closeButton","resizeEdge","backgroundResize","_isTouchEvent","which","_stopMove","_stopResize","resize","TouchEvent","location","bounds","horizontal","ignoreClosed","modal","z","defaultWindowOptions","openOnCreate","noSnap","noMenu","defaultWindowManagerOptions","quiet","snap","noAccelerator","backgroundModal","SnapOptionsDefault","screen","windows","spacing","indicator","Snap","highlights","stopped","moveEnd","rect","clientWidth","clientHeight","distance","original","rect2","getBoundingClientRect","noSpacing","isModal","screenMove","windowsMove","find","yPosition","xPosition","attachToScreen","WindowManager","windowOptions","log","_setupWin","_setupWallpaper","_setupModal","_open","_focus","_blur","_close","_move","_up","_snap","addWindow","reposition","assert","_reorder","unshift","save","order","getWindowById","load","isClosed","modalOverlay","_windows","onload","file","about","main","setApplicationMenu","createWindow","minimizable","test2","textAlign","marginTop","onclick","createModal","buttonDiv","text-align","buttonAdd","center","test3","test4","test5","test7","item","menuWindows","update","fps","frame","requestAnimationFrame"],"mappings":"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"}